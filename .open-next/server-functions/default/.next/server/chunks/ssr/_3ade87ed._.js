module.exports=[13091,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0});var d={isHangingPromiseRejectionError:function(){return f},makeDevtoolsIOAwarePromise:function(){return l},makeHangingPromise:function(){return j}};for(var e in d)Object.defineProperty(c,e,{enumerable:!0,get:d[e]});function f(a){return"object"==typeof a&&null!==a&&"digest"in a&&a.digest===g}let g="HANGING_PROMISE_REJECTION";class h extends Error{constructor(a,b){super(`During prerendering, ${b} rejects when the prerender is complete. Typically these errors are handled by React but if you move ${b} to a different context by using \`setTimeout\`, \`after\`, or similar functions you may observe this error and you should handle it in that context. This occurred at route "${a}".`),this.route=a,this.expression=b,this.digest=g}}let i=new WeakMap;function j(a,b,c){if(a.aborted)return Promise.reject(new h(b,c));{let d=new Promise((d,e)=>{let f=e.bind(null,new h(b,c)),g=i.get(a);if(g)g.push(f);else{let b=[f];i.set(a,b),a.addEventListener("abort",()=>{for(let a=0;a<b.length;a++)b[a]()},{once:!0})}});return d.catch(k),d}}function k(){}function l(a,b,c){return b.stagedRendering?b.stagedRendering.delayUntilStage(c,void 0,a):new Promise(b=>{setTimeout(()=>{b(a)},0)})}},49640,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0});var d={BailoutToCSRError:function(){return g},isBailoutToCSRError:function(){return h}};for(var e in d)Object.defineProperty(c,e,{enumerable:!0,get:d[e]});let f="BAILOUT_TO_CLIENT_SIDE_RENDERING";class g extends Error{constructor(a){super(`Bail out to client-side rendering: ${a}`),this.reason=a,this.digest=f}}function h(a){return"object"==typeof a&&null!==a&&"digest"in a&&a.digest===f}},96556,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0});var d={DynamicServerError:function(){return g},isDynamicServerError:function(){return h}};for(var e in d)Object.defineProperty(c,e,{enumerable:!0,get:d[e]});let f="DYNAMIC_SERVER_USAGE";class g extends Error{constructor(a){super(`Dynamic server usage: ${a}`),this.description=a,this.digest=f}}function h(a){return"object"==typeof a&&null!==a&&"digest"in a&&"string"==typeof a.digest&&a.digest===f}("function"==typeof c.default||"object"==typeof c.default&&null!==c.default)&&void 0===c.default.__esModule&&(Object.defineProperty(c.default,"__esModule",{value:!0}),Object.assign(c.default,c),b.exports=c.default)},60312,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0});var d={StaticGenBailoutError:function(){return g},isStaticGenBailoutError:function(){return h}};for(var e in d)Object.defineProperty(c,e,{enumerable:!0,get:d[e]});let f="NEXT_STATIC_GEN_BAILOUT";class g extends Error{constructor(...a){super(...a),this.code=f}}function h(a){return"object"==typeof a&&null!==a&&"code"in a&&a.code===f}("function"==typeof c.default||"object"==typeof c.default&&null!==c.default)&&void 0===c.default.__esModule&&(Object.defineProperty(c.default,"__esModule",{value:!0}),Object.assign(c.default,c),b.exports=c.default)},17491,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0});var d={METADATA_BOUNDARY_NAME:function(){return f},OUTLET_BOUNDARY_NAME:function(){return h},ROOT_LAYOUT_BOUNDARY_NAME:function(){return i},VIEWPORT_BOUNDARY_NAME:function(){return g}};for(var e in d)Object.defineProperty(c,e,{enumerable:!0,get:d[e]});let f="__next_metadata_boundary__",g="__next_viewport_boundary__",h="__next_outlet_boundary__",i="__next_root_layout_boundary__"},61933,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0});var d={atLeastOneTask:function(){return h},scheduleImmediate:function(){return g},scheduleOnNextTick:function(){return f},waitAtLeastOneReactRenderTask:function(){return i}};for(var e in d)Object.defineProperty(c,e,{enumerable:!0,get:d[e]});let f=a=>{Promise.resolve().then(()=>{process.nextTick(a)})},g=a=>{setImmediate(a)};function h(){return new Promise(a=>g(a))}function i(){return new Promise(a=>setImmediate(a))}},28340,(a,b,c)=>{"use strict";function d(){let a,b,c=new Promise((c,d)=>{a=c,b=d});return{resolve:a,reject:b,promise:c}}Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"createPromiseWithResolvers",{enumerable:!0,get:function(){return d}})},31382,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0});var d,e={RenderStage:function(){return i},StagedRenderingController:function(){return j}};for(var f in e)Object.defineProperty(c,f,{enumerable:!0,get:e[f]});let g=a.r(50640),h=a.r(28340);var i=((d={})[d.Static=1]="Static",d[d.Runtime=2]="Runtime",d[d.Dynamic=3]="Dynamic",d);class j{constructor(a=null){this.abortSignal=a,this.currentStage=1,this.runtimeStagePromise=(0,h.createPromiseWithResolvers)(),this.dynamicStagePromise=(0,h.createPromiseWithResolvers)(),a&&a.addEventListener("abort",()=>{let{reason:b}=a;this.currentStage<2&&(this.runtimeStagePromise.promise.catch(k),this.runtimeStagePromise.reject(b)),this.currentStage<3&&(this.dynamicStagePromise.promise.catch(k),this.dynamicStagePromise.reject(b))},{once:!0})}advanceStage(a){!(this.currentStage>=a)&&(this.currentStage=a,a>=2&&this.runtimeStagePromise.resolve(),a>=3&&this.dynamicStagePromise.resolve())}getStagePromise(a){switch(a){case 2:return this.runtimeStagePromise.promise;case 3:return this.dynamicStagePromise.promise;default:throw Object.defineProperty(new g.InvariantError(`Invalid render stage: ${a}`),"__NEXT_ERROR_CODE",{value:"E881",enumerable:!1,configurable:!0})}}waitForStage(a){return this.getStagePromise(a)}delayUntilStage(a,b,c){var d,e,f;let g,h=(d=this.getStagePromise(a),e=b,f=c,g=new Promise((a,b)=>{d.then(a.bind(null,f),b)}),void 0!==e&&(g.displayName=e),g);return this.abortSignal&&h.catch(k),h}}function k(){}},60384,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0});var d,e,f={Postpone:function(){return D},PreludeState:function(){return Z},abortAndThrowOnSynchronousRequestDataAccess:function(){return C},abortOnSynchronousPlatformIOAccess:function(){return A},accessedDynamicData:function(){return L},annotateDynamicAccess:function(){return Q},consumeDynamicAccess:function(){return M},createDynamicTrackingState:function(){return t},createDynamicValidationState:function(){return u},createHangingInputAbortSignal:function(){return P},createRenderInBrowserAbortSignal:function(){return O},delayUntilRuntimeStage:function(){return aa},formatDynamicAPIAccesses:function(){return N},getFirstDynamicReason:function(){return v},isDynamicPostpone:function(){return G},isPrerenderInterruptedError:function(){return K},logDisallowedDynamicError:function(){return $},markCurrentScopeAsDynamic:function(){return w},postponeWithTracking:function(){return E},throwIfDisallowedDynamic:function(){return _},throwToInterruptStaticGeneration:function(){return x},trackAllowedDynamicAccess:function(){return Y},trackDynamicDataInDynamicRender:function(){return y},trackSynchronousPlatformIOAccessInDev:function(){return B},useDynamicRouteParams:function(){return R},useDynamicSearchParams:function(){return S}};for(var g in f)Object.defineProperty(c,g,{enumerable:!0,get:f[g]});let h=(d=a.r(717))&&d.__esModule?d:{default:d},i=a.r(96556),j=a.r(60312),k=a.r(32319),l=a.r(56704),m=a.r(13091),n=a.r(17491),o=a.r(61933),p=a.r(49640),q=a.r(50640),r=a.r(31382),s="function"==typeof h.default.unstable_postpone;function t(a){return{isDebugDynamicAccesses:a,dynamicAccesses:[],syncDynamicErrorWithStack:null}}function u(){return{hasSuspenseAboveBody:!1,hasDynamicMetadata:!1,hasDynamicViewport:!1,hasAllowedDynamic:!1,dynamicErrors:[]}}function v(a){var b;return null==(b=a.dynamicAccesses[0])?void 0:b.expression}function w(a,b,c){if(b)switch(b.type){case"cache":case"unstable-cache":case"private-cache":return}if(!a.forceDynamic&&!a.forceStatic){if(a.dynamicShouldError)throw Object.defineProperty(new j.StaticGenBailoutError(`Route ${a.route} with \`dynamic = "error"\` couldn't be rendered statically because it used \`${c}\`. See more info here: https://nextjs.org/docs/app/building-your-application/rendering/static-and-dynamic#dynamic-rendering`),"__NEXT_ERROR_CODE",{value:"E553",enumerable:!1,configurable:!0});if(b)switch(b.type){case"prerender-ppr":return E(a.route,c,b.dynamicTracking);case"prerender-legacy":b.revalidate=0;let d=Object.defineProperty(new i.DynamicServerError(`Route ${a.route} couldn't be rendered statically because it used ${c}. See more info here: https://nextjs.org/docs/messages/dynamic-server-error`),"__NEXT_ERROR_CODE",{value:"E550",enumerable:!1,configurable:!0});throw a.dynamicUsageDescription=c,a.dynamicUsageStack=d.stack,d}}}function x(a,b,c){let d=Object.defineProperty(new i.DynamicServerError(`Route ${b.route} couldn't be rendered statically because it used \`${a}\`. See more info here: https://nextjs.org/docs/messages/dynamic-server-error`),"__NEXT_ERROR_CODE",{value:"E558",enumerable:!1,configurable:!0});throw c.revalidate=0,b.dynamicUsageDescription=a,b.dynamicUsageStack=d.stack,d}function y(a){switch(a.type){case"cache":case"unstable-cache":case"private-cache":return}}function z(a,b,c){let d=J(`Route ${a} needs to bail out of prerendering at this point because it used ${b}.`);c.controller.abort(d);let e=c.dynamicTracking;e&&e.dynamicAccesses.push({stack:e.isDebugDynamicAccesses?Error().stack:void 0,expression:b})}function A(a,b,c,d){let e=d.dynamicTracking;z(a,b,d),e&&null===e.syncDynamicErrorWithStack&&(e.syncDynamicErrorWithStack=c)}function B(a){a.stagedRendering&&a.stagedRendering.advanceStage(r.RenderStage.Dynamic)}function C(a,b,c,d){if(!1===d.controller.signal.aborted){z(a,b,d);let e=d.dynamicTracking;e&&null===e.syncDynamicErrorWithStack&&(e.syncDynamicErrorWithStack=c)}throw J(`Route ${a} needs to bail out of prerendering at this point because it used ${b}.`)}function D({reason:a,route:b}){let c=k.workUnitAsyncStorage.getStore();E(b,a,c&&"prerender-ppr"===c.type?c.dynamicTracking:null)}function E(a,b,c){(function(){if(!s)throw Object.defineProperty(Error("Invariant: React.unstable_postpone is not defined. This suggests the wrong version of React was loaded. This is a bug in Next.js"),"__NEXT_ERROR_CODE",{value:"E224",enumerable:!1,configurable:!0})})(),c&&c.dynamicAccesses.push({stack:c.isDebugDynamicAccesses?Error().stack:void 0,expression:b}),h.default.unstable_postpone(F(a,b))}function F(a,b){return`Route ${a} needs to bail out of prerendering at this point because it used ${b}. React throws this special object to indicate where. It should not be caught by your own try/catch. Learn more: https://nextjs.org/docs/messages/ppr-caught-error`}function G(a){return"object"==typeof a&&null!==a&&"string"==typeof a.message&&H(a.message)}function H(a){return a.includes("needs to bail out of prerendering at this point because it used")&&a.includes("Learn more: https://nextjs.org/docs/messages/ppr-caught-error")}if(!1===H(F("%%%","^^^")))throw Object.defineProperty(Error("Invariant: isDynamicPostpone misidentified a postpone reason. This is a bug in Next.js"),"__NEXT_ERROR_CODE",{value:"E296",enumerable:!1,configurable:!0});let I="NEXT_PRERENDER_INTERRUPTED";function J(a){let b=Object.defineProperty(Error(a),"__NEXT_ERROR_CODE",{value:"E394",enumerable:!1,configurable:!0});return b.digest=I,b}function K(a){return"object"==typeof a&&null!==a&&a.digest===I&&"name"in a&&"message"in a&&a instanceof Error}function L(a){return a.length>0}function M(a,b){return a.dynamicAccesses.push(...b.dynamicAccesses),a.dynamicAccesses}function N(a){return a.filter(a=>"string"==typeof a.stack&&a.stack.length>0).map(({expression:a,stack:b})=>(b=b.split("\n").slice(4).filter(a=>!(a.includes("node_modules/next/")||a.includes(" (<anonymous>)")||a.includes(" (node:"))).join("\n"),`Dynamic API Usage Debug - ${a}:
${b}`))}function O(){let a=new AbortController;return a.abort(Object.defineProperty(new p.BailoutToCSRError("Render in Browser"),"__NEXT_ERROR_CODE",{value:"E721",enumerable:!1,configurable:!0})),a.signal}function P(a){switch(a.type){case"prerender":case"prerender-runtime":let b=new AbortController;if(a.cacheSignal)a.cacheSignal.inputReady().then(()=>{b.abort()});else{let c=(0,k.getRuntimeStagePromise)(a);c?c.then(()=>(0,o.scheduleOnNextTick)(()=>b.abort())):(0,o.scheduleOnNextTick)(()=>b.abort())}return b.signal;case"prerender-client":case"prerender-ppr":case"prerender-legacy":case"request":case"cache":case"private-cache":case"unstable-cache":return}}function Q(a,b){let c=b.dynamicTracking;c&&c.dynamicAccesses.push({stack:c.isDebugDynamicAccesses?Error().stack:void 0,expression:a})}function R(a){let b=l.workAsyncStorage.getStore(),c=k.workUnitAsyncStorage.getStore();if(b&&c)switch(c.type){case"prerender-client":case"prerender":{let d=c.fallbackRouteParams;d&&d.size>0&&h.default.use((0,m.makeHangingPromise)(c.renderSignal,b.route,a));break}case"prerender-ppr":{let d=c.fallbackRouteParams;if(d&&d.size>0)return E(b.route,a,c.dynamicTracking);break}case"prerender-runtime":throw Object.defineProperty(new q.InvariantError(`\`${a}\` was called during a runtime prerender. Next.js should be preventing ${a} from being included in server components statically, but did not in this case.`),"__NEXT_ERROR_CODE",{value:"E771",enumerable:!1,configurable:!0});case"cache":case"private-cache":throw Object.defineProperty(new q.InvariantError(`\`${a}\` was called inside a cache scope. Next.js should be preventing ${a} from being included in server components statically, but did not in this case.`),"__NEXT_ERROR_CODE",{value:"E745",enumerable:!1,configurable:!0})}}function S(a){let b=l.workAsyncStorage.getStore(),c=k.workUnitAsyncStorage.getStore();if(b)switch(!c&&(0,k.throwForMissingRequestStore)(a),c.type){case"prerender-client":h.default.use((0,m.makeHangingPromise)(c.renderSignal,b.route,a));break;case"prerender-legacy":case"prerender-ppr":if(b.forceStatic)return;throw Object.defineProperty(new p.BailoutToCSRError(a),"__NEXT_ERROR_CODE",{value:"E394",enumerable:!1,configurable:!0});case"prerender":case"prerender-runtime":throw Object.defineProperty(new q.InvariantError(`\`${a}\` was called from a Server Component. Next.js should be preventing ${a} from being included in server components statically, but did not in this case.`),"__NEXT_ERROR_CODE",{value:"E795",enumerable:!1,configurable:!0});case"cache":case"unstable-cache":case"private-cache":throw Object.defineProperty(new q.InvariantError(`\`${a}\` was called inside a cache scope. Next.js should be preventing ${a} from being included in server components statically, but did not in this case.`),"__NEXT_ERROR_CODE",{value:"E745",enumerable:!1,configurable:!0});case"request":return}}let T=/\n\s+at Suspense \(<anonymous>\)/,U=RegExp(`\\n\\s+at Suspense \\(<anonymous>\\)(?:(?!\\n\\s+at (?:body|div|main|section|article|aside|header|footer|nav|form|p|span|h1|h2|h3|h4|h5|h6) \\(<anonymous>\\))[\\s\\S])*?\\n\\s+at ${n.ROOT_LAYOUT_BOUNDARY_NAME} \\([^\\n]*\\)`),V=RegExp(`\\n\\s+at ${n.METADATA_BOUNDARY_NAME}[\\n\\s]`),W=RegExp(`\\n\\s+at ${n.VIEWPORT_BOUNDARY_NAME}[\\n\\s]`),X=RegExp(`\\n\\s+at ${n.OUTLET_BOUNDARY_NAME}[\\n\\s]`);function Y(a,b,c,d){if(!X.test(b)){if(V.test(b)){c.hasDynamicMetadata=!0;return}if(W.test(b)){c.hasDynamicViewport=!0;return}if(U.test(b)){c.hasAllowedDynamic=!0,c.hasSuspenseAboveBody=!0;return}else if(T.test(b)){c.hasAllowedDynamic=!0;return}else{var e,f;let g;if(d.syncDynamicErrorWithStack)return void c.dynamicErrors.push(d.syncDynamicErrorWithStack);let h=(e=`Route "${a.route}": Uncached data was accessed outside of <Suspense>. This delays the entire page from rendering, resulting in a slow user experience. Learn more: https://nextjs.org/docs/messages/blocking-route`,f=b,(g=Object.defineProperty(Error(e),"__NEXT_ERROR_CODE",{value:"E394",enumerable:!1,configurable:!0})).stack=g.name+": "+e+f,g);return void c.dynamicErrors.push(h)}}}var Z=((e={})[e.Full=0]="Full",e[e.Empty=1]="Empty",e[e.Errored=2]="Errored",e);function $(a,b){console.error(b),a.dev||(a.hasReadableErrorStacks?console.error(`To get a more detailed stack trace and pinpoint the issue, start the app in development mode by running \`next dev\`, then open "${a.route}" in your browser to investigate the error.`):console.error(`To get a more detailed stack trace and pinpoint the issue, try one of the following:
  - Start the app in development mode by running \`next dev\`, then open "${a.route}" in your browser to investigate the error.
  - Rerun the production build with \`next build --debug-prerender\` to generate better stack traces.`))}function _(a,b,c,d){if(d.syncDynamicErrorWithStack)throw $(a,d.syncDynamicErrorWithStack),new j.StaticGenBailoutError;if(0!==b){if(c.hasSuspenseAboveBody)return;let d=c.dynamicErrors;if(d.length>0){for(let b=0;b<d.length;b++)$(a,d[b]);throw new j.StaticGenBailoutError}if(c.hasDynamicViewport)throw console.error(`Route "${a.route}" has a \`generateViewport\` that depends on Request data (\`cookies()\`, etc...) or uncached external data (\`fetch(...)\`, etc...) without explicitly allowing fully dynamic rendering. See more info here: https://nextjs.org/docs/messages/next-prerender-dynamic-viewport`),new j.StaticGenBailoutError;if(1===b)throw console.error(`Route "${a.route}" did not produce a static shell and Next.js was unable to determine a reason. This is a bug in Next.js.`),new j.StaticGenBailoutError}else if(!1===c.hasAllowedDynamic&&c.hasDynamicMetadata)throw console.error(`Route "${a.route}" has a \`generateMetadata\` that depends on Request data (\`cookies()\`, etc...) or uncached external data (\`fetch(...)\`, etc...) when the rest of the route does not. See more info here: https://nextjs.org/docs/messages/next-prerender-dynamic-metadata`),new j.StaticGenBailoutError}function aa(a,b){return a.runtimeStagePromise?a.runtimeStagePromise.then(()=>b):b}},63681,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0});var d={RequestCookies:function(){return f.RequestCookies},ResponseCookies:function(){return f.ResponseCookies},stringifyCookie:function(){return f.stringifyCookie}};for(var e in d)Object.defineProperty(c,e,{enumerable:!0,get:d[e]});let f=a.r(36226)},51409,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"ReflectAdapter",{enumerable:!0,get:function(){return d}});class d{static get(a,b,c){let d=Reflect.get(a,b,c);return"function"==typeof d?d.bind(a):d}static set(a,b,c,d){return Reflect.set(a,b,c,d)}static has(a,b){return Reflect.has(a,b)}static deleteProperty(a,b){return Reflect.deleteProperty(a,b)}}},14896,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0});var d={MutableRequestCookiesAdapter:function(){return n},ReadonlyRequestCookiesError:function(){return i},RequestCookiesAdapter:function(){return j},appendMutableCookies:function(){return m},areCookiesMutableInCurrentPhase:function(){return p},createCookiesWithMutableAccessCheck:function(){return o},getModifiedCookieValues:function(){return l},responseCookiesToRequestCookies:function(){return r}};for(var e in d)Object.defineProperty(c,e,{enumerable:!0,get:d[e]});let f=a.r(63681),g=a.r(51409),h=a.r(56704);class i extends Error{constructor(){super("Cookies can only be modified in a Server Action or Route Handler. Read more: https://nextjs.org/docs/app/api-reference/functions/cookies#options")}static callable(){throw new i}}class j{static seal(a){return new Proxy(a,{get(a,b,c){switch(b){case"clear":case"delete":case"set":return i.callable;default:return g.ReflectAdapter.get(a,b,c)}}})}}let k=Symbol.for("next.mutated.cookies");function l(a){let b=a[k];return b&&Array.isArray(b)&&0!==b.length?b:[]}function m(a,b){let c=l(b);if(0===c.length)return!1;let d=new f.ResponseCookies(a),e=d.getAll();for(let a of c)d.set(a);for(let a of e)d.set(a);return!0}class n{static wrap(a,b){let c=new f.ResponseCookies(new Headers);for(let b of a.getAll())c.set(b);let d=[],e=new Set,i=()=>{let a=h.workAsyncStorage.getStore();if(a&&(a.pathWasRevalidated=!0),d=c.getAll().filter(a=>e.has(a.name)),b){let a=[];for(let b of d){let c=new f.ResponseCookies(new Headers);c.set(b),a.push(c.toString())}b(a)}},j=new Proxy(c,{get(a,b,c){switch(b){case k:return d;case"delete":return function(...b){e.add("string"==typeof b[0]?b[0]:b[0].name);try{return a.delete(...b),j}finally{i()}};case"set":return function(...b){e.add("string"==typeof b[0]?b[0]:b[0].name);try{return a.set(...b),j}finally{i()}};default:return g.ReflectAdapter.get(a,b,c)}}});return j}}function o(a){let b=new Proxy(a.mutableCookies,{get(c,d,e){switch(d){case"delete":return function(...d){return q(a,"cookies().delete"),c.delete(...d),b};case"set":return function(...d){return q(a,"cookies().set"),c.set(...d),b};default:return g.ReflectAdapter.get(c,d,e)}}});return b}function p(a){return"action"===a.phase}function q(a,b){if(!p(a))throw new i}function r(a){let b=new f.RequestCookies(new Headers);for(let c of a.getAll())b.set(c);return b}},8018,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"createDedupedByCallsiteServerErrorLoggerDev",{enumerable:!0,get:function(){return i}});let d=function(a,b){if(a&&a.__esModule)return a;if(null===a||"object"!=typeof a&&"function"!=typeof a)return{default:a};var c=e(void 0);if(c&&c.has(a))return c.get(a);var d={__proto__:null},f=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var g in a)if("default"!==g&&Object.prototype.hasOwnProperty.call(a,g)){var h=f?Object.getOwnPropertyDescriptor(a,g):null;h&&(h.get||h.set)?Object.defineProperty(d,g,h):d[g]=a[g]}return d.default=a,c&&c.set(a,d),d}(a.r(717));function e(a){if("function"!=typeof WeakMap)return null;var b=new WeakMap,c=new WeakMap;return(e=function(a){return a?c:b})(a)}let f={current:null},g="function"==typeof d.cache?d.cache:a=>a,h=console.warn;function i(a){return function(...b){h(a(...b))}}g(a=>{try{h(f.current)}finally{f.current=null}})},86309,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0});var d={isRequestAPICallableInsideAfter:function(){return j},throwForSearchParamsAccessInUseCache:function(){return i},throwWithStaticGenerationBailoutErrorWithDynamicError:function(){return h}};for(var e in d)Object.defineProperty(c,e,{enumerable:!0,get:d[e]});let f=a.r(60312),g=a.r(24725);function h(a,b){throw Object.defineProperty(new f.StaticGenBailoutError(`Route ${a} with \`dynamic = "error"\` couldn't be rendered statically because it used ${b}. See more info here: https://nextjs.org/docs/app/building-your-application/rendering/static-and-dynamic#dynamic-rendering`),"__NEXT_ERROR_CODE",{value:"E543",enumerable:!1,configurable:!0})}function i(a,b){let c=Object.defineProperty(Error(`Route ${a.route} used \`searchParams\` inside "use cache". Accessing dynamic request data inside a cache scope is not supported. If you need some search params inside a cached function await \`searchParams\` outside of the cached function and pass only the required search params as arguments to the cached function. See more info here: https://nextjs.org/docs/messages/next-request-in-use-cache`),"__NEXT_ERROR_CODE",{value:"E842",enumerable:!1,configurable:!0});throw Error.captureStackTrace(c,b),a.invalidDynamicUsageError??=c,c}function j(){let a=g.afterTaskAsyncStorage.getStore();return(null==a?void 0:a.rootTaskSpawnPhase)==="action"}},81740,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"cookies",{enumerable:!0,get:function(){return n}});let d=a.r(14896),e=a.r(63681),f=a.r(56704),g=a.r(32319),h=a.r(60384),i=a.r(60312),j=a.r(13091),k=a.r(8018),l=a.r(86309),m=a.r(50640);function n(){let a="cookies",b=f.workAsyncStorage.getStore(),c=g.workUnitAsyncStorage.getStore();if(b){if(c&&"after"===c.phase&&!(0,l.isRequestAPICallableInsideAfter)())throw Object.defineProperty(Error(`Route ${b.route} used \`cookies()\` inside \`after()\`. This is not supported. If you need this data inside an \`after()\` callback, use \`cookies()\` outside of the callback. See more info here: https://nextjs.org/docs/canary/app/api-reference/functions/after`),"__NEXT_ERROR_CODE",{value:"E843",enumerable:!1,configurable:!0});if(b.forceStatic)return p(d.RequestCookiesAdapter.seal(new e.RequestCookies(new Headers({}))));if(b.dynamicShouldError)throw Object.defineProperty(new i.StaticGenBailoutError(`Route ${b.route} with \`dynamic = "error"\` couldn't be rendered statically because it used \`cookies()\`. See more info here: https://nextjs.org/docs/app/building-your-application/rendering/static-and-dynamic#dynamic-rendering`),"__NEXT_ERROR_CODE",{value:"E849",enumerable:!1,configurable:!0});if(c)switch(c.type){case"cache":let f=Object.defineProperty(Error(`Route ${b.route} used \`cookies()\` inside "use cache". Accessing Dynamic data sources inside a cache scope is not supported. If you need this data inside a cached function use \`cookies()\` outside of the cached function and pass the required dynamic data in as an argument. See more info here: https://nextjs.org/docs/messages/next-request-in-use-cache`),"__NEXT_ERROR_CODE",{value:"E831",enumerable:!1,configurable:!0});throw Error.captureStackTrace(f,n),b.invalidDynamicUsageError??=f,f;case"unstable-cache":throw Object.defineProperty(Error(`Route ${b.route} used \`cookies()\` inside a function cached with \`unstable_cache()\`. Accessing Dynamic data sources inside a cache scope is not supported. If you need this data inside a cached function use \`cookies()\` outside of the cached function and pass the required dynamic data in as an argument. See more info here: https://nextjs.org/docs/app/api-reference/functions/unstable_cache`),"__NEXT_ERROR_CODE",{value:"E846",enumerable:!1,configurable:!0});case"prerender":var k=b,q=c;let g=o.get(q);if(g)return g;let r=(0,j.makeHangingPromise)(q.renderSignal,k.route,"`cookies()`");return o.set(q,r),r;case"prerender-client":let s="`cookies`";throw Object.defineProperty(new m.InvariantError(`${s} must not be used within a Client Component. Next.js should be preventing ${s} from being included in Client Components statically, but did not in this case.`),"__NEXT_ERROR_CODE",{value:"E832",enumerable:!1,configurable:!0});case"prerender-ppr":return(0,h.postponeWithTracking)(b.route,a,c.dynamicTracking);case"prerender-legacy":return(0,h.throwToInterruptStaticGeneration)(a,b,c);case"prerender-runtime":return(0,h.delayUntilRuntimeStage)(c,p(c.cookies));case"private-cache":return p(c.cookies);case"request":return(0,h.trackDynamicDataInDynamicRender)(c),p((0,d.areCookiesMutableInCurrentPhase)(c)?c.userspaceMutableCookies:c.cookies)}}(0,g.throwForMissingRequestStore)(a)}a.r(31382);let o=new WeakMap;function p(a){let b=o.get(a);if(b)return b;let c=Promise.resolve(a);return o.set(a,c),c}(0,k.createDedupedByCallsiteServerErrorLoggerDev)(function(a,b){let c=a?`Route "${a}" `:"This route ";return Object.defineProperty(Error(`${c}used ${b}. \`cookies()\` returns a Promise and must be unwrapped with \`await\` or \`React.use()\` before accessing its properties. Learn more: https://nextjs.org/docs/messages/sync-dynamic-apis`),"__NEXT_ERROR_CODE",{value:"E830",enumerable:!1,configurable:!0})})},29927,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0});var d={HeadersAdapter:function(){return h},ReadonlyHeadersError:function(){return g}};for(var e in d)Object.defineProperty(c,e,{enumerable:!0,get:d[e]});let f=a.r(51409);class g extends Error{constructor(){super("Headers cannot be modified. Read more: https://nextjs.org/docs/app/api-reference/functions/headers")}static callable(){throw new g}}class h extends Headers{constructor(a){super(),this.headers=new Proxy(a,{get(b,c,d){if("symbol"==typeof c)return f.ReflectAdapter.get(b,c,d);let e=c.toLowerCase(),g=Object.keys(a).find(a=>a.toLowerCase()===e);if(void 0!==g)return f.ReflectAdapter.get(b,g,d)},set(b,c,d,e){if("symbol"==typeof c)return f.ReflectAdapter.set(b,c,d,e);let g=c.toLowerCase(),h=Object.keys(a).find(a=>a.toLowerCase()===g);return f.ReflectAdapter.set(b,h??c,d,e)},has(b,c){if("symbol"==typeof c)return f.ReflectAdapter.has(b,c);let d=c.toLowerCase(),e=Object.keys(a).find(a=>a.toLowerCase()===d);return void 0!==e&&f.ReflectAdapter.has(b,e)},deleteProperty(b,c){if("symbol"==typeof c)return f.ReflectAdapter.deleteProperty(b,c);let d=c.toLowerCase(),e=Object.keys(a).find(a=>a.toLowerCase()===d);return void 0===e||f.ReflectAdapter.deleteProperty(b,e)}})}static seal(a){return new Proxy(a,{get(a,b,c){switch(b){case"append":case"delete":case"set":return g.callable;default:return f.ReflectAdapter.get(a,b,c)}}})}merge(a){return Array.isArray(a)?a.join(", "):a}static from(a){return a instanceof Headers?a:new h(a)}append(a,b){let c=this.headers[a];"string"==typeof c?this.headers[a]=[c,b]:Array.isArray(c)?c.push(b):this.headers[a]=b}delete(a){delete this.headers[a]}get(a){let b=this.headers[a];return void 0!==b?this.merge(b):null}has(a){return void 0!==this.headers[a]}set(a,b){this.headers[a]=b}forEach(a,b){for(let[c,d]of this.entries())a.call(b,d,c,this)}*entries(){for(let a of Object.keys(this.headers)){let b=a.toLowerCase(),c=this.get(b);yield[b,c]}}*keys(){for(let a of Object.keys(this.headers)){let b=a.toLowerCase();yield b}}*values(){for(let a of Object.keys(this.headers)){let b=this.get(a);yield b}}[Symbol.iterator](){return this.entries()}}},35754,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"headers",{enumerable:!0,get:function(){return m}});let d=a.r(29927),e=a.r(56704),f=a.r(32319),g=a.r(60384),h=a.r(60312),i=a.r(13091),j=a.r(8018),k=a.r(86309),l=a.r(50640);function m(){let a="headers",b=e.workAsyncStorage.getStore(),c=f.workUnitAsyncStorage.getStore();if(b){if(c&&"after"===c.phase&&!(0,k.isRequestAPICallableInsideAfter)())throw Object.defineProperty(Error(`Route ${b.route} used \`headers()\` inside \`after()\`. This is not supported. If you need this data inside an \`after()\` callback, use \`headers()\` outside of the callback. See more info here: https://nextjs.org/docs/canary/app/api-reference/functions/after`),"__NEXT_ERROR_CODE",{value:"E839",enumerable:!1,configurable:!0});if(b.forceStatic)return o(d.HeadersAdapter.seal(new Headers({})));if(c)switch(c.type){case"cache":{let a=Object.defineProperty(Error(`Route ${b.route} used \`headers()\` inside "use cache". Accessing Dynamic data sources inside a cache scope is not supported. If you need this data inside a cached function use \`headers()\` outside of the cached function and pass the required dynamic data in as an argument. See more info here: https://nextjs.org/docs/messages/next-request-in-use-cache`),"__NEXT_ERROR_CODE",{value:"E833",enumerable:!1,configurable:!0});throw Error.captureStackTrace(a,m),b.invalidDynamicUsageError??=a,a}case"unstable-cache":throw Object.defineProperty(Error(`Route ${b.route} used \`headers()\` inside a function cached with \`unstable_cache()\`. Accessing Dynamic data sources inside a cache scope is not supported. If you need this data inside a cached function use \`headers()\` outside of the cached function and pass the required dynamic data in as an argument. See more info here: https://nextjs.org/docs/app/api-reference/functions/unstable_cache`),"__NEXT_ERROR_CODE",{value:"E838",enumerable:!1,configurable:!0})}if(b.dynamicShouldError)throw Object.defineProperty(new h.StaticGenBailoutError(`Route ${b.route} with \`dynamic = "error"\` couldn't be rendered statically because it used \`headers()\`. See more info here: https://nextjs.org/docs/app/building-your-application/rendering/static-and-dynamic#dynamic-rendering`),"__NEXT_ERROR_CODE",{value:"E828",enumerable:!1,configurable:!0});if(c)switch(c.type){case"prerender":var j=b,p=c;let e=n.get(p);if(e)return e;let f=(0,i.makeHangingPromise)(p.renderSignal,j.route,"`headers()`");return n.set(p,f),f;case"prerender-client":let q="`headers`";throw Object.defineProperty(new l.InvariantError(`${q} must not be used within a client component. Next.js should be preventing ${q} from being included in client components statically, but did not in this case.`),"__NEXT_ERROR_CODE",{value:"E693",enumerable:!1,configurable:!0});case"prerender-ppr":return(0,g.postponeWithTracking)(b.route,a,c.dynamicTracking);case"prerender-legacy":return(0,g.throwToInterruptStaticGeneration)(a,b,c);case"prerender-runtime":return(0,g.delayUntilRuntimeStage)(c,o(c.headers));case"private-cache":return o(c.headers);case"request":return(0,g.trackDynamicDataInDynamicRender)(c),o(c.headers)}}(0,f.throwForMissingRequestStore)(a)}a.r(31382);let n=new WeakMap;function o(a){let b=n.get(a);if(b)return b;let c=Promise.resolve(a);return n.set(a,c),c}(0,j.createDedupedByCallsiteServerErrorLoggerDev)(function(a,b){let c=a?`Route "${a}" `:"This route ";return Object.defineProperty(Error(`${c}used ${b}. \`headers()\` returns a Promise and must be unwrapped with \`await\` or \`React.use()\` before accessing its properties. Learn more: https://nextjs.org/docs/messages/sync-dynamic-apis`),"__NEXT_ERROR_CODE",{value:"E836",enumerable:!1,configurable:!0})})},51125,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"draftMode",{enumerable:!0,get:function(){return k}});let d=a.r(32319),e=a.r(56704),f=a.r(60384),g=a.r(8018),h=a.r(60312),i=a.r(96556),j=a.r(50640);function k(){let a=e.workAsyncStorage.getStore(),b=d.workUnitAsyncStorage.getStore();switch((!a||!b)&&(0,d.throwForMissingRequestStore)("draftMode"),b.type){case"prerender-runtime":return(0,f.delayUntilRuntimeStage)(b,l(b.draftMode,a));case"request":return l(b.draftMode,a);case"cache":case"private-cache":case"unstable-cache":let c=(0,d.getDraftModeProviderForCacheScope)(a,b);if(c)return l(c,a);case"prerender":case"prerender-client":case"prerender-ppr":case"prerender-legacy":return l(null,a);default:return b}}function l(a,b){let c=n.get(a??m);return c||Promise.resolve(new o(a))}a.r(51409);let m={},n=new WeakMap;class o{constructor(a){this._provider=a}get isEnabled(){return null!==this._provider&&this._provider.isEnabled}enable(){p("draftMode().enable()",this.enable),null!==this._provider&&this._provider.enable()}disable(){p("draftMode().disable()",this.disable),null!==this._provider&&this._provider.disable()}}function p(a,b){let c=e.workAsyncStorage.getStore(),g=d.workUnitAsyncStorage.getStore();if(c){if((null==g?void 0:g.phase)==="after")throw Object.defineProperty(Error(`Route ${c.route} used "${a}" inside \`after()\`. The enabled status of \`draftMode()\` can be read inside \`after()\` but you cannot enable or disable \`draftMode()\`. See more info here: https://nextjs.org/docs/app/api-reference/functions/after`),"__NEXT_ERROR_CODE",{value:"E845",enumerable:!1,configurable:!0});if(c.dynamicShouldError)throw Object.defineProperty(new h.StaticGenBailoutError(`Route ${c.route} with \`dynamic = "error"\` couldn't be rendered statically because it used \`${a}\`. See more info here: https://nextjs.org/docs/app/building-your-application/rendering/static-and-dynamic#dynamic-rendering`),"__NEXT_ERROR_CODE",{value:"E553",enumerable:!1,configurable:!0});if(g)switch(g.type){case"cache":case"private-cache":{let d=Object.defineProperty(Error(`Route ${c.route} used "${a}" inside "use cache". The enabled status of \`draftMode()\` can be read in caches but you must not enable or disable \`draftMode()\` inside a cache. See more info here: https://nextjs.org/docs/messages/next-request-in-use-cache`),"__NEXT_ERROR_CODE",{value:"E829",enumerable:!1,configurable:!0});throw Error.captureStackTrace(d,b),c.invalidDynamicUsageError??=d,d}case"unstable-cache":throw Object.defineProperty(Error(`Route ${c.route} used "${a}" inside a function cached with \`unstable_cache()\`. The enabled status of \`draftMode()\` can be read in caches but you must not enable or disable \`draftMode()\` inside a cache. See more info here: https://nextjs.org/docs/app/api-reference/functions/unstable_cache`),"__NEXT_ERROR_CODE",{value:"E844",enumerable:!1,configurable:!0});case"prerender":case"prerender-runtime":{let b=Object.defineProperty(Error(`Route ${c.route} used ${a} without first calling \`await connection()\`. See more info here: https://nextjs.org/docs/messages/next-prerender-sync-headers`),"__NEXT_ERROR_CODE",{value:"E126",enumerable:!1,configurable:!0});return(0,f.abortAndThrowOnSynchronousRequestDataAccess)(c.route,a,b,g)}case"prerender-client":let d="`draftMode`";throw Object.defineProperty(new j.InvariantError(`${d} must not be used within a Client Component. Next.js should be preventing ${d} from being included in Client Components statically, but did not in this case.`),"__NEXT_ERROR_CODE",{value:"E832",enumerable:!1,configurable:!0});case"prerender-ppr":return(0,f.postponeWithTracking)(c.route,a,g.dynamicTracking);case"prerender-legacy":g.revalidate=0;let e=Object.defineProperty(new i.DynamicServerError(`Route ${c.route} couldn't be rendered statically because it used \`${a}\`. See more info here: https://nextjs.org/docs/messages/dynamic-server-error`),"__NEXT_ERROR_CODE",{value:"E558",enumerable:!1,configurable:!0});throw c.dynamicUsageDescription=a,c.dynamicUsageStack=e.stack,e;case"request":(0,f.trackDynamicDataInDynamicRender)(g)}}}(0,g.createDedupedByCallsiteServerErrorLoggerDev)(function(a,b){let c=a?`Route "${a}" `:"This route ";return Object.defineProperty(Error(`${c}used ${b}. \`draftMode()\` returns a Promise and must be unwrapped with \`await\` or \`React.use()\` before accessing its properties. Learn more: https://nextjs.org/docs/messages/sync-dynamic-apis`),"__NEXT_ERROR_CODE",{value:"E835",enumerable:!1,configurable:!0})})},5246,(a,b,c)=>{b.exports.cookies=a.r(81740).cookies,b.exports.headers=a.r(35754).headers,b.exports.draftMode=a.r(51125).draftMode},97187,(a,b,c)=>{!function(c,d){if("function"==typeof define&&define.amd){let b;void 0!==(b=d())&&a.v(b)}else b&&b.exports?b.exports=d():(c.dcodeIO=c.dcodeIO||{}).bcrypt=d()}(a.e,function(){"use strict";var c,d={},e=null;function f(c){if(b&&b.exports)try{return a.r(54799).randomBytes(c)}catch(a){}try{var d;return(self.crypto||self.msCrypto).getRandomValues(d=new Uint32Array(c)),Array.prototype.slice.call(d)}catch(a){}if(!e)throw Error("Neither WebCryptoAPI nor a crypto module is available. Use bcrypt.setRandomFallback to set an alternative");return e(c)}try{f(1)}catch(a){}function g(a,b){for(var c=0,d=0,e=0,f=a.length;e<f;++e)a.charCodeAt(e)===b.charCodeAt(e)?++c:++d;return!(c<0)&&0===d}e=null,d.setRandomFallback=function(a){e=a},d.genSaltSync=function(a,b){if("number"!=typeof(a=a||p))throw Error("Illegal arguments: "+typeof a+", "+typeof b);a<4?a=4:a>31&&(a=31);var c=[];return c.push("$2a$"),a<10&&c.push("0"),c.push(a.toString()),c.push("$"),c.push(l(f(o),o)),c.join("")},d.genSalt=function(a,b,c){if("function"==typeof b&&(c=b,b=void 0),"function"==typeof a&&(c=a,a=void 0),void 0===a)a=p;else if("number"!=typeof a)throw Error("illegal arguments: "+typeof a);function e(b){h(function(){try{b(null,d.genSaltSync(a))}catch(a){b(a)}})}if(!c)return new Promise(function(a,b){e(function(c,d){c?b(c):a(d)})});if("function"!=typeof c)throw Error("Illegal callback: "+typeof c);e(c)},d.hashSync=function(a,b){if(void 0===b&&(b=p),"number"==typeof b&&(b=d.genSaltSync(b)),"string"!=typeof a||"string"!=typeof b)throw Error("Illegal arguments: "+typeof a+", "+typeof b);return x(a,b)},d.hash=function(a,b,c,e){function f(c){"string"==typeof a&&"number"==typeof b?d.genSalt(b,function(b,d){x(a,d,c,e)}):"string"==typeof a&&"string"==typeof b?x(a,b,c,e):h(c.bind(this,Error("Illegal arguments: "+typeof a+", "+typeof b)))}if(!c)return new Promise(function(a,b){f(function(c,d){c?b(c):a(d)})});if("function"!=typeof c)throw Error("Illegal callback: "+typeof c);f(c)},d.compareSync=function(a,b){if("string"!=typeof a||"string"!=typeof b)throw Error("Illegal arguments: "+typeof a+", "+typeof b);return 60===b.length&&g(d.hashSync(a,b.substr(0,b.length-31)),b)},d.compare=function(a,b,c,e){function f(c){"string"!=typeof a||"string"!=typeof b?h(c.bind(this,Error("Illegal arguments: "+typeof a+", "+typeof b))):60!==b.length?h(c.bind(this,null,!1)):d.hash(a,b.substr(0,29),function(a,d){a?c(a):c(null,g(d,b))},e)}if(!c)return new Promise(function(a,b){f(function(c,d){c?b(c):a(d)})});if("function"!=typeof c)throw Error("Illegal callback: "+typeof c);f(c)},d.getRounds=function(a){if("string"!=typeof a)throw Error("Illegal arguments: "+typeof a);return parseInt(a.split("$")[2],10)},d.getSalt=function(a){if("string"!=typeof a)throw Error("Illegal arguments: "+typeof a);if(60!==a.length)throw Error("Illegal hash length: "+a.length+" != 60");return a.substring(0,29)};var h="undefined"!=typeof process&&process&&"function"==typeof process.nextTick?"function"==typeof setImmediate?setImmediate:process.nextTick:setTimeout,i="./ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".split(""),j=[-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,1,54,55,56,57,58,59,60,61,62,63,-1,-1,-1,-1,-1,-1,-1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,-1,-1,-1,-1,-1,-1,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,-1,-1,-1,-1,-1],k=String.fromCharCode;function l(a,b){var c,d,e=0,f=[];if(b<=0||b>a.length)throw Error("Illegal len: "+b);for(;e<b;){if(c=255&a[e++],f.push(i[c>>2&63]),c=(3&c)<<4,e>=b||(c|=(d=255&a[e++])>>4&15,f.push(i[63&c]),c=(15&d)<<2,e>=b)){f.push(i[63&c]);break}c|=(d=255&a[e++])>>6&3,f.push(i[63&c]),f.push(i[63&d])}return f.join("")}function m(a,b){var c,d,e,f,g,h=0,i=a.length,l=0,m=[];if(b<=0)throw Error("Illegal len: "+b);for(;h<i-1&&l<b&&(c=(g=a.charCodeAt(h++))<j.length?j[g]:-1,d=(g=a.charCodeAt(h++))<j.length?j[g]:-1,-1!=c&&-1!=d)&&(f=c<<2>>>0|(48&d)>>4,m.push(k(f)),!(++l>=b||h>=i||-1==(e=(g=a.charCodeAt(h++))<j.length?j[g]:-1)||(f=(15&d)<<4>>>0|(60&e)>>2,m.push(k(f)),++l>=b||h>=i)));){;f=(3&e)<<6>>>0|((g=a.charCodeAt(h++))<j.length?j[g]:-1),m.push(k(f)),++l}var n=[];for(h=0;h<l;h++)n.push(m[h].charCodeAt(0));return n}var n=((c={}).MAX_CODEPOINT=1114111,c.encodeUTF8=function(a,b){var c=null;for("number"==typeof a&&(c=a,a=function(){return null});null!==c||null!==(c=a());)c<128?b(127&c):(c<2048?b(c>>6&31|192):(c<65536?b(c>>12&15|224):(b(c>>18&7|240),b(c>>12&63|128)),b(c>>6&63|128)),b(63&c|128)),c=null},c.decodeUTF8=function(a,b){for(var c,d,e,f,g=function(a){var b=Error((a=a.slice(0,a.indexOf(null))).toString());throw b.name="TruncatedError",b.bytes=a,b};null!==(c=a());)if((128&c)==0)b(c);else if((224&c)==192)null===(d=a())&&g([c,d]),b((31&c)<<6|63&d);else if((240&c)==224)(null===(d=a())||null===(e=a()))&&g([c,d,e]),b((15&c)<<12|(63&d)<<6|63&e);else if((248&c)==240)(null===(d=a())||null===(e=a())||null===(f=a()))&&g([c,d,e,f]),b((7&c)<<18|(63&d)<<12|(63&e)<<6|63&f);else throw RangeError("Illegal starting byte: "+c)},c.UTF16toUTF8=function(a,b){for(var c,d=null;null!==(c=null!==d?d:a());){if(c>=55296&&c<=57343&&null!==(d=a())&&d>=56320&&d<=57343){b((c-55296)*1024+d-56320+65536),d=null;continue}b(c)}null!==d&&b(d)},c.UTF8toUTF16=function(a,b){var c=null;for("number"==typeof a&&(c=a,a=function(){return null});null!==c||null!==(c=a());)c<=65535?b(c):(b(((c-=65536)>>10)+55296),b(c%1024+56320)),c=null},c.encodeUTF16toUTF8=function(a,b){c.UTF16toUTF8(a,function(a){c.encodeUTF8(a,b)})},c.decodeUTF8toUTF16=function(a,b){c.decodeUTF8(a,function(a){c.UTF8toUTF16(a,b)})},c.calculateCodePoint=function(a){return a<128?1:a<2048?2:a<65536?3:4},c.calculateUTF8=function(a){for(var b,d=0;null!==(b=a());)d+=c.calculateCodePoint(b);return d},c.calculateUTF16asUTF8=function(a){var b=0,d=0;return c.UTF16toUTF8(a,function(a){++b,d+=c.calculateCodePoint(a)}),[b,d]},c);Date.now=Date.now||function(){return+new Date};var o=16,p=10,q=[0x243f6a88,0x85a308d3,0x13198a2e,0x3707344,0xa4093822,0x299f31d0,0x82efa98,0xec4e6c89,0x452821e6,0x38d01377,0xbe5466cf,0x34e90c6c,0xc0ac29b7,0xc97c50dd,0x3f84d5b5,0xb5470917,0x9216d5d9,0x8979fb1b],r=[0xd1310ba6,0x98dfb5ac,0x2ffd72db,0xd01adfb7,0xb8e1afed,0x6a267e96,0xba7c9045,0xf12c7f99,0x24a19947,0xb3916cf7,0x801f2e2,0x858efc16,0x636920d8,0x71574e69,0xa458fea3,0xf4933d7e,0xd95748f,0x728eb658,0x718bcd58,0x82154aee,0x7b54a41d,0xc25a59b5,0x9c30d539,0x2af26013,0xc5d1b023,0x286085f0,0xca417918,0xb8db38ef,0x8e79dcb0,0x603a180e,0x6c9e0e8b,0xb01e8a3e,0xd71577c1,0xbd314b27,0x78af2fda,0x55605c60,0xe65525f3,0xaa55ab94,0x57489862,0x63e81440,0x55ca396a,0x2aab10b6,0xb4cc5c34,0x1141e8ce,0xa15486af,0x7c72e993,0xb3ee1411,0x636fbc2a,0x2ba9c55d,0x741831f6,0xce5c3e16,0x9b87931e,0xafd6ba33,0x6c24cf5c,0x7a325381,0x28958677,0x3b8f4898,0x6b4bb9af,0xc4bfe81b,0x66282193,0x61d809cc,0xfb21a991,0x487cac60,0x5dec8032,0xef845d5d,0xe98575b1,0xdc262302,0xeb651b88,0x23893e81,0xd396acc5,0xf6d6ff3,0x83f44239,0x2e0b4482,0xa4842004,0x69c8f04a,0x9e1f9b5e,0x21c66842,0xf6e96c9a,0x670c9c61,0xabd388f0,0x6a51a0d2,0xd8542f68,0x960fa728,0xab5133a3,0x6eef0b6c,0x137a3be4,0xba3bf050,0x7efb2a98,0xa1f1651d,0x39af0176,0x66ca593e,0x82430e88,0x8cee8619,0x456f9fb4,0x7d84a5c3,0x3b8b5ebe,0xe06f75d8,0x85c12073,0x401a449f,0x56c16aa6,0x4ed3aa62,0x363f7706,0x1bfedf72,0x429b023d,0x37d0d724,0xd00a1248,0xdb0fead3,0x49f1c09b,0x75372c9,0x80991b7b,0x25d479d8,0xf6e8def7,0xe3fe501a,0xb6794c3b,0x976ce0bd,0x4c006ba,0xc1a94fb6,0x409f60c4,0x5e5c9ec2,0x196a2463,0x68fb6faf,0x3e6c53b5,0x1339b2eb,0x3b52ec6f,0x6dfc511f,0x9b30952c,0xcc814544,0xaf5ebd09,0xbee3d004,0xde334afd,0x660f2807,0x192e4bb3,0xc0cba857,0x45c8740f,0xd20b5f39,0xb9d3fbdb,0x5579c0bd,0x1a60320a,0xd6a100c6,0x402c7279,0x679f25fe,0xfb1fa3cc,0x8ea5e9f8,0xdb3222f8,0x3c7516df,0xfd616b15,0x2f501ec8,0xad0552ab,0x323db5fa,0xfd238760,0x53317b48,0x3e00df82,0x9e5c57bb,0xca6f8ca0,0x1a87562e,0xdf1769db,0xd542a8f6,0x287effc3,0xac6732c6,0x8c4f5573,0x695b27b0,0xbbca58c8,0xe1ffa35d,0xb8f011a0,0x10fa3d98,0xfd2183b8,0x4afcb56c,0x2dd1d35b,0x9a53e479,0xb6f84565,0xd28e49bc,0x4bfb9790,0xe1ddf2da,0xa4cb7e33,0x62fb1341,0xcee4c6e8,0xef20cada,0x36774c01,0xd07e9efe,0x2bf11fb4,0x95dbda4d,0xae909198,0xeaad8e71,0x6b93d5a0,0xd08ed1d0,0xafc725e0,0x8e3c5b2f,0x8e7594b7,0x8ff6e2fb,0xf2122b64,0x8888b812,0x900df01c,0x4fad5ea0,0x688fc31c,0xd1cff191,0xb3a8c1ad,0x2f2f2218,0xbe0e1777,0xea752dfe,0x8b021fa1,0xe5a0cc0f,0xb56f74e8,0x18acf3d6,0xce89e299,0xb4a84fe0,0xfd13e0b7,0x7cc43b81,0xd2ada8d9,0x165fa266,0x80957705,0x93cc7314,0x211a1477,0xe6ad2065,0x77b5fa86,0xc75442f5,0xfb9d35cf,0xebcdaf0c,0x7b3e89a0,0xd6411bd3,0xae1e7e49,2428461,0x2071b35e,0x226800bb,0x57b8e0af,0x2464369b,0xf009b91e,0x5563911d,0x59dfa6aa,0x78c14389,0xd95a537f,0x207d5ba2,0x2e5b9c5,0x83260376,0x6295cfa9,0x11c81968,0x4e734a41,0xb3472dca,0x7b14a94a,0x1b510052,0x9a532915,0xd60f573f,0xbc9bc6e4,0x2b60a476,0x81e67400,0x8ba6fb5,0x571be91f,0xf296ec6b,0x2a0dd915,0xb6636521,0xe7b9f9b6,0xff34052e,0xc5855664,0x53b02d5d,0xa99f8fa1,0x8ba4799,0x6e85076a,0x4b7a70e9,0xb5b32944,0xdb75092e,0xc4192623,290971e4,0x49a7df7d,0x9cee60b8,0x8fedb266,0xecaa8c71,0x699a17ff,0x5664526c,0xc2b19ee1,0x193602a5,0x75094c29,0xa0591340,0xe4183a3e,0x3f54989a,0x5b429d65,0x6b8fe4d6,0x99f73fd6,0xa1d29c07,0xefe830f5,0x4d2d38e6,0xf0255dc1,0x4cdd2086,0x8470eb26,0x6382e9c6,0x21ecc5e,0x9686b3f,0x3ebaefc9,0x3c971814,0x6b6a70a1,0x687f3584,0x52a0e286,0xb79c5305,0xaa500737,0x3e07841c,0x7fdeae5c,0x8e7d44ec,0x5716f2b8,0xb03ada37,0xf0500c0d,0xf01c1f04,0x200b3ff,0xae0cf51a,0x3cb574b2,0x25837a58,0xdc0921bd,0xd19113f9,0x7ca92ff6,0x94324773,0x22f54701,0x3ae5e581,0x37c2dadc,0xc8b57634,0x9af3dda7,0xa9446146,0xfd0030e,0xecc8c73e,0xa4751e41,0xe238cd99,0x3bea0e2f,0x3280bba1,0x183eb331,0x4e548b38,0x4f6db908,0x6f420d03,0xf60a04bf,0x2cb81290,0x24977c79,0x5679b072,0xbcaf89af,0xde9a771f,0xd9930810,0xb38bae12,0xdccf3f2e,0x5512721f,0x2e6b7124,0x501adde6,0x9f84cd87,0x7a584718,0x7408da17,0xbc9f9abc,0xe94b7d8c,0xec7aec3a,0xdb851dfa,0x63094366,0xc464c3d2,0xef1c1847,0x3215d908,0xdd433b37,0x24c2ba16,0x12a14d43,0x2a65c451,0x50940002,0x133ae4dd,0x71dff89e,0x10314e55,0x81ac77d6,0x5f11199b,0x43556f1,0xd7a3c76b,0x3c11183b,0x5924a509,0xf28fe6ed,0x97f1fbfa,0x9ebabf2c,0x1e153c6e,0x86e34570,0xeae96fb1,0x860e5e0a,0x5a3e2ab3,0x771fe71c,0x4e3d06fa,0x2965dcb9,0x99e71d0f,0x803e89d6,0x5266c825,0x2e4cc978,0x9c10b36a,0xc6150eba,0x94e2ea78,0xa5fc3c53,0x1e0a2df4,0xf2f74ea7,0x361d2b3d,0x1939260f,0x19c27960,0x5223a708,0xf71312b6,0xebadfe6e,0xeac31f66,0xe3bc4595,0xa67bc883,0xb17f37d1,0x18cff28,0xc332ddef,0xbe6c5aa5,0x65582185,0x68ab9802,0xeecea50f,0xdb2f953b,0x2aef7dad,0x5b6e2f84,0x1521b628,0x29076170,0xecdd4775,0x619f1510,0x13cca830,0xeb61bd96,0x334fe1e,0xaa0363cf,0xb5735c90,0x4c70a239,0xd59e9e0b,0xcbaade14,0xeecc86bc,0x60622ca7,0x9cab5cab,0xb2f3846e,0x648b1eaf,0x19bdf0ca,0xa02369b9,0x655abb50,0x40685a32,0x3c2ab4b3,0x319ee9d5,0xc021b8f7,0x9b540b19,0x875fa099,0x95f7997e,0x623d7da8,0xf837889a,0x97e32d77,0x11ed935f,0x16681281,0xe358829,0xc7e61fd6,0x96dedfa1,0x7858ba99,0x57f584a5,0x1b227263,0x9b83c3ff,0x1ac24696,0xcdb30aeb,0x532e3054,0x8fd948e4,0x6dbc3128,0x58ebf2ef,0x34c6ffea,0xfe28ed61,0xee7c3c73,0x5d4a14d9,0xe864b7e3,0x42105d14,0x203e13e0,0x45eee2b6,0xa3aaabea,0xdb6c4f15,0xfacb4fd0,0xc742f442,0xef6abbb5,0x654f3b1d,0x41cd2105,0xd81e799e,0x86854dc7,0xe44b476a,0x3d816250,0xcf62a1f2,0x5b8d2646,0xfc8883a0,0xc1c7b6a3,0x7f1524c3,0x69cb7492,0x47848a0b,0x5692b285,0x95bbf00,0xad19489d,0x1462b174,0x23820e00,0x58428d2a,0xc55f5ea,0x1dadf43e,0x233f7061,0x3372f092,0x8d937e41,0xd65fecf1,0x6c223bdb,0x7cde3759,0xcbee7460,0x4085f2a7,0xce77326e,0xa6078084,0x19f8509e,0xe8efd855,0x61d99735,0xa969a7aa,0xc50c06c2,0x5a04abfc,0x800bcadc,0x9e447a2e,0xc3453484,0xfdd56705,0xe1e9ec9,0xdb73dbd3,0x105588cd,0x675fda79,0xe3674340,0xc5c43465,0x713e38d8,0x3d28f89e,0xf16dff20,0x153e21e7,0x8fb03d4a,0xe6e39f2b,0xdb83adf7,0xe93d5a68,0x948140f7,0xf64c261c,0x94692934,0x411520f7,0x7602d4f7,0xbcf46b2e,0xd4a20068,0xd4082471,0x3320f46a,0x43b7d4b7,0x500061af,0x1e39f62e,0x97244546,0x14214f74,0xbf8b8840,0x4d95fc1d,0x96b591af,0x70f4ddd3,0x66a02f45,0xbfbc09ec,0x3bd9785,0x7fac6dd0,0x31cb8504,0x96eb27b3,0x55fd3941,0xda2547e6,0xabca0a9a,0x28507825,0x530429f4,0xa2c86da,0xe9b66dfb,0x68dc1462,0xd7486900,0x680ec0a4,0x27a18dee,0x4f3ffea2,0xe887ad8c,0xb58ce006,0x7af4d6b6,0xaace1e7c,0xd3375fec,0xce78a399,0x406b2a42,0x20fe9e35,0xd9f385b9,0xee39d7ab,0x3b124e8b,0x1dc9faf7,0x4b6d1856,0x26a36631,0xeae397b2,0x3a6efa74,0xdd5b4332,0x6841e7f7,0xca7820fb,0xfb0af54e,0xd8feb397,0x454056ac,0xba489527,0x55533a3a,0x20838d87,0xfe6ba9b7,0xd096954b,0x55a867bc,0xa1159a58,0xcca92963,0x99e1db33,0xa62a4a56,0x3f3125f9,0x5ef47e1c,0x9029317c,0xfdf8e802,0x4272f70,0x80bb155c,0x5282ce3,0x95c11548,0xe4c66d22,0x48c1133f,0xc70f86dc,0x7f9c9ee,0x41041f0f,0x404779a4,0x5d886e17,0x325f51eb,0xd59bc0d1,0xf2bcc18f,0x41113564,0x257b7834,0x602a9c60,0xdff8e8a3,0x1f636c1b,0xe12b4c2,0x2e1329e,0xaf664fd1,0xcad18115,0x6b2395e0,0x333e92e1,0x3b240b62,0xeebeb922,0x85b2a20e,0xe6ba0d99,0xde720c8c,0x2da2f728,0xd0127845,0x95b794fd,0x647d0862,0xe7ccf5f0,0x5449a36f,0x877d48fa,0xc39dfd27,0xf33e8d1e,0xa476341,0x992eff74,0x3a6f6eab,0xf4f8fd37,0xa812dc60,0xa1ebddf8,0x991be14c,0xdb6e6b0d,0xc67b5510,0x6d672c37,0x2765d43b,0xdcd0e804,0xf1290dc7,0xcc00ffa3,0xb5390f92,0x690fed0b,0x667b9ffb,0xcedb7d9c,0xa091cf0b,0xd9155ea3,0xbb132f88,0x515bad24,0x7b9479bf,0x763bd6eb,0x37392eb3,0xcc115979,0x8026e297,0xf42e312d,0x6842ada7,0xc66a2b3b,0x12754ccc,0x782ef11c,0x6a124237,0xb79251e7,0x6a1bbe6,0x4bfb6350,0x1a6b1018,0x11caedfa,0x3d25bdd8,0xe2e1c3c9,0x44421659,0xa121386,0xd90cec6e,0xd5abea2a,0x64af674e,0xda86a85f,0xbebfe988,0x64e4c3fe,0x9dbc8057,0xf0f7c086,0x60787bf8,0x6003604d,0xd1fd8346,0xf6381fb0,0x7745ae04,0xd736fccc,0x83426b33,0xf01eab71,0xb0804187,0x3c005e5f,0x77a057be,0xbde8ae24,0x55464299,0xbf582e61,0x4e58f48f,0xf2ddfda2,0xf474ef38,0x8789bdc2,0x5366f9c3,0xc8b38e74,0xb475f255,0x46fcd9b9,0x7aeb2661,0x8b1ddf84,0x846a0e79,0x915f95e2,0x466e598e,0x20b45770,0x8cd55591,0xc902de4c,0xb90bace1,0xbb8205d0,0x11a86248,0x7574a99e,0xb77f19b6,0xe0a9dc09,0x662d09a1,0xc4324633,0xe85a1f02,0x9f0be8c,0x4a99a025,0x1d6efe10,0x1ab93d1d,0xba5a4df,0xa186f20f,0x2868f169,0xdcb7da83,0x573906fe,0xa1e2ce9b,0x4fcd7f52,0x50115e01,0xa70683fa,0xa002b5c4,0xde6d027,0x9af88c27,0x773f8641,0xc3604c06,0x61a806b5,0xf0177a28,0xc0f586e0,6314154,0x30dc7d62,0x11e69ed7,0x2338ea63,0x53c2dd94,0xc2c21634,0xbbcbee56,0x90bcb6de,0xebfc7da1,0xce591d76,0x6f05e409,0x4b7c0188,0x39720a3d,0x7c927c24,0x86e3725f,0x724d9db9,0x1ac15bb4,0xd39eb8fc,0xed545578,0x8fca5b5,0xd83d7cd3,0x4dad0fc4,0x1e50ef5e,0xb161e6f8,0xa28514d9,0x6c51133c,0x6fd5c7e7,0x56e14ec4,0x362abfce,0xddc6c837,0xd79a3234,0x92638212,0x670efa8e,0x406000e0,0x3a39ce37,0xd3faf5cf,0xabc27737,0x5ac52d1b,0x5cb0679e,0x4fa33742,0xd3822740,0x99bc9bbe,0xd5118e9d,0xbf0f7315,0xd62d1c7e,0xc700c47b,0xb78c1b6b,0x21a19045,0xb26eb1be,0x6a366eb4,0x5748ab2f,0xbc946e79,0xc6a376d2,0x6549c2c8,0x530ff8ee,0x468dde7d,0xd5730a1d,0x4cd04dc6,0x2939bbdb,0xa9ba4650,0xac9526e8,0xbe5ee304,0xa1fad5f0,0x6a2d519a,0x63ef8ce2,0x9a86ee22,0xc089c2b8,0x43242ef6,0xa51e03aa,0x9cf2d0a4,0x83c061ba,0x9be96a4d,0x8fe51550,0xba645bd6,0x2826a2f9,0xa73a3ae1,0x4ba99586,0xef5562e9,0xc72fefd3,0xf752f7da,0x3f046f69,0x77fa0a59,0x80e4a915,0x87b08601,0x9b09e6ad,0x3b3ee593,0xe990fd5a,0x9e34d797,0x2cf0b7d9,0x22b8b51,0x96d5ac3a,0x17da67d,0xd1cf3ed6,0x7c7d2d28,0x1f9f25cf,0xadf2b89b,0x5ad6b472,0x5a88f54c,0xe029ac71,0xe019a5e6,0x47b0acfd,0xed93fa9b,0xe8d3c48d,0x283b57cc,0xf8d56629,0x79132e28,0x785f0191,0xed756055,0xf7960e44,0xe3d35e8c,0x15056dd4,0x88f46dba,0x3a16125,0x564f0bd,0xc3eb9e15,0x3c9057a2,0x97271aec,0xa93a072a,0x1b3f6d9b,0x1e6321f5,0xf59c66fb,0x26dcf319,0x7533d928,0xb155fdf5,0x3563482,0x8aba3cbb,0x28517711,0xc20ad9f8,0xabcc5167,0xccad925f,0x4de81751,0x3830dc8e,0x379d5862,0x9320f991,0xea7a90c2,0xfb3e7bce,0x5121ce64,0x774fbe32,0xa8b6e37e,0xc3293d46,0x48de5369,0x6413e680,0xa2ae0810,0xdd6db224,0x69852dfd,0x9072166,0xb39a460a,0x6445c0dd,0x586cdecf,0x1c20c8ae,0x5bbef7dd,0x1b588d40,0xccd2017f,0x6bb4e3bb,0xdda26a7e,0x3a59ff45,0x3e350a44,0xbcb4cdd5,0x72eacea8,0xfa6484bb,0x8d6612ae,0xbf3c6f47,0xd29be463,0x542f5d9e,0xaec2771b,0xf64e6370,0x740e0d8d,0xe75b1357,0xf8721671,0xaf537d5d,0x4040cb08,0x4eb4e2cc,0x34d2466a,0x115af84,3786409e3,0x95983a1d,0x6b89fb4,0xce6ea048,0x6f3f3b82,0x3520ab82,0x11a1d4b,0x277227f8,0x611560b1,0xe7933fdc,0xbb3a792b,0x344525bd,0xa08839e1,0x51ce794b,0x2f32c9b7,0xa01fbac9,0xe01cc87e,0xbcc7d1f6,0xcf0111c3,0xa1e8aac7,0x1a908749,0xd44fbd9a,0xd0dadecb,0xd50ada38,0x339c32a,0xc6913667,0x8df9317c,0xe0b12b4f,0xf79e59b7,0x43f5bb3a,0xf2d519ff,0x27d9459c,0xbf97222c,0x15e6fc2a,0xf91fc71,0x9b941525,0xfae59361,0xceb69ceb,0xc2a86459,0x12baa8d1,0xb6c1075e,0xe3056a0c,0x10d25065,0xcb03a442,0xe0ec6e0e,0x1698db3b,0x4c98a0be,0x3278e964,0x9f1f9532,0xe0d392df,0xd3a0342b,0x8971f21e,0x1b0a7441,0x4ba3348c,0xc5be7120,0xc37632d8,0xdf359f8d,0x9b992f2e,0xe60b6f47,0xfe3f11d,0xe54cda54,0x1edad891,0xce6279cf,0xcd3e7e6f,0x1618b166,0xfd2c1d05,0x848fd2c5,0xf6fb2299,0xf523f357,0xa6327623,0x93a83531,0x56cccd02,0xacf08162,0x5a75ebb5,0x6e163697,0x88d273cc,0xde966292,0x81b949d0,0x4c50901b,0x71c65614,0xe6c6c7bd,0x327a140a,0x45e1d006,0xc3f27b9a,0xc9aa53fd,0x62a80f00,0xbb25bfe2,0x35bdd2f6,0x71126905,0xb2040222,0xb6cbcf7c,0xcd769c2b,0x53113ec0,0x1640e3d3,0x38abbd60,0x2547adf0,0xba38209c,0xf746ce76,0x77afa1c5,0x20756060,0x85cbfe4e,0x8ae88dd8,0x7aaaf9b0,0x4cf9aa7e,0x1948c25c,0x2fb8a8c,0x1c36ae4,0xd6ebe1f9,0x90d4f869,0xa65cdea0,0x3f09252d,0xc208e69f,0xb74e6132,0xce77e25b,0x578fdfe3,0x3ac372e6],s=[0x4f727068,0x65616e42,0x65686f6c,0x64657253,0x63727944,0x6f756274];function t(a,b,c,d){var e=a[b],f=a[b+1];return e^=c[0],f^=(d[e>>>24]+d[256|e>>16&255]^d[512|e>>8&255])+d[768|255&e]^c[1],e^=(d[f>>>24]+d[256|f>>16&255]^d[512|f>>8&255])+d[768|255&f]^c[2],f^=(d[e>>>24]+d[256|e>>16&255]^d[512|e>>8&255])+d[768|255&e]^c[3],e^=(d[f>>>24]+d[256|f>>16&255]^d[512|f>>8&255])+d[768|255&f]^c[4],f^=(d[e>>>24]+d[256|e>>16&255]^d[512|e>>8&255])+d[768|255&e]^c[5],e^=(d[f>>>24]+d[256|f>>16&255]^d[512|f>>8&255])+d[768|255&f]^c[6],f^=(d[e>>>24]+d[256|e>>16&255]^d[512|e>>8&255])+d[768|255&e]^c[7],e^=(d[f>>>24]+d[256|f>>16&255]^d[512|f>>8&255])+d[768|255&f]^c[8],f^=(d[e>>>24]+d[256|e>>16&255]^d[512|e>>8&255])+d[768|255&e]^c[9],e^=(d[f>>>24]+d[256|f>>16&255]^d[512|f>>8&255])+d[768|255&f]^c[10],f^=(d[e>>>24]+d[256|e>>16&255]^d[512|e>>8&255])+d[768|255&e]^c[11],e^=(d[f>>>24]+d[256|f>>16&255]^d[512|f>>8&255])+d[768|255&f]^c[12],f^=(d[e>>>24]+d[256|e>>16&255]^d[512|e>>8&255])+d[768|255&e]^c[13],e^=(d[f>>>24]+d[256|f>>16&255]^d[512|f>>8&255])+d[768|255&f]^c[14],f^=(d[e>>>24]+d[256|e>>16&255]^d[512|e>>8&255])+d[768|255&e]^c[15],e^=(d[f>>>24]+d[256|f>>16&255]^d[512|f>>8&255])+d[768|255&f]^c[16],a[b]=f^c[17],a[b+1]=e,a}function u(a,b){for(var c=0,d=0;c<4;++c)d=d<<8|255&a[b],b=(b+1)%a.length;return{key:d,offp:b}}function v(a,b,c){for(var d,e=0,f=[0,0],g=b.length,h=c.length,i=0;i<g;i++)e=(d=u(a,e)).offp,b[i]=b[i]^d.key;for(i=0;i<g;i+=2)f=t(f,0,b,c),b[i]=f[0],b[i+1]=f[1];for(i=0;i<h;i+=2)f=t(f,0,b,c),c[i]=f[0],c[i+1]=f[1]}function w(a,b,c,d,e){var f,g,i=s.slice(),j=i.length;if(c<4||c>31){if(g=Error("Illegal number of rounds (4-31): "+c),d)return void h(d.bind(this,g));throw g}if(b.length!==o){if(g=Error("Illegal salt length: "+b.length+" != "+o),d)return void h(d.bind(this,g));throw g}c=1<<c>>>0;var k,l,m,n=0;function p(){if(e&&e(n/c),n<c)for(var f=Date.now();n<c&&(n+=1,v(a,k,l),v(b,k,l),!(Date.now()-f>100)););else{for(n=0;n<64;n++)for(m=0;m<j>>1;m++)t(i,m<<1,k,l);var g=[];for(n=0;n<j;n++)g.push((i[n]>>24&255)>>>0),g.push((i[n]>>16&255)>>>0),g.push((i[n]>>8&255)>>>0),g.push((255&i[n])>>>0);return d?void d(null,g):g}d&&h(p)}if(Int32Array?(k=new Int32Array(q),l=new Int32Array(r)):(k=q.slice(),l=r.slice()),!function(a,b,c,d){for(var e,f=0,g=[0,0],h=c.length,i=d.length,j=0;j<h;j++)f=(e=u(b,f)).offp,c[j]=c[j]^e.key;for(j=0,f=0;j<h;j+=2)f=(e=u(a,f)).offp,g[0]^=e.key,f=(e=u(a,f)).offp,g[1]^=e.key,g=t(g,0,c,d),c[j]=g[0],c[j+1]=g[1];for(j=0;j<i;j+=2)f=(e=u(a,f)).offp,g[0]^=e.key,f=(e=u(a,f)).offp,g[1]^=e.key,g=t(g,0,c,d),d[j]=g[0],d[j+1]=g[1]}(b,a,k,l),void 0!==d)p();else for(;;)if(void 0!==(f=p()))return f||[]}function x(a,b,c,d){if("string"!=typeof a||"string"!=typeof b){if(i=Error("Invalid string / salt: Not a string"),c)return void h(c.bind(this,i));throw i}if("$"!==b.charAt(0)||"2"!==b.charAt(1)){if(i=Error("Invalid salt version: "+b.substring(0,2)),c)return void h(c.bind(this,i));throw i}if("$"===b.charAt(2))j="\0",k=3;else{if("a"!==(j=b.charAt(2))&&"b"!==j&&"y"!==j||"$"!==b.charAt(3)){if(i=Error("Invalid salt revision: "+b.substring(2,4)),c)return void h(c.bind(this,i));throw i}k=4}if(b.charAt(k+2)>"$"){if(i=Error("Missing salt rounds"),c)return void h(c.bind(this,i));throw i}var e,f,g,i,j,k,p=10*parseInt(b.substring(k,k+1),10)+parseInt(b.substring(k+1,k+2),10),q=b.substring(k+3,k+25);a+=j>="a"?"\0":"";var r=(e=a,f=[],g=0,n.encodeUTF16toUTF8(function(){return g>=e.length?null:e.charCodeAt(g++)},function(a){f.push(a)}),f),t=m(q,o);function u(a){var b=[];return b.push("$2"),j>="a"&&b.push(j),b.push("$"),p<10&&b.push("0"),b.push(p.toString()),b.push("$"),b.push(l(t,t.length)),b.push(l(a,4*s.length-1)),b.join("")}if(void 0===c)return u(w(r,t,p));w(r,t,p,function(a,b){a?c(a,null):c(null,u(b))},d)}return d.encodeBase64=l,d.decodeBase64=m,d})},72849,(a,b,c)=>{b.exports=a.r(97187)},82241,a=>{"use strict";var b=a.i(72849),c=a.i(51615),d=a.i(66680);let e=new TextEncoder,f=new TextDecoder;function g(...a){let b=new Uint8Array(a.reduce((a,{length:b})=>a+b,0)),c=0;for(let d of a)b.set(d,c),c+=d.length;return b}let h=a=>c.Buffer.from(a).toString("base64url"),i=a=>{let b;return new Uint8Array(c.Buffer.from(((b=a)instanceof Uint8Array&&(b=f.decode(b)),b),"base64url"))};var j=a.i(12057);class k extends Error{static code="ERR_JOSE_GENERIC";code="ERR_JOSE_GENERIC";constructor(a,b){super(a,b),this.name=this.constructor.name,Error.captureStackTrace?.(this,this.constructor)}}class l extends k{static code="ERR_JWT_CLAIM_VALIDATION_FAILED";code="ERR_JWT_CLAIM_VALIDATION_FAILED";claim;reason;payload;constructor(a,b,c="unspecified",d="unspecified"){super(a,{cause:{claim:c,reason:d,payload:b}}),this.claim=c,this.reason=d,this.payload=b}}class m extends k{static code="ERR_JWT_EXPIRED";code="ERR_JWT_EXPIRED";claim;reason;payload;constructor(a,b,c="unspecified",d="unspecified"){super(a,{cause:{claim:c,reason:d,payload:b}}),this.claim=c,this.reason=d,this.payload=b}}class n extends k{static code="ERR_JOSE_ALG_NOT_ALLOWED";code="ERR_JOSE_ALG_NOT_ALLOWED"}class o extends k{static code="ERR_JOSE_NOT_SUPPORTED";code="ERR_JOSE_NOT_SUPPORTED"}class p extends k{static code="ERR_JWS_INVALID";code="ERR_JWS_INVALID"}class q extends k{static code="ERR_JWT_INVALID";code="ERR_JWT_INVALID"}class r extends k{[Symbol.asyncIterator];static code="ERR_JWKS_MULTIPLE_MATCHING_KEYS";code="ERR_JWKS_MULTIPLE_MATCHING_KEYS";constructor(a="multiple matching keys found in the JSON Web Key Set",b){super(a,b)}}class s extends k{static code="ERR_JWS_SIGNATURE_VERIFICATION_FAILED";code="ERR_JWS_SIGNATURE_VERIFICATION_FAILED";constructor(a="signature verification failed",b){super(a,b)}}function t(a){switch(a){case"PS256":case"RS256":case"ES256":case"ES256K":return"sha256";case"PS384":case"RS384":case"ES384":return"sha384";case"PS512":case"RS512":case"ES512":return"sha512";case"EdDSA":return;default:throw new o(`alg ${a} is not supported either by JOSE or your javascript runtime`)}}let u=d.webcrypto;function v(a,b,...c){if((c=c.filter(Boolean)).length>2){let b=c.pop();a+=`one of type ${c.join(", ")}, or ${b}.`}else 2===c.length?a+=`one of type ${c[0]} or ${c[1]}.`:a+=`of type ${c[0]}.`;return null==b?a+=` Received ${b}`:"function"==typeof b&&b.name?a+=` Received function ${b.name}`:"object"==typeof b&&null!=b&&b.constructor?.name&&(a+=` Received an instance of ${b.constructor.name}`),a}let w=(a,...b)=>v("Key must be ",a,...b);function x(a,b,...c){return v(`Key for the ${a} algorithm must be `,b,...c)}let y=a=>j.types.isKeyObject(a)||j.types.isCryptoKey(a),z=["KeyObject"];function A(a){if("object"!=typeof a||null===a||"[object Object]"!==Object.prototype.toString.call(a))return!1;if(null===Object.getPrototypeOf(a))return!0;let b=a;for(;null!==Object.getPrototypeOf(b);)b=Object.getPrototypeOf(b);return Object.getPrototypeOf(a)===b}function B(a){return A(a)&&"string"==typeof a.kty}(globalThis.CryptoKey||u?.CryptoKey)&&z.push("CryptoKey"),new WeakMap;let C=(a,b)=>{let c;try{c=a instanceof d.KeyObject?a.asymmetricKeyDetails?.modulusLength:Buffer.from(a.n,"base64url").byteLength<<3}catch{}if("number"!=typeof c||c<2048)throw TypeError(`${b} requires key modulusLength to be 2048 bits or larger`)},D=new Map([["ES256","P-256"],["ES256K","secp256k1"],["ES384","P-384"],["ES512","P-521"]]);function E(a,b){let c,e,f,g;if(b instanceof d.KeyObject)c=b.asymmetricKeyType,e=b.asymmetricKeyDetails;else switch(f=!0,b.kty){case"RSA":c="rsa";break;case"EC":c="ec";break;case"OKP":if("Ed25519"===b.crv){c="ed25519";break}if("Ed448"===b.crv){c="ed448";break}throw TypeError("Invalid key for this operation, its crv must be Ed25519 or Ed448");default:throw TypeError("Invalid key for this operation, its kty must be RSA, OKP, or EC")}switch(a){case"EdDSA":if(!["ed25519","ed448"].includes(c))throw TypeError("Invalid key for this operation, its asymmetricKeyType must be ed25519 or ed448");break;case"RS256":case"RS384":case"RS512":if("rsa"!==c)throw TypeError("Invalid key for this operation, its asymmetricKeyType must be rsa");C(b,a);break;case"PS256":case"PS384":case"PS512":if("rsa-pss"===c){let{hashAlgorithm:b,mgf1HashAlgorithm:c,saltLength:d}=e,f=parseInt(a.slice(-3),10);if(void 0!==b&&(b!==`sha${f}`||c!==b))throw TypeError(`Invalid key for this operation, its RSA-PSS parameters do not meet the requirements of "alg" ${a}`);if(void 0!==d&&d>f>>3)throw TypeError(`Invalid key for this operation, its RSA-PSS parameter saltLength does not meet the requirements of "alg" ${a}`)}else if("rsa"!==c)throw TypeError("Invalid key for this operation, its asymmetricKeyType must be rsa or rsa-pss");C(b,a),g={padding:d.constants.RSA_PKCS1_PSS_PADDING,saltLength:d.constants.RSA_PSS_SALTLEN_DIGEST};break;case"ES256":case"ES256K":case"ES384":case"ES512":{if("ec"!==c)throw TypeError("Invalid key for this operation, its asymmetricKeyType must be ec");let e=((a,b)=>{let c;if(j.types.isCryptoKey(a))c=d.KeyObject.from(a);else if(j.types.isKeyObject(a))c=a;else if(B(a))return a.crv;else throw TypeError(w(a,...z));if("secret"===c.type)throw TypeError('only "private" or "public" type keys can be used for this operation');switch(c.asymmetricKeyType){case"ed25519":case"ed448":return`Ed${c.asymmetricKeyType.slice(2)}`;case"x25519":case"x448":return`X${c.asymmetricKeyType.slice(1)}`;case"ec":{let a=c.asymmetricKeyDetails.namedCurve;if(b)return a;switch(a){case"prime256v1":return"P-256";case"secp384r1":return"P-384";case"secp521r1":return"P-521";case"secp256k1":return"secp256k1";default:throw new o("Unsupported key curve for this operation")}}default:throw TypeError("Invalid asymmetric key type for this operation")}})(b),f=D.get(a);if(e!==f)throw TypeError(`Invalid key curve for the algorithm, its curve must be ${f}, got ${e}`);g={dsaEncoding:"ieee-p1363"};break}default:throw new o(`alg ${a} is not supported either by JOSE or your javascript runtime`)}return f?{format:"jwk",key:b,...g}:g?{...g,key:b}:b}function F(a,b="algorithm.name"){return TypeError(`CryptoKey does not support this operation, its ${b} must be ${a}`)}function G(a,b){return a.name===b}function H(a){return parseInt(a.name.slice(4),10)}function I(a,b,c){if(b instanceof Uint8Array){if(!a.startsWith("HS"))throw TypeError(w(b,...z));return(0,d.createSecretKey)(b)}if(b instanceof d.KeyObject)return b;if(j.types.isCryptoKey(b))return!function(a,b,...c){switch(b){case"HS256":case"HS384":case"HS512":{if(!G(a.algorithm,"HMAC"))throw F("HMAC");let c=parseInt(b.slice(2),10);if(H(a.algorithm.hash)!==c)throw F(`SHA-${c}`,"algorithm.hash");break}case"RS256":case"RS384":case"RS512":{if(!G(a.algorithm,"RSASSA-PKCS1-v1_5"))throw F("RSASSA-PKCS1-v1_5");let c=parseInt(b.slice(2),10);if(H(a.algorithm.hash)!==c)throw F(`SHA-${c}`,"algorithm.hash");break}case"PS256":case"PS384":case"PS512":{if(!G(a.algorithm,"RSA-PSS"))throw F("RSA-PSS");let c=parseInt(b.slice(2),10);if(H(a.algorithm.hash)!==c)throw F(`SHA-${c}`,"algorithm.hash");break}case"EdDSA":if("Ed25519"!==a.algorithm.name&&"Ed448"!==a.algorithm.name)throw F("Ed25519 or Ed448");break;case"ES256":case"ES384":case"ES512":{if(!G(a.algorithm,"ECDSA"))throw F("ECDSA");let c=function(a){switch(a){case"ES256":return"P-256";case"ES384":return"P-384";case"ES512":return"P-521";default:throw Error("unreachable")}}(b);if(a.algorithm.namedCurve!==c)throw F(c,"algorithm.namedCurve");break}default:throw TypeError("CryptoKey does not support this operation")}if(c.length&&!c.some(b=>a.usages.includes(b))){let a="CryptoKey does not support this operation, its usages must include ";if(c.length>2){let b=c.pop();a+=`one of ${c.join(", ")}, or ${b}.`}else 2===c.length?a+=`one of ${c[0]} or ${c[1]}.`:a+=`${c[0]}.`;throw TypeError(a)}}(b,a,c),d.KeyObject.from(b);if(B(b))return a.startsWith("HS")?(0,d.createSecretKey)(Buffer.from(b.k,"base64url")):b;throw TypeError(w(b,...z,"Uint8Array","JSON Web Key"))}let J=(0,j.promisify)(d.sign),K=async(a,b,c)=>{let e=I(a,b,"sign");if(a.startsWith("HS")){let b=d.createHmac(function(a){switch(a){case"HS256":return"sha256";case"HS384":return"sha384";case"HS512":return"sha512";default:throw new o(`alg ${a} is not supported either by JOSE or your javascript runtime`)}}(a),e);return b.update(c),b.digest()}return J(t(a),c,E(a,e))},L=(...a)=>{let b,c=a.filter(Boolean);if(0===c.length||1===c.length)return!0;for(let a of c){let c=Object.keys(a);if(!b||0===b.size){b=new Set(c);continue}for(let a of c){if(b.has(a))return!1;b.add(a)}}return!0},M=a=>a?.[Symbol.toStringTag],N=(a,b,c)=>{if(void 0!==b.use&&"sig"!==b.use)throw TypeError("Invalid key for this operation, when present its use must be sig");if(void 0!==b.key_ops&&b.key_ops.includes?.(c)!==!0)throw TypeError(`Invalid key for this operation, when present its key_ops must include ${c}`);if(void 0!==b.alg&&b.alg!==a)throw TypeError(`Invalid key for this operation, when present its alg must be ${a}`);return!0};function O(a,b,c,d){b.startsWith("HS")||"dir"===b||b.startsWith("PBES2")||/^A\d{3}(?:GCM)?KW$/.test(b)?((a,b,c,d)=>{if(!(b instanceof Uint8Array)){if(d&&B(b)){if(B(b)&&"oct"===b.kty&&"string"==typeof b.k&&N(a,b,c))return;throw TypeError('JSON Web Key for symmetric algorithms must have JWK "kty" (Key Type) equal to "oct" and the JWK "k" (Key Value) present')}if(!y(b))throw TypeError(x(a,b,...z,"Uint8Array",d?"JSON Web Key":null));if("secret"!==b.type)throw TypeError(`${M(b)} instances for symmetric algorithms must be of type "secret"`)}})(b,c,d,a):((a,b,c,d)=>{if(d&&B(b))switch(c){case"sign":if("oct"!==b.kty&&"string"==typeof b.d&&N(a,b,c))return;throw TypeError("JSON Web Key for this operation be a private JWK");case"verify":if("oct"!==b.kty&&void 0===b.d&&N(a,b,c))return;throw TypeError("JSON Web Key for this operation be a public JWK")}if(!y(b))throw TypeError(x(a,b,...z,d?"JSON Web Key":null));if("secret"===b.type)throw TypeError(`${M(b)} instances for asymmetric algorithms must not be of type "secret"`);if("sign"===c&&"public"===b.type)throw TypeError(`${M(b)} instances for asymmetric algorithm signing must be of type "private"`);if("decrypt"===c&&"public"===b.type)throw TypeError(`${M(b)} instances for asymmetric algorithm decryption must be of type "private"`);if(b.algorithm&&"verify"===c&&"private"===b.type)throw TypeError(`${M(b)} instances for asymmetric algorithm verifying must be of type "public"`);if(b.algorithm&&"encrypt"===c&&"private"===b.type)throw TypeError(`${M(b)} instances for asymmetric algorithm encryption must be of type "public"`)})(b,c,d,a)}O.bind(void 0,!1);let P=O.bind(void 0,!0),Q=function(a,b,c,d,e){let f;if(void 0!==e.crit&&d?.crit===void 0)throw new a('"crit" (Critical) Header Parameter MUST be integrity protected');if(!d||void 0===d.crit)return new Set;if(!Array.isArray(d.crit)||0===d.crit.length||d.crit.some(a=>"string"!=typeof a||0===a.length))throw new a('"crit" (Critical) Header Parameter MUST be an array of non-empty strings when present');for(let g of(f=void 0!==c?new Map([...Object.entries(c),...b.entries()]):b,d.crit)){if(!f.has(g))throw new o(`Extension Header Parameter "${g}" is not recognized`);if(void 0===e[g])throw new a(`Extension Header Parameter "${g}" is missing`);if(f.get(g)&&void 0===d[g])throw new a(`Extension Header Parameter "${g}" MUST be integrity protected`)}return new Set(d.crit)};class R{_payload;_protectedHeader;_unprotectedHeader;constructor(a){if(!(a instanceof Uint8Array))throw TypeError("payload must be an instance of Uint8Array");this._payload=a}setProtectedHeader(a){if(this._protectedHeader)throw TypeError("setProtectedHeader can only be called once");return this._protectedHeader=a,this}setUnprotectedHeader(a){if(this._unprotectedHeader)throw TypeError("setUnprotectedHeader can only be called once");return this._unprotectedHeader=a,this}async sign(a,b){let c;if(!this._protectedHeader&&!this._unprotectedHeader)throw new p("either setProtectedHeader or setUnprotectedHeader must be called before #sign()");if(!L(this._protectedHeader,this._unprotectedHeader))throw new p("JWS Protected and JWS Unprotected Header Parameter names must be disjoint");let d={...this._protectedHeader,...this._unprotectedHeader},i=Q(p,new Map([["b64",!0]]),b?.crit,this._protectedHeader,d),j=!0;if(i.has("b64")&&"boolean"!=typeof(j=this._protectedHeader.b64))throw new p('The "b64" (base64url-encode payload) Header Parameter must be a boolean');let{alg:k}=d;if("string"!=typeof k||!k)throw new p('JWS "alg" (Algorithm) Header Parameter missing or invalid');P(k,a,"sign");let l=this._payload;j&&(l=e.encode(h(l)));let m=g(c=this._protectedHeader?e.encode(h(JSON.stringify(this._protectedHeader))):e.encode(""),e.encode("."),l),n={signature:h(await K(k,a,m)),payload:""};return j&&(n.payload=f.decode(l)),this._unprotectedHeader&&(n.header=this._unprotectedHeader),this._protectedHeader&&(n.protected=f.decode(c)),n}}class S{_flattened;constructor(a){this._flattened=new R(a)}setProtectedHeader(a){return this._flattened.setProtectedHeader(a),this}async sign(a,b){let c=await this._flattened.sign(a,b);if(void 0===c.payload)throw TypeError("use the flattened module for creating JWS with b64: false");return`${c.protected}.${c.payload}.${c.signature}`}}let T=a=>Math.floor(a.getTime()/1e3),U=/^(\+|\-)? ?(\d+|\d+\.\d+) ?(seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)(?: (ago|from now))?$/i,V=a=>{let b,c=U.exec(a);if(!c||c[4]&&c[1])throw TypeError("Invalid time period format");let d=parseFloat(c[2]);switch(c[3].toLowerCase()){case"sec":case"secs":case"second":case"seconds":case"s":b=Math.round(d);break;case"minute":case"minutes":case"min":case"mins":case"m":b=Math.round(60*d);break;case"hour":case"hours":case"hr":case"hrs":case"h":b=Math.round(3600*d);break;case"day":case"days":case"d":b=Math.round(86400*d);break;case"week":case"weeks":case"w":b=Math.round(604800*d);break;default:b=Math.round(0x1e187e0*d)}return"-"===c[1]||"ago"===c[4]?-b:b};function W(a,b){if(!Number.isFinite(b))throw TypeError(`Invalid ${a} input`);return b}class X{_payload;constructor(a={}){if(!A(a))throw TypeError("JWT Claims Set MUST be an object");this._payload=a}setIssuer(a){return this._payload={...this._payload,iss:a},this}setSubject(a){return this._payload={...this._payload,sub:a},this}setAudience(a){return this._payload={...this._payload,aud:a},this}setJti(a){return this._payload={...this._payload,jti:a},this}setNotBefore(a){return"number"==typeof a?this._payload={...this._payload,nbf:W("setNotBefore",a)}:a instanceof Date?this._payload={...this._payload,nbf:W("setNotBefore",T(a))}:this._payload={...this._payload,nbf:T(new Date)+V(a)},this}setExpirationTime(a){return"number"==typeof a?this._payload={...this._payload,exp:W("setExpirationTime",a)}:a instanceof Date?this._payload={...this._payload,exp:W("setExpirationTime",T(a))}:this._payload={...this._payload,exp:T(new Date)+V(a)},this}setIssuedAt(a){return void 0===a?this._payload={...this._payload,iat:T(new Date)}:a instanceof Date?this._payload={...this._payload,iat:W("setIssuedAt",T(a))}:"string"==typeof a?this._payload={...this._payload,iat:W("setIssuedAt",T(new Date)+V(a))}:this._payload={...this._payload,iat:W("setIssuedAt",a)},this}}class Y extends X{_protectedHeader;setProtectedHeader(a){return this._protectedHeader=a,this}async sign(a,b){let c=new S(e.encode(JSON.stringify(this._payload)));if(c.setProtectedHeader(this._protectedHeader),Array.isArray(this._protectedHeader?.crit)&&this._protectedHeader.crit.includes("b64")&&!1===this._protectedHeader.b64)throw new q("JWTs MUST NOT use unencoded payload");return c.sign(a,b)}}let Z=(0,j.promisify)(d.verify),$=async(a,b,c,e)=>{let f=I(a,b,"verify");if(a.startsWith("HS")){let b=await K(a,f,e);try{return d.timingSafeEqual(c,b)}catch{return!1}}let g=t(a),h=E(a,f);try{return await Z(g,e,h,c)}catch{return!1}};async function _(a,b){if(!A(a))throw TypeError("JWK must be an object");switch(b||=a.alg,a.kty){case"oct":if("string"!=typeof a.k||!a.k)throw TypeError('missing "k" (Key Value) Parameter value');return i(a.k);case"RSA":if(void 0!==a.oth)throw new o('RSA JWK "oth" (Other Primes Info) Parameter value is not supported');case"EC":case"OKP":var c;return(c={...a,alg:b}).d?(0,d.createPrivateKey)({format:"jwk",key:c}):(0,d.createPublicKey)({format:"jwk",key:c});default:throw new o('Unsupported "kty" (Key Type) Parameter value')}}async function aa(a,b,c){let d,h;if(!A(a))throw new p("Flattened JWS must be an object");if(void 0===a.protected&&void 0===a.header)throw new p('Flattened JWS must have either of the "protected" or "header" members');if(void 0!==a.protected&&"string"!=typeof a.protected)throw new p("JWS Protected Header incorrect type");if(void 0===a.payload)throw new p("JWS Payload missing");if("string"!=typeof a.signature)throw new p("JWS Signature missing or incorrect type");if(void 0!==a.header&&!A(a.header))throw new p("JWS Unprotected Header incorrect type");let j={};if(a.protected)try{let b=i(a.protected);j=JSON.parse(f.decode(b))}catch{throw new p("JWS Protected Header is invalid")}if(!L(j,a.header))throw new p("JWS Protected and JWS Unprotected Header Parameter names must be disjoint");let k={...j,...a.header},l=Q(p,new Map([["b64",!0]]),c?.crit,j,k),m=!0;if(l.has("b64")&&"boolean"!=typeof(m=j.b64))throw new p('The "b64" (base64url-encode payload) Header Parameter must be a boolean');let{alg:o}=k;if("string"!=typeof o||!o)throw new p('JWS "alg" (Algorithm) Header Parameter missing or invalid');let q=c&&((a,b)=>{if(void 0!==b&&(!Array.isArray(b)||b.some(a=>"string"!=typeof a)))throw TypeError(`"${a}" option must be an array of strings`);if(b)return new Set(b)})("algorithms",c.algorithms);if(q&&!q.has(o))throw new n('"alg" (Algorithm) Header Parameter value not allowed');if(m){if("string"!=typeof a.payload)throw new p("JWS Payload must be a string")}else if("string"!=typeof a.payload&&!(a.payload instanceof Uint8Array))throw new p("JWS Payload must be a string or an Uint8Array instance");let r=!1;"function"==typeof b?(b=await b(j,a),r=!0,P(o,b,"verify"),B(b)&&(b=await _(b,o))):P(o,b,"verify");let t=g(e.encode(a.protected??""),e.encode("."),"string"==typeof a.payload?e.encode(a.payload):a.payload);try{d=i(a.signature)}catch{throw new p("Failed to base64url decode the signature")}if(!await $(o,b,d,t))throw new s;if(m)try{h=i(a.payload)}catch{throw new p("Failed to base64url decode the payload")}else h="string"==typeof a.payload?e.encode(a.payload):a.payload;let u={payload:h};return(void 0!==a.protected&&(u.protectedHeader=j),void 0!==a.header&&(u.unprotectedHeader=a.header),r)?{...u,key:b}:u}async function ab(a,b,c){if(a instanceof Uint8Array&&(a=f.decode(a)),"string"!=typeof a)throw new p("Compact JWS must be a string or Uint8Array");let{0:d,1:e,2:g,length:h}=a.split(".");if(3!==h)throw new p("Invalid Compact JWS");let i=await aa({payload:e,protected:d,signature:g},b,c),j={payload:i.payload,protectedHeader:i.protectedHeader};return"function"==typeof b?{...j,key:i.key}:j}let ac=a=>a.toLowerCase().replace(/^application\//,"");async function ad(a,b,c){let d=await ab(a,b,c);if(d.protectedHeader.crit?.includes("b64")&&!1===d.protectedHeader.b64)throw new q("JWTs MUST NOT use unencoded payload");let e={payload:((a,b,c={})=>{var d,e;let g,h;try{g=JSON.parse(f.decode(b))}catch{}if(!A(g))throw new q("JWT Claims Set must be a top-level JSON object");let{typ:i}=c;if(i&&("string"!=typeof a.typ||ac(a.typ)!==ac(i)))throw new l('unexpected "typ" JWT header value',g,"typ","check_failed");let{requiredClaims:j=[],issuer:k,subject:n,audience:o,maxTokenAge:p}=c,r=[...j];for(let a of(void 0!==p&&r.push("iat"),void 0!==o&&r.push("aud"),void 0!==n&&r.push("sub"),void 0!==k&&r.push("iss"),new Set(r.reverse())))if(!(a in g))throw new l(`missing required "${a}" claim`,g,a,"missing");if(k&&!(Array.isArray(k)?k:[k]).includes(g.iss))throw new l('unexpected "iss" claim value',g,"iss","check_failed");if(n&&g.sub!==n)throw new l('unexpected "sub" claim value',g,"sub","check_failed");if(o&&(d=g.aud,e="string"==typeof o?[o]:o,"string"==typeof d?!e.includes(d):!(Array.isArray(d)&&e.some(Set.prototype.has.bind(new Set(d))))))throw new l('unexpected "aud" claim value',g,"aud","check_failed");switch(typeof c.clockTolerance){case"string":h=V(c.clockTolerance);break;case"number":h=c.clockTolerance;break;case"undefined":h=0;break;default:throw TypeError("Invalid clockTolerance option type")}let{currentDate:s}=c,t=T(s||new Date);if((void 0!==g.iat||p)&&"number"!=typeof g.iat)throw new l('"iat" claim must be a number',g,"iat","invalid");if(void 0!==g.nbf){if("number"!=typeof g.nbf)throw new l('"nbf" claim must be a number',g,"nbf","invalid");if(g.nbf>t+h)throw new l('"nbf" claim timestamp check failed',g,"nbf","check_failed")}if(void 0!==g.exp){if("number"!=typeof g.exp)throw new l('"exp" claim must be a number',g,"exp","invalid");if(g.exp<=t-h)throw new m('"exp" claim timestamp check failed',g,"exp","check_failed")}if(p){let a=t-g.iat;if(a-h>("number"==typeof p?p:V(p)))throw new m('"iat" claim timestamp check failed (too far in the past)',g,"iat","check_failed");if(a<0-h)throw new l('"iat" claim timestamp check failed (it should be in the past)',g,"iat","check_failed")}return g})(d.protectedHeader,d.payload,c),protectedHeader:d.protectedHeader};return"function"==typeof b?{...e,key:d.key}:e}var ae=a.i(5246);let af=new TextEncoder().encode(process.env.AUTH_SECRET);async function ag(a){return(0,b.hash)(a,10)}async function ah(a,c){return(0,b.compare)(a,c)}async function ai(a){return await new Y(a).setProtectedHeader({alg:"HS256"}).setIssuedAt().setExpirationTime("1 day from now").sign(af)}async function aj(a){let{payload:b}=await ad(a,af,{algorithms:["HS256"]});return b}async function ak(a){let b=new Date(Date.now()+864e5),c={user:{id:a.id},expires:b.toISOString()},d=await ai(c);(await (0,ae.cookies)()).set("session",d,{expires:b,httpOnly:!0,secure:!0,sameSite:"lax"})}a.s(["comparePasswords",()=>ah,"hashPassword",()=>ag,"setSession",()=>ak,"verifyToken",()=>aj],82241)},63227,a=>{"use strict";let b=Symbol.for("drizzle:entityKind");function c(a,c){if(!a||"object"!=typeof a)return!1;if(a instanceof c)return!0;if(!Object.prototype.hasOwnProperty.call(c,b))throw Error(`Class "${c.name??"<unknown>"}" doesn't look like a Drizzle entity. If this is incorrect and the class is provided by Drizzle, please report this as a bug.`);let d=Object.getPrototypeOf(a).constructor;if(d)for(;d;){if(b in d&&d[b]===c[b])return!0;d=Object.getPrototypeOf(d)}return!1}Symbol.for("drizzle:hasOwnEntityKind"),a.s(["entityKind",()=>b,"is",()=>c])},77396,a=>{"use strict";var b=a.i(63227);class c{static [b.entityKind]="ColumnBuilder";config;constructor(a,b,c){this.config={name:a,keyAsName:""===a,notNull:!1,default:void 0,hasDefault:!1,primaryKey:!1,isUnique:!1,uniqueName:void 0,uniqueType:void 0,dataType:b,columnType:c,generated:void 0}}$type(){return this}notNull(){return this.config.notNull=!0,this}default(a){return this.config.default=a,this.config.hasDefault=!0,this}$defaultFn(a){return this.config.defaultFn=a,this.config.hasDefault=!0,this}$default=this.$defaultFn;$onUpdateFn(a){return this.config.onUpdateFn=a,this.config.hasDefault=!0,this}$onUpdate=this.$onUpdateFn;primaryKey(){return this.config.primaryKey=!0,this.config.notNull=!0,this}setName(a){""===this.config.name&&(this.config.name=a)}}a.s(["ColumnBuilder",()=>c])},94415,37003,a=>{"use strict";var b=a.i(63227);class c{constructor(a,b){this.table=a,this.config=b,this.name=b.name,this.keyAsName=b.keyAsName,this.notNull=b.notNull,this.default=b.default,this.defaultFn=b.defaultFn,this.onUpdateFn=b.onUpdateFn,this.hasDefault=b.hasDefault,this.primary=b.primaryKey,this.isUnique=b.isUnique,this.uniqueName=b.uniqueName,this.uniqueType=b.uniqueType,this.dataType=b.dataType,this.columnType=b.columnType,this.generated=b.generated,this.generatedIdentity=b.generatedIdentity}static [b.entityKind]="Column";name;keyAsName;primary;notNull;default;defaultFn;onUpdateFn;hasDefault;isUnique;uniqueName;uniqueType;dataType;columnType;enumValues=void 0;generated=void 0;generatedIdentity=void 0;config;mapFromDriverValue(a){return a}mapToDriverValue(a){return a}shouldDisableInsert(){return void 0!==this.config.generated&&"byDefault"!==this.config.generated.type}}a.s(["Column",()=>c],94415);let d=Symbol.for("drizzle:Name");a.s(["TableName",()=>d],37003)},96178,7231,51146,5302,4501,84113,55280,a=>{"use strict";let b,c;var d=a.i(63227),e=a.i(77396),f=a.i(94415),g=a.i(37003);class h{static [d.entityKind]="PgForeignKeyBuilder";reference;_onUpdate="no action";_onDelete="no action";constructor(a,b){this.reference=()=>{let{name:b,columns:c,foreignColumns:d}=a();return{name:b,columns:c,foreignTable:d[0].table,foreignColumns:d}},b&&(this._onUpdate=b.onUpdate,this._onDelete=b.onDelete)}onUpdate(a){return this._onUpdate=void 0===a?"no action":a,this}onDelete(a){return this._onDelete=void 0===a?"no action":a,this}build(a){return new i(a,this)}}class i{constructor(a,b){this.table=a,this.reference=b.reference,this.onUpdate=b._onUpdate,this.onDelete=b._onDelete}static [d.entityKind]="PgForeignKey";reference;onUpdate;onDelete;getName(){let{name:a,columns:b,foreignColumns:c}=this.reference(),d=b.map(a=>a.name),e=c.map(a=>a.name),f=[this.table[g.TableName],...d,c[0].table[g.TableName],...e];return a??`${f.join("_")}_fk`}}function j(a,...b){return a(...b)}function k(a,b){return`${a[g.TableName]}_${b.join("_")}_unique`}a.s(["ForeignKeyBuilder",()=>h],7231);class l{constructor(a,b){this.name=b,this.columns=a}static [d.entityKind]="PgUniqueConstraintBuilder";columns;nullsNotDistinctConfig=!1;nullsNotDistinct(){return this.nullsNotDistinctConfig=!0,this}build(a){return new n(a,this.columns,this.nullsNotDistinctConfig,this.name)}}class m{static [d.entityKind]="PgUniqueOnConstraintBuilder";name;constructor(a){this.name=a}on(...a){return new l(a,this.name)}}class n{constructor(a,b,c,d){this.table=a,this.columns=b,this.name=d??k(this.table,this.columns.map(a=>a.name)),this.nullsNotDistinct=c}static [d.entityKind]="PgUniqueConstraint";columns;name;nullsNotDistinct=!1;getName(){return this.name}}function o(a,b,c){for(let d=b;d<a.length;d++){let e=a[d];if("\\"===e){d++;continue}if('"'===e)return[a.slice(b,d).replace(/\\/g,""),d+1];if(!c&&(","===e||"}"===e))return[a.slice(b,d).replace(/\\/g,""),d]}return[a.slice(b).replace(/\\/g,""),a.length]}a.s(["UniqueConstraintBuilder",()=>l,"uniqueKeyName",()=>k],51146);class p extends e.ColumnBuilder{foreignKeyConfigs=[];static [d.entityKind]="PgColumnBuilder";array(a){return new t(this.config.name,this,a)}references(a,b={}){return this.foreignKeyConfigs.push({ref:a,actions:b}),this}unique(a,b){return this.config.isUnique=!0,this.config.uniqueName=a,this.config.uniqueType=b?.nulls,this}generatedAlwaysAs(a){return this.config.generated={as:a,type:"always",mode:"stored"},this}buildForeignKeys(a,b){return this.foreignKeyConfigs.map(({ref:c,actions:d})=>j((c,d)=>{let e=new h(()=>({columns:[a],foreignColumns:[c()]}));return d.onUpdate&&e.onUpdate(d.onUpdate),d.onDelete&&e.onDelete(d.onDelete),e.build(b)},c,d))}buildExtraConfigColumn(a){return new r(a,this.config)}}class q extends f.Column{constructor(a,b){b.uniqueName||(b.uniqueName=k(a,[b.name])),super(a,b),this.table=a}static [d.entityKind]="PgColumn"}class r extends q{static [d.entityKind]="ExtraConfigColumn";getSQLType(){return this.getSQLType()}indexConfig={order:this.config.order??"asc",nulls:this.config.nulls??"last",opClass:this.config.opClass};defaultConfig={order:"asc",nulls:"last",opClass:void 0};asc(){return this.indexConfig.order="asc",this}desc(){return this.indexConfig.order="desc",this}nullsFirst(){return this.indexConfig.nulls="first",this}nullsLast(){return this.indexConfig.nulls="last",this}op(a){return this.indexConfig.opClass=a,this}}class s{static [d.entityKind]="IndexedColumn";constructor(a,b,c,d){this.name=a,this.keyAsName=b,this.type=c,this.indexConfig=d}name;keyAsName;type;indexConfig}class t extends p{static [d.entityKind]="PgArrayBuilder";constructor(a,b,c){super(a,"array","PgArray"),this.config.baseBuilder=b,this.config.size=c}build(a){let b=this.config.baseBuilder.build(a);return new u(a,this.config,b)}}class u extends q{constructor(a,b,c,d){super(a,b),this.baseColumn=c,this.range=d,this.size=b.size}size;static [d.entityKind]="PgArray";getSQLType(){return`${this.baseColumn.getSQLType()}[${"number"==typeof this.size?this.size:""}]`}mapFromDriverValue(a){return"string"==typeof a&&(a=function(a){let[b]=function a(b,c=0){let d=[],e=c,f=!1;for(;e<b.length;){let g=b[e];if(","===g){(f||e===c)&&d.push(""),f=!0,e++;continue}if(f=!1,"\\"===g){e+=2;continue}if('"'===g){let[a,c]=o(b,e+1,!0);d.push(a),e=c;continue}if("}"===g)return[d,e+1];if("{"===g){let[c,f]=a(b,e+1);d.push(c),e=f;continue}let[h,i]=o(b,e,!1);d.push(h),e=i}return[d,e]}(a,1);return b}(a)),a.map(a=>this.baseColumn.mapFromDriverValue(a))}mapToDriverValue(a,b=!1){let c=a.map(a=>null===a?null:(0,d.is)(this.baseColumn,u)?this.baseColumn.mapToDriverValue(a,!0):this.baseColumn.mapToDriverValue(a));return b?c:function a(b){return`{${b.map(b=>Array.isArray(b)?a(b):"string"==typeof b?`"${b.replace(/\\/g,"\\\\").replace(/"/g,'\\"')}"`:`${b}`).join(",")}}`}(c)}}a.s(["IndexedColumn",()=>s,"PgColumn",()=>q,"PgColumnBuilder",()=>p],5302);class v extends p{static [d.entityKind]="PgEnumObjectColumnBuilder";constructor(a,b){super(a,"string","PgEnumObjectColumn"),this.config.enum=b}build(a){return new w(a,this.config)}}class w extends q{static [d.entityKind]="PgEnumObjectColumn";enum;enumValues=this.config.enum.enumValues;constructor(a,b){super(a,b),this.enum=b.enum}getSQLType(){return this.enum.enumName}}let x=Symbol.for("drizzle:isPgEnum");function y(a){return!!a&&"function"==typeof a&&x in a&&!0===a[x]}class z extends p{static [d.entityKind]="PgEnumColumnBuilder";constructor(a,b){super(a,"string","PgEnumColumn"),this.config.enum=b}build(a){return new A(a,this.config)}}class A extends q{static [d.entityKind]="PgEnumColumn";enum=this.config.enum;enumValues=this.config.enum.enumValues;constructor(a,b){super(a,b),this.enum=b.enum}getSQLType(){return this.enum.enumName}}a.s(["isPgEnum",()=>y],96178);class B{static [d.entityKind]="Subquery";constructor(a,b,c,d=!1,e=[]){this._={brand:"Subquery",sql:a,selectedFields:b,alias:c,isWith:d,usedTables:e}}}class C extends B{static [d.entityKind]="WithSubquery"}a.s(["Subquery",()=>B,"WithSubquery",()=>C],4501);let D={startActiveSpan:(a,d)=>b?(c||(c=b.trace.getTracer("drizzle-orm","0.44.7")),j((b,c)=>c.startActiveSpan(a,a=>{try{return d(a)}catch(c){throw a.setStatus({code:b.SpanStatusCode.ERROR,message:c instanceof Error?c.message:"Unknown error"}),c}finally{a.end()}}),b,c)):d()};a.s(["tracer",()=>D],84113);let E=Symbol.for("drizzle:ViewBaseConfig");a.s(["ViewBaseConfig",()=>E],55280)},20713,a=>{"use strict";var b=a.i(63227),c=a.i(37003);let d=Symbol.for("drizzle:Schema"),e=Symbol.for("drizzle:Columns"),f=Symbol.for("drizzle:ExtraConfigColumns"),g=Symbol.for("drizzle:OriginalName"),h=Symbol.for("drizzle:BaseName"),i=Symbol.for("drizzle:IsAlias"),j=Symbol.for("drizzle:ExtraConfigBuilder"),k=Symbol.for("drizzle:IsDrizzleTable");class l{static [b.entityKind]="Table";static Symbol={Name:c.TableName,Schema:d,OriginalName:g,Columns:e,ExtraConfigColumns:f,BaseName:h,IsAlias:i,ExtraConfigBuilder:j};[c.TableName];[g];[d];[e];[f];[h];[i]=!1;[k]=!0;[j]=void 0;constructor(a,b,e){this[c.TableName]=this[g]=a,this[d]=b,this[h]=e}}function m(a){return a[c.TableName]}function n(a){return`${a[d]??"public"}.${a[c.TableName]}`}a.s(["Columns",()=>e,"IsAlias",()=>i,"Schema",()=>d,"Table",()=>l,"getTableName",()=>m,"getTableUniqueName",()=>n])},51674,a=>{"use strict";var b,c=a.i(63227),d=a.i(96178),e=a.i(4501),f=a.i(84113),g=a.i(55280),h=a.i(94415),i=a.i(20713);class j{static [c.entityKind]="FakePrimitiveParam"}function k(a){return null!=a&&"function"==typeof a.getSQL}class l{static [c.entityKind]="StringChunk";value;constructor(a){this.value=Array.isArray(a)?a:[a]}getSQL(){return new m([this])}}class m{constructor(a){for(const b of(this.queryChunks=a,a))if((0,c.is)(b,i.Table)){const a=b[i.Table.Symbol.Schema];this.usedTables.push(void 0===a?b[i.Table.Symbol.Name]:a+"."+b[i.Table.Symbol.Name])}}static [c.entityKind]="SQL";decoder=p;shouldInlineParams=!1;usedTables=[];append(a){return this.queryChunks.push(...a.queryChunks),this}toQuery(a){return f.tracer.startActiveSpan("drizzle.buildSQL",b=>{let c=this.buildQueryFromSourceParams(this.queryChunks,a);return b?.setAttributes({"drizzle.query.text":c.sql,"drizzle.query.params":JSON.stringify(c.params)}),c})}buildQueryFromSourceParams(a,b){let f=Object.assign({},b,{inlineParams:b.inlineParams||this.shouldInlineParams,paramStartIndex:b.paramStartIndex||{value:0}}),{casing:j,escapeName:o,escapeParam:p,prepareTyping:q,inlineParams:s,paramStartIndex:t}=f;var u=a.map(a=>{if((0,c.is)(a,l))return{sql:a.value.join(""),params:[]};if((0,c.is)(a,n))return{sql:o(a.value),params:[]};if(void 0===a)return{sql:"",params:[]};if(Array.isArray(a)){let b=[new l("(")];for(let[c,d]of a.entries())b.push(d),c<a.length-1&&b.push(new l(", "));return b.push(new l(")")),this.buildQueryFromSourceParams(b,f)}if((0,c.is)(a,m))return this.buildQueryFromSourceParams(a.queryChunks,{...f,inlineParams:s||a.shouldInlineParams});if((0,c.is)(a,i.Table)){let b=a[i.Table.Symbol.Schema],c=a[i.Table.Symbol.Name];return{sql:void 0===b||a[i.IsAlias]?o(c):o(b)+"."+o(c),params:[]}}if((0,c.is)(a,h.Column)){let c=j.getColumnCasing(a);if("indexes"===b.invokeSource)return{sql:o(c),params:[]};let d=a.table[i.Table.Symbol.Schema];return{sql:a.table[i.IsAlias]||void 0===d?o(a.table[i.Table.Symbol.Name])+"."+o(c):o(d)+"."+o(a.table[i.Table.Symbol.Name])+"."+o(c),params:[]}}if((0,c.is)(a,y)){let b=a[g.ViewBaseConfig].schema,c=a[g.ViewBaseConfig].name;return{sql:void 0===b||a[g.ViewBaseConfig].isAlias?o(c):o(b)+"."+o(c),params:[]}}if((0,c.is)(a,r)){if((0,c.is)(a.value,v))return{sql:p(t.value++,a),params:[a],typings:["none"]};let b=null===a.value?null:a.encoder.mapToDriverValue(a.value);if((0,c.is)(b,m))return this.buildQueryFromSourceParams([b],f);if(s)return{sql:this.mapInlineParam(b,f),params:[]};let d=["none"];return q&&(d=[q(a.encoder)]),{sql:p(t.value++,b),params:[b],typings:d}}return(0,c.is)(a,v)?{sql:p(t.value++,a),params:[a],typings:["none"]}:(0,c.is)(a,m.Aliased)&&void 0!==a.fieldAlias?{sql:o(a.fieldAlias),params:[]}:(0,c.is)(a,e.Subquery)?a._.isWith?{sql:o(a._.alias),params:[]}:this.buildQueryFromSourceParams([new l("("),a._.sql,new l(") "),new n(a._.alias)],f):(0,d.isPgEnum)(a)?a.schema?{sql:o(a.schema)+"."+o(a.enumName),params:[]}:{sql:o(a.enumName),params:[]}:k(a)?a.shouldOmitSQLParens?.()?this.buildQueryFromSourceParams([a.getSQL()],f):this.buildQueryFromSourceParams([new l("("),a.getSQL(),new l(")")],f):s?{sql:this.mapInlineParam(a,f),params:[]}:{sql:p(t.value++,a),params:[a],typings:["none"]}});let w={sql:"",params:[]};for(let a of u)w.sql+=a.sql,w.params.push(...a.params),a.typings?.length&&(w.typings||(w.typings=[]),w.typings.push(...a.typings));return w}mapInlineParam(a,{escapeString:b}){if(null===a)return"null";if("number"==typeof a||"boolean"==typeof a)return a.toString();if("string"==typeof a)return b(a);if("object"==typeof a){let c=a.toString();return"[object Object]"===c?b(JSON.stringify(a)):b(c)}throw Error("Unexpected param value: "+a)}getSQL(){return this}as(a){return void 0===a?this:new m.Aliased(this,a)}mapWith(a){return this.decoder="function"==typeof a?{mapFromDriverValue:a}:a,this}inlineParams(){return this.shouldInlineParams=!0,this}if(a){return a?this:void 0}}class n{constructor(a){this.value=a}static [c.entityKind]="Name";brand;getSQL(){return new m([this])}}function o(a){return"object"==typeof a&&null!==a&&"mapToDriverValue"in a&&"function"==typeof a.mapToDriverValue}let p={mapFromDriverValue:a=>a},q={mapToDriverValue:a=>a};({...p,...q});class r{constructor(a,b=q){this.value=a,this.encoder=b}static [c.entityKind]="Param";brand;getSQL(){return new m([this])}}function s(a,...b){let c=[];for(let[d,e]of((b.length>0||a.length>0&&""!==a[0])&&c.push(new l(a[0])),b.entries()))c.push(e,new l(a[d+1]));return new m(c)}(b=s||(s={})).empty=function(){return new m([])},b.fromList=function(a){return new m(a)},b.raw=function(a){return new m([new l(a)])},b.join=function(a,b){let c=[];for(let[d,e]of a.entries())d>0&&void 0!==b&&c.push(b),c.push(e);return new m(c)},b.identifier=function(a){return new n(a)},b.placeholder=function(a){return new v(a)},b.param=function(a,b){return new r(a,b)};var t=m||(m={});class u{constructor(a,b){this.sql=a,this.fieldAlias=b}static [c.entityKind]="SQL.Aliased";isSelectionField=!1;getSQL(){return this.sql}clone(){return new u(this.sql,this.fieldAlias)}}t.Aliased=u;class v{constructor(a){this.name=a}static [c.entityKind]="Placeholder";getSQL(){return new m([this])}}function w(a,b){return a.map(a=>{if((0,c.is)(a,v)){if(!(a.name in b))throw Error(`No value for placeholder "${a.name}" was provided`);return b[a.name]}if((0,c.is)(a,r)&&(0,c.is)(a.value,v)){if(!(a.value.name in b))throw Error(`No value for placeholder "${a.value.name}" was provided`);return a.encoder.mapToDriverValue(b[a.value.name])}return a})}let x=Symbol.for("drizzle:IsDrizzleView");class y{static [c.entityKind]="View";[g.ViewBaseConfig];[x]=!0;constructor({name:a,schema:b,selectedFields:c,query:d}){this[g.ViewBaseConfig]={name:a,originalName:a,schema:b,selectedFields:c,query:d,isExisting:!d,isAlias:!1}}getSQL(){return new m([this])}}h.Column.prototype.getSQL=function(){return new m([this])},i.Table.prototype.getSQL=function(){return new m([this])},e.Subquery.prototype.getSQL=function(){return new m([this])},a.s(["Param",()=>r,"Placeholder",()=>v,"SQL",()=>m,"StringChunk",()=>l,"View",()=>y,"fillPlaceholders",()=>w,"isDriverValueEncoder",()=>o,"isSQLWrapper",()=>k,"sql",()=>s])},89221,86096,44551,90714,97122,56564,83217,602,65105,952,99450,31793,18830,57833,74619,a=>{"use strict";var b=a.i(51674),c=a.i(63227),d=a.i(5302);class e{constructor(a,b){this.unique=a,this.name=b}static [c.entityKind]="PgIndexBuilderOn";on(...a){return new f(a.map(a=>{if((0,c.is)(a,b.SQL))return a;let e=new d.IndexedColumn(a.name,!!a.keyAsName,a.columnType,a.indexConfig);return a.indexConfig=JSON.parse(JSON.stringify(a.defaultConfig)),e}),this.unique,!1,this.name)}onOnly(...a){return new f(a.map(a=>{if((0,c.is)(a,b.SQL))return a;let e=new d.IndexedColumn(a.name,!!a.keyAsName,a.columnType,a.indexConfig);return a.indexConfig=a.defaultConfig,e}),this.unique,!0,this.name)}using(a,...e){return new f(e.map(a=>{if((0,c.is)(a,b.SQL))return a;let e=new d.IndexedColumn(a.name,!!a.keyAsName,a.columnType,a.indexConfig);return a.indexConfig=JSON.parse(JSON.stringify(a.defaultConfig)),e}),this.unique,!0,this.name,a)}}class f{static [c.entityKind]="PgIndexBuilder";config;constructor(a,b,c,d,e="btree"){this.config={name:d,columns:a,unique:b,only:c,method:e}}concurrently(){return this.config.concurrently=!0,this}with(a){return this.config.with=a,this}where(a){return this.config.where=a,this}build(a){return new g(this.config,a)}}class g{static [c.entityKind]="PgIndex";config;constructor(a,b){this.config={...a,table:b}}}function h(a){return new e(!1,a)}a.s(["IndexBuilder",()=>f,"index",()=>h],89221);var i=d,j=d;class k extends j.PgColumnBuilder{static [c.entityKind]="PgIntColumnBaseBuilder";generatedAlwaysAsIdentity(a){if(a){let{name:b,...c}=a;this.config.generatedIdentity={type:"always",sequenceName:b,sequenceOptions:c}}else this.config.generatedIdentity={type:"always"};return this.config.hasDefault=!0,this.config.notNull=!0,this}generatedByDefaultAsIdentity(a){if(a){let{name:b,...c}=a;this.config.generatedIdentity={type:"byDefault",sequenceName:b,sequenceOptions:c}}else this.config.generatedIdentity={type:"byDefault"};return this.config.hasDefault=!0,this.config.notNull=!0,this}}class l extends k{static [c.entityKind]="PgIntegerBuilder";constructor(a){super(a,"number","PgInteger")}build(a){return new m(a,this.config)}}class m extends i.PgColumn{static [c.entityKind]="PgInteger";getSQLType(){return"integer"}mapFromDriverValue(a){return"string"==typeof a?Number.parseInt(a):a}}function n(a){return new l(a??"")}a.s(["integer",()=>n],86096);var o=a.i(94415),p=a.i(4501),q=a.i(20713),r=a.i(55280);function s(a,d,e){let f={},g=a.reduce((a,{path:g,field:h},i)=>{let j;j=(0,c.is)(h,o.Column)?h:(0,c.is)(h,b.SQL)?h.decoder:h.sql.decoder;let k=a;for(let[a,b]of g.entries())if(a<g.length-1)b in k||(k[b]={}),k=k[b];else{let a=d[i],l=k[b]=null===a?null:j.mapFromDriverValue(a);if(e&&(0,c.is)(h,o.Column)&&2===g.length){let a=g[0];a in f?"string"==typeof f[a]&&f[a]!==(0,q.getTableName)(h.table)&&(f[a]=!1):f[a]=null===l&&(0,q.getTableName)(h.table)}}return a},{});if(e&&Object.keys(f).length>0)for(let[a,b]of Object.entries(f))"string"!=typeof b||e[b]||(g[a]=null);return g}function t(a,b){let c=Object.keys(a),d=Object.keys(b);if(c.length!==d.length)return!1;for(let[a,b]of c.entries())if(b!==d[a])return!1;return!0}function u(a,d){let e=Object.entries(d).filter(([,a])=>void 0!==a).map(([d,e])=>(0,c.is)(e,b.SQL)||(0,c.is)(e,o.Column)?[d,e]:[d,new b.Param(e,a[q.Table.Symbol.Columns][d])]);if(0===e.length)throw Error("No values to set");return Object.fromEntries(e)}function v(a,b){for(let c of b)for(let b of Object.getOwnPropertyNames(c.prototype))"constructor"!==b&&Object.defineProperty(a.prototype,b,Object.getOwnPropertyDescriptor(c.prototype,b)||Object.create(null))}function w(a){return a[q.Table.Symbol.Columns]}function x(a){return(0,c.is)(a,p.Subquery)?a._.alias:(0,c.is)(a,b.View)?a[r.ViewBaseConfig].name:(0,c.is)(a,b.SQL)?void 0:a[q.Table.Symbol.IsAlias]?a[q.Table.Symbol.Name]:a[q.Table.Symbol.BaseName]}function y(a,b){return{name:"string"==typeof a&&a.length>0?a:"",config:"object"==typeof a?a:b}}function z(a){if("object"!=typeof a||null===a||"Object"!==a.constructor.name)return!1;if("logger"in a){let b=typeof a.logger;return"boolean"===b||"object"===b&&"function"==typeof a.logger.logQuery||"undefined"===b}if("schema"in a){let b=typeof a.schema;return"object"===b||"undefined"===b}if("casing"in a){let b=typeof a.casing;return"string"===b||"undefined"===b}if("mode"in a)return"default"===a.mode&&"planetscale"===a.mode&&void 0===a.mode;if("connection"in a){let b=typeof a.connection;return"string"===b||"object"===b||"undefined"===b}if("client"in a){let b=typeof a.client;return"object"===b||"function"===b||"undefined"===b}return 0===Object.keys(a).length}"undefined"==typeof TextDecoder||new TextDecoder,a.s(["applyMixins",()=>v,"getColumnNameAndConfig",()=>y,"getTableColumns",()=>w,"getTableLikeName",()=>x,"haveSameKeys",()=>t,"isConfig",()=>z,"mapResultRow",()=>s,"mapUpdateSet",()=>u,"orderSelectedFields",()=>function a(d,e){return Object.entries(d).reduce((d,[f,g])=>{if("string"!=typeof f)return d;let h=e?[...e,f]:[f];return(0,c.is)(g,o.Column)||(0,c.is)(g,b.SQL)||(0,c.is)(g,b.SQL.Aliased)?d.push({path:h,field:g}):(0,c.is)(g,q.Table)?d.push(...a(g[q.Table.Symbol.Columns],h)):d.push(...a(g,h)),d},[])}],44551);var A=d;class B extends A.PgColumnBuilder{static [c.entityKind]="PgNumericBuilder";constructor(a,b,c){super(a,"string","PgNumeric"),this.config.precision=b,this.config.scale=c}build(a){return new C(a,this.config)}}class C extends A.PgColumn{static [c.entityKind]="PgNumeric";precision;scale;constructor(a,b){super(a,b),this.precision=b.precision,this.scale=b.scale}mapFromDriverValue(a){return"string"==typeof a?a:String(a)}getSQLType(){return void 0!==this.precision&&void 0!==this.scale?`numeric(${this.precision}, ${this.scale})`:void 0===this.precision?"numeric":`numeric(${this.precision})`}}class D extends A.PgColumnBuilder{static [c.entityKind]="PgNumericNumberBuilder";constructor(a,b,c){super(a,"number","PgNumericNumber"),this.config.precision=b,this.config.scale=c}build(a){return new E(a,this.config)}}class E extends A.PgColumn{static [c.entityKind]="PgNumericNumber";precision;scale;constructor(a,b){super(a,b),this.precision=b.precision,this.scale=b.scale}mapFromDriverValue(a){return"number"==typeof a?a:Number(a)}mapToDriverValue=String;getSQLType(){return void 0!==this.precision&&void 0!==this.scale?`numeric(${this.precision}, ${this.scale})`:void 0===this.precision?"numeric":`numeric(${this.precision})`}}class F extends A.PgColumnBuilder{static [c.entityKind]="PgNumericBigIntBuilder";constructor(a,b,c){super(a,"bigint","PgNumericBigInt"),this.config.precision=b,this.config.scale=c}build(a){return new G(a,this.config)}}class G extends A.PgColumn{static [c.entityKind]="PgNumericBigInt";precision;scale;constructor(a,b){super(a,b),this.precision=b.precision,this.scale=b.scale}mapFromDriverValue=BigInt;mapToDriverValue=String;getSQLType(){return void 0!==this.precision&&void 0!==this.scale?`numeric(${this.precision}, ${this.scale})`:void 0===this.precision?"numeric":`numeric(${this.precision})`}}function H(a,b){let{name:c,config:d}=y(a,b),e=d?.mode;return"number"===e?new D(c,d?.precision,d?.scale):"bigint"===e?new F(c,d?.precision,d?.scale):new B(c,d?.precision,d?.scale)}a.s(["PgNumeric",()=>C,"numeric",()=>H],90714);var I=q,J=d;class K extends k{static [c.entityKind]="PgBigInt53Builder";constructor(a){super(a,"number","PgBigInt53")}build(a){return new L(a,this.config)}}class L extends J.PgColumn{static [c.entityKind]="PgBigInt53";getSQLType(){return"bigint"}mapFromDriverValue(a){return"number"==typeof a?a:Number(a)}}class M extends k{static [c.entityKind]="PgBigInt64Builder";constructor(a){super(a,"bigint","PgBigInt64")}build(a){return new N(a,this.config)}}class N extends J.PgColumn{static [c.entityKind]="PgBigInt64";getSQLType(){return"bigint"}mapFromDriverValue(a){return BigInt(a)}}function O(a,b){let{name:c,config:d}=y(a,b);return"number"===d.mode?new K(c):new M(c)}var P=d;class Q extends P.PgColumnBuilder{static [c.entityKind]="PgBigSerial53Builder";constructor(a){super(a,"number","PgBigSerial53"),this.config.hasDefault=!0,this.config.notNull=!0}build(a){return new R(a,this.config)}}class R extends P.PgColumn{static [c.entityKind]="PgBigSerial53";getSQLType(){return"bigserial"}mapFromDriverValue(a){return"number"==typeof a?a:Number(a)}}class S extends P.PgColumnBuilder{static [c.entityKind]="PgBigSerial64Builder";constructor(a){super(a,"bigint","PgBigSerial64"),this.config.hasDefault=!0}build(a){return new T(a,this.config)}}class T extends P.PgColumn{static [c.entityKind]="PgBigSerial64";getSQLType(){return"bigserial"}mapFromDriverValue(a){return BigInt(a)}}function U(a,b){let{name:c,config:d}=y(a,b);return"number"===d.mode?new Q(c):new S(c)}var V=d;class W extends V.PgColumnBuilder{static [c.entityKind]="PgBooleanBuilder";constructor(a){super(a,"boolean","PgBoolean")}build(a){return new X(a,this.config)}}class X extends V.PgColumn{static [c.entityKind]="PgBoolean";getSQLType(){return"boolean"}}function Y(a){return new W(a??"")}var Z=d;class $ extends Z.PgColumnBuilder{static [c.entityKind]="PgCharBuilder";constructor(a,b){super(a,"string","PgChar"),this.config.length=b.length,this.config.enumValues=b.enum}build(a){return new _(a,this.config)}}class _ extends Z.PgColumn{static [c.entityKind]="PgChar";length=this.config.length;enumValues=this.config.enumValues;getSQLType(){return void 0===this.length?"char":`char(${this.length})`}}function aa(a,b={}){let{name:c,config:d}=y(a,b);return new $(c,d)}var ab=d;class ac extends ab.PgColumnBuilder{static [c.entityKind]="PgCidrBuilder";constructor(a){super(a,"string","PgCidr")}build(a){return new ad(a,this.config)}}class ad extends ab.PgColumn{static [c.entityKind]="PgCidr";getSQLType(){return"cidr"}}function ae(a){return new ac(a??"")}var af=d;class ag extends af.PgColumnBuilder{static [c.entityKind]="PgCustomColumnBuilder";constructor(a,b,c){super(a,"custom","PgCustomColumn"),this.config.fieldConfig=b,this.config.customTypeParams=c}build(a){return new ah(a,this.config)}}class ah extends af.PgColumn{static [c.entityKind]="PgCustomColumn";sqlName;mapTo;mapFrom;constructor(a,b){super(a,b),this.sqlName=b.customTypeParams.dataType(b.fieldConfig),this.mapTo=b.customTypeParams.toDriver,this.mapFrom=b.customTypeParams.fromDriver}getSQLType(){return this.sqlName}mapFromDriverValue(a){return"function"==typeof this.mapFrom?this.mapFrom(a):a}mapToDriverValue(a){return"function"==typeof this.mapTo?this.mapTo(a):a}}function ai(a){return(b,c)=>{let{name:d,config:e}=y(b,c);return new ag(d,e,a)}}var aj=d,ak=d;class al extends ak.PgColumnBuilder{static [c.entityKind]="PgDateColumnBaseBuilder";defaultNow(){return this.default(b.sql`now()`)}}class am extends al{static [c.entityKind]="PgDateBuilder";constructor(a){super(a,"date","PgDate")}build(a){return new an(a,this.config)}}class an extends aj.PgColumn{static [c.entityKind]="PgDate";getSQLType(){return"date"}mapFromDriverValue(a){return new Date(a)}mapToDriverValue(a){return a.toISOString()}}class ao extends al{static [c.entityKind]="PgDateStringBuilder";constructor(a){super(a,"string","PgDateString")}build(a){return new ap(a,this.config)}}class ap extends aj.PgColumn{static [c.entityKind]="PgDateString";getSQLType(){return"date"}}function aq(a,b){let{name:c,config:d}=y(a,b);return d?.mode==="date"?new am(c):new ao(c)}a.s(["PgDate",()=>an,"PgDateString",()=>ap,"date",()=>aq],97122);var ar=d;class as extends ar.PgColumnBuilder{static [c.entityKind]="PgDoublePrecisionBuilder";constructor(a){super(a,"number","PgDoublePrecision")}build(a){return new at(a,this.config)}}class at extends ar.PgColumn{static [c.entityKind]="PgDoublePrecision";getSQLType(){return"double precision"}mapFromDriverValue(a){return"string"==typeof a?Number.parseFloat(a):a}}function au(a){return new as(a??"")}var av=d;class aw extends av.PgColumnBuilder{static [c.entityKind]="PgInetBuilder";constructor(a){super(a,"string","PgInet")}build(a){return new ax(a,this.config)}}class ax extends av.PgColumn{static [c.entityKind]="PgInet";getSQLType(){return"inet"}}function ay(a){return new aw(a??"")}var az=d;class aA extends az.PgColumnBuilder{static [c.entityKind]="PgIntervalBuilder";constructor(a,b){super(a,"string","PgInterval"),this.config.intervalConfig=b}build(a){return new aB(a,this.config)}}class aB extends az.PgColumn{static [c.entityKind]="PgInterval";fields=this.config.intervalConfig.fields;precision=this.config.intervalConfig.precision;getSQLType(){let a=this.fields?` ${this.fields}`:"",b=this.precision?`(${this.precision})`:"";return`interval${a}${b}`}}function aC(a,b={}){let{name:c,config:d}=y(a,b);return new aA(c,d)}var aD=d;class aE extends aD.PgColumnBuilder{static [c.entityKind]="PgJsonBuilder";constructor(a){super(a,"json","PgJson")}build(a){return new aF(a,this.config)}}class aF extends aD.PgColumn{static [c.entityKind]="PgJson";constructor(a,b){super(a,b)}getSQLType(){return"json"}mapToDriverValue(a){return JSON.stringify(a)}mapFromDriverValue(a){if("string"==typeof a)try{return JSON.parse(a)}catch{}return a}}function aG(a){return new aE(a??"")}a.s(["PgJson",()=>aF,"json",()=>aG],56564);var aH=d;class aI extends aH.PgColumnBuilder{static [c.entityKind]="PgJsonbBuilder";constructor(a){super(a,"json","PgJsonb")}build(a){return new aJ(a,this.config)}}class aJ extends aH.PgColumn{static [c.entityKind]="PgJsonb";constructor(a,b){super(a,b)}getSQLType(){return"jsonb"}mapToDriverValue(a){return JSON.stringify(a)}mapFromDriverValue(a){if("string"==typeof a)try{return JSON.parse(a)}catch{}return a}}function aK(a){return new aI(a??"")}a.s(["PgJsonb",()=>aJ,"jsonb",()=>aK],83217);var aL=d;class aM extends aL.PgColumnBuilder{static [c.entityKind]="PgLineBuilder";constructor(a){super(a,"array","PgLine")}build(a){return new aN(a,this.config)}}class aN extends aL.PgColumn{static [c.entityKind]="PgLine";getSQLType(){return"line"}mapFromDriverValue(a){let[b,c,d]=a.slice(1,-1).split(",");return[Number.parseFloat(b),Number.parseFloat(c),Number.parseFloat(d)]}mapToDriverValue(a){return`{${a[0]},${a[1]},${a[2]}}`}}class aO extends aL.PgColumnBuilder{static [c.entityKind]="PgLineABCBuilder";constructor(a){super(a,"json","PgLineABC")}build(a){return new aP(a,this.config)}}class aP extends aL.PgColumn{static [c.entityKind]="PgLineABC";getSQLType(){return"line"}mapFromDriverValue(a){let[b,c,d]=a.slice(1,-1).split(",");return{a:Number.parseFloat(b),b:Number.parseFloat(c),c:Number.parseFloat(d)}}mapToDriverValue(a){return`{${a.a},${a.b},${a.c}}`}}function aQ(a,b){let{name:c,config:d}=y(a,b);return d?.mode&&"tuple"!==d.mode?new aO(c):new aM(c)}var aR=d;class aS extends aR.PgColumnBuilder{static [c.entityKind]="PgMacaddrBuilder";constructor(a){super(a,"string","PgMacaddr")}build(a){return new aT(a,this.config)}}class aT extends aR.PgColumn{static [c.entityKind]="PgMacaddr";getSQLType(){return"macaddr"}}function aU(a){return new aS(a??"")}var aV=d;class aW extends aV.PgColumnBuilder{static [c.entityKind]="PgMacaddr8Builder";constructor(a){super(a,"string","PgMacaddr8")}build(a){return new aX(a,this.config)}}class aX extends aV.PgColumn{static [c.entityKind]="PgMacaddr8";getSQLType(){return"macaddr8"}}function aY(a){return new aW(a??"")}var aZ=d;class a$ extends aZ.PgColumnBuilder{static [c.entityKind]="PgPointTupleBuilder";constructor(a){super(a,"array","PgPointTuple")}build(a){return new a_(a,this.config)}}class a_ extends aZ.PgColumn{static [c.entityKind]="PgPointTuple";getSQLType(){return"point"}mapFromDriverValue(a){if("string"==typeof a){let[b,c]=a.slice(1,-1).split(",");return[Number.parseFloat(b),Number.parseFloat(c)]}return[a.x,a.y]}mapToDriverValue(a){return`(${a[0]},${a[1]})`}}class a0 extends aZ.PgColumnBuilder{static [c.entityKind]="PgPointObjectBuilder";constructor(a){super(a,"json","PgPointObject")}build(a){return new a1(a,this.config)}}class a1 extends aZ.PgColumn{static [c.entityKind]="PgPointObject";getSQLType(){return"point"}mapFromDriverValue(a){if("string"==typeof a){let[b,c]=a.slice(1,-1).split(",");return{x:Number.parseFloat(b),y:Number.parseFloat(c)}}return a}mapToDriverValue(a){return`(${a.x},${a.y})`}}function a2(a,b){let{name:c,config:d}=y(a,b);return d?.mode&&"tuple"!==d.mode?new a0(c):new a$(c)}var a3=d;function a4(a,b){let c=new DataView(new ArrayBuffer(8));for(let d=0;d<8;d++)c.setUint8(d,a[b+d]);return c.getFloat64(0,!0)}function a5(a){let b=function(a){let b=[];for(let c=0;c<a.length;c+=2)b.push(Number.parseInt(a.slice(c,c+2),16));return new Uint8Array(b)}(a),c=0,d=b[0];c+=1;let e=new DataView(b.buffer),f=e.getUint32(c,1===d);if(c+=4,0x20000000&f&&(e.getUint32(c,1===d),c+=4),(65535&f)==1){let a=a4(b,c),d=a4(b,c+=8);return c+=8,[a,d]}throw Error("Unsupported geometry type")}class a6 extends a3.PgColumnBuilder{static [c.entityKind]="PgGeometryBuilder";constructor(a){super(a,"array","PgGeometry")}build(a){return new a7(a,this.config)}}class a7 extends a3.PgColumn{static [c.entityKind]="PgGeometry";getSQLType(){return"geometry(point)"}mapFromDriverValue(a){return a5(a)}mapToDriverValue(a){return`point(${a[0]} ${a[1]})`}}class a8 extends a3.PgColumnBuilder{static [c.entityKind]="PgGeometryObjectBuilder";constructor(a){super(a,"json","PgGeometryObject")}build(a){return new a9(a,this.config)}}class a9 extends a3.PgColumn{static [c.entityKind]="PgGeometryObject";getSQLType(){return"geometry(point)"}mapFromDriverValue(a){let b=a5(a);return{x:b[0],y:b[1]}}mapToDriverValue(a){return`point(${a.x} ${a.y})`}}function ba(a,b){let{name:c,config:d}=y(a,b);return d?.mode&&"tuple"!==d.mode?new a8(c):new a6(c)}var bb=d;class bc extends bb.PgColumnBuilder{static [c.entityKind]="PgRealBuilder";constructor(a,b){super(a,"number","PgReal"),this.config.length=b}build(a){return new bd(a,this.config)}}class bd extends bb.PgColumn{static [c.entityKind]="PgReal";constructor(a,b){super(a,b)}getSQLType(){return"real"}mapFromDriverValue=a=>"string"==typeof a?Number.parseFloat(a):a}function be(a){return new bc(a??"")}var bf=d;class bg extends bf.PgColumnBuilder{static [c.entityKind]="PgSerialBuilder";constructor(a){super(a,"number","PgSerial"),this.config.hasDefault=!0,this.config.notNull=!0}build(a){return new bh(a,this.config)}}class bh extends bf.PgColumn{static [c.entityKind]="PgSerial";getSQLType(){return"serial"}}function bi(a){return new bg(a??"")}a.s(["serial",()=>bi],602);var bj=d;class bk extends k{static [c.entityKind]="PgSmallIntBuilder";constructor(a){super(a,"number","PgSmallInt")}build(a){return new bl(a,this.config)}}class bl extends bj.PgColumn{static [c.entityKind]="PgSmallInt";getSQLType(){return"smallint"}mapFromDriverValue=a=>"string"==typeof a?Number(a):a}function bm(a){return new bk(a??"")}var bn=d;class bo extends bn.PgColumnBuilder{static [c.entityKind]="PgSmallSerialBuilder";constructor(a){super(a,"number","PgSmallSerial"),this.config.hasDefault=!0,this.config.notNull=!0}build(a){return new bp(a,this.config)}}class bp extends bn.PgColumn{static [c.entityKind]="PgSmallSerial";getSQLType(){return"smallserial"}}function bq(a){return new bo(a??"")}var br=d;class bs extends br.PgColumnBuilder{static [c.entityKind]="PgTextBuilder";constructor(a,b){super(a,"string","PgText"),this.config.enumValues=b.enum}build(a){return new bt(a,this.config)}}class bt extends br.PgColumn{static [c.entityKind]="PgText";enumValues=this.config.enumValues;getSQLType(){return"text"}}function bu(a,b={}){let{name:c,config:d}=y(a,b);return new bs(c,d)}a.s(["text",()=>bu],65105);var bv=d;class bw extends al{constructor(a,b,c){super(a,"string","PgTime"),this.withTimezone=b,this.precision=c,this.config.withTimezone=b,this.config.precision=c}static [c.entityKind]="PgTimeBuilder";build(a){return new bx(a,this.config)}}class bx extends bv.PgColumn{static [c.entityKind]="PgTime";withTimezone;precision;constructor(a,b){super(a,b),this.withTimezone=b.withTimezone,this.precision=b.precision}getSQLType(){let a=void 0===this.precision?"":`(${this.precision})`;return`time${a}${this.withTimezone?" with time zone":""}`}}function by(a,b={}){let{name:c,config:d}=y(a,b);return new bw(c,d.withTimezone??!1,d.precision)}a.s(["PgTime",()=>bx,"time",()=>by],952);var bz=d;class bA extends al{static [c.entityKind]="PgTimestampBuilder";constructor(a,b,c){super(a,"date","PgTimestamp"),this.config.withTimezone=b,this.config.precision=c}build(a){return new bB(a,this.config)}}class bB extends bz.PgColumn{static [c.entityKind]="PgTimestamp";withTimezone;precision;constructor(a,b){super(a,b),this.withTimezone=b.withTimezone,this.precision=b.precision}getSQLType(){let a=void 0===this.precision?"":` (${this.precision})`;return`timestamp${a}${this.withTimezone?" with time zone":""}`}mapFromDriverValue=a=>new Date(this.withTimezone?a:a+"+0000");mapToDriverValue=a=>a.toISOString()}class bC extends al{static [c.entityKind]="PgTimestampStringBuilder";constructor(a,b,c){super(a,"string","PgTimestampString"),this.config.withTimezone=b,this.config.precision=c}build(a){return new bD(a,this.config)}}class bD extends bz.PgColumn{static [c.entityKind]="PgTimestampString";withTimezone;precision;constructor(a,b){super(a,b),this.withTimezone=b.withTimezone,this.precision=b.precision}getSQLType(){let a=void 0===this.precision?"":`(${this.precision})`;return`timestamp${a}${this.withTimezone?" with time zone":""}`}}function bE(a,b={}){let{name:c,config:d}=y(a,b);return d?.mode==="string"?new bC(c,d.withTimezone??!1,d.precision):new bA(c,d?.withTimezone??!1,d?.precision)}a.s(["PgTimestamp",()=>bB,"PgTimestampString",()=>bD,"timestamp",()=>bE],99450);var bF=d;class bG extends bF.PgColumnBuilder{static [c.entityKind]="PgUUIDBuilder";constructor(a){super(a,"string","PgUUID")}defaultRandom(){return this.default(b.sql`gen_random_uuid()`)}build(a){return new bH(a,this.config)}}class bH extends bF.PgColumn{static [c.entityKind]="PgUUID";getSQLType(){return"uuid"}}function bI(a){return new bG(a??"")}a.s(["PgUUID",()=>bH,"uuid",()=>bI],31793);var bJ=d;class bK extends bJ.PgColumnBuilder{static [c.entityKind]="PgVarcharBuilder";constructor(a,b){super(a,"string","PgVarchar"),this.config.length=b.length,this.config.enumValues=b.enum}build(a){return new bL(a,this.config)}}class bL extends bJ.PgColumn{static [c.entityKind]="PgVarchar";length=this.config.length;enumValues=this.config.enumValues;getSQLType(){return void 0===this.length?"varchar":`varchar(${this.length})`}}function bM(a,b={}){let{name:c,config:d}=y(a,b);return new bK(c,d)}a.s(["varchar",()=>bM],18830);var bN=d;class bO extends bN.PgColumnBuilder{static [c.entityKind]="PgBinaryVectorBuilder";constructor(a,b){super(a,"string","PgBinaryVector"),this.config.dimensions=b.dimensions}build(a){return new bP(a,this.config)}}class bP extends bN.PgColumn{static [c.entityKind]="PgBinaryVector";dimensions=this.config.dimensions;getSQLType(){return`bit(${this.dimensions})`}}function bQ(a,b){let{name:c,config:d}=y(a,b);return new bO(c,d)}var bR=d;class bS extends bR.PgColumnBuilder{static [c.entityKind]="PgHalfVectorBuilder";constructor(a,b){super(a,"array","PgHalfVector"),this.config.dimensions=b.dimensions}build(a){return new bT(a,this.config)}}class bT extends bR.PgColumn{static [c.entityKind]="PgHalfVector";dimensions=this.config.dimensions;getSQLType(){return`halfvec(${this.dimensions})`}mapToDriverValue(a){return JSON.stringify(a)}mapFromDriverValue(a){return a.slice(1,-1).split(",").map(a=>Number.parseFloat(a))}}function bU(a,b){let{name:c,config:d}=y(a,b);return new bS(c,d)}var bV=d;class bW extends bV.PgColumnBuilder{static [c.entityKind]="PgSparseVectorBuilder";constructor(a,b){super(a,"string","PgSparseVector"),this.config.dimensions=b.dimensions}build(a){return new bX(a,this.config)}}class bX extends bV.PgColumn{static [c.entityKind]="PgSparseVector";dimensions=this.config.dimensions;getSQLType(){return`sparsevec(${this.dimensions})`}}function bY(a,b){let{name:c,config:d}=y(a,b);return new bW(c,d)}var bZ=d;class b$ extends bZ.PgColumnBuilder{static [c.entityKind]="PgVectorBuilder";constructor(a,b){super(a,"array","PgVector"),this.config.dimensions=b.dimensions}build(a){return new b_(a,this.config)}}class b_ extends bZ.PgColumn{static [c.entityKind]="PgVector";dimensions=this.config.dimensions;getSQLType(){return`vector(${this.dimensions})`}mapToDriverValue(a){return JSON.stringify(a)}mapFromDriverValue(a){return a.slice(1,-1).split(",").map(a=>Number.parseFloat(a))}}function b0(a,b){let{name:c,config:d}=y(a,b);return new b$(c,d)}let b1=Symbol.for("drizzle:PgInlineForeignKeys"),b2=Symbol.for("drizzle:EnableRLS");class b3 extends I.Table{static [c.entityKind]="PgTable";static Symbol=Object.assign({},I.Table.Symbol,{InlineForeignKeys:b1,EnableRLS:b2});[b1]=[];[b2]=!1;[I.Table.Symbol.ExtraConfigBuilder]=void 0;[I.Table.Symbol.ExtraConfigColumns]={}}let b4=(a,b,c)=>(function(a,b,c,d,e=a){let f=new b3(a,d,e),g="function"==typeof b?b({bigint:O,bigserial:U,boolean:Y,char:aa,cidr:ae,customType:ai,date:aq,doublePrecision:au,inet:ay,integer:n,interval:aC,json:aG,jsonb:aK,line:aQ,macaddr:aU,macaddr8:aY,numeric:H,point:a2,geometry:ba,real:be,serial:bi,smallint:bm,smallserial:bq,text:bu,time:by,timestamp:bE,uuid:bI,varchar:bM,bit:bQ,halfvec:bU,sparsevec:bY,vector:b0}):b,h=Object.fromEntries(Object.entries(g).map(([a,b])=>{b.setName(a);let c=b.build(f);return f[b1].push(...b.buildForeignKeys(c,f)),[a,c]})),i=Object.fromEntries(Object.entries(g).map(([a,b])=>(b.setName(a),[a,b.buildExtraConfigColumn(f)]))),j=Object.assign(f,h);return j[I.Table.Symbol.Columns]=h,j[I.Table.Symbol.ExtraConfigColumns]=i,c&&(j[b3.Symbol.ExtraConfigBuilder]=c),Object.assign(j,{enableRLS:()=>(j[b3.Symbol.EnableRLS]=!0,j)})})(a,b,c,void 0);a.s(["PgTable",()=>b3,"pgTable",()=>b4],57833);class b5{static [c.entityKind]="PgPrimaryKeyBuilder";columns;name;constructor(a,b){this.columns=a,this.name=b}build(a){return new b6(a,this.columns,this.name)}}class b6{constructor(a,b,c){this.table=a,this.columns=b,this.name=c}static [c.entityKind]="PgPrimaryKey";columns;name;getName(){return this.name??`${this.table[b3.Symbol.Name]}_${this.columns.map(a=>a.name).join("_")}_pk`}}a.s(["PrimaryKeyBuilder",()=>b5],74619)},93321,a=>{"use strict";var b=a.i(94415),c=a.i(63227),d=a.i(20713),e=a.i(51674);function f(a,f){return!(0,e.isDriverValueEncoder)(f)||(0,e.isSQLWrapper)(a)||(0,c.is)(a,e.Param)||(0,c.is)(a,e.Placeholder)||(0,c.is)(a,b.Column)||(0,c.is)(a,d.Table)||(0,c.is)(a,e.View)?a:new e.Param(a,f)}let g=(a,b)=>e.sql`${a} = ${f(b,a)}`,h=(a,b)=>e.sql`${a} <> ${f(b,a)}`;function i(...a){let b=a.filter(a=>void 0!==a);if(0!==b.length)return new e.SQL(1===b.length?b:[new e.StringChunk("("),e.sql.join(b,new e.StringChunk(" and ")),new e.StringChunk(")")])}function j(...a){let b=a.filter(a=>void 0!==a);if(0!==b.length)return new e.SQL(1===b.length?b:[new e.StringChunk("("),e.sql.join(b,new e.StringChunk(" or ")),new e.StringChunk(")")])}function k(a){return e.sql`not ${a}`}let l=(a,b)=>e.sql`${a} > ${f(b,a)}`,m=(a,b)=>e.sql`${a} >= ${f(b,a)}`,n=(a,b)=>e.sql`${a} < ${f(b,a)}`,o=(a,b)=>e.sql`${a} <= ${f(b,a)}`;function p(a,b){return Array.isArray(b)?0===b.length?e.sql`false`:e.sql`${a} in ${b.map(b=>f(b,a))}`:e.sql`${a} in ${f(b,a)}`}function q(a,b){return Array.isArray(b)?0===b.length?e.sql`true`:e.sql`${a} not in ${b.map(b=>f(b,a))}`:e.sql`${a} not in ${f(b,a)}`}function r(a){return e.sql`${a} is null`}function s(a){return e.sql`${a} is not null`}function t(a){return e.sql`exists ${a}`}function u(a){return e.sql`not exists ${a}`}function v(a,b,c){return e.sql`${a} between ${f(b,a)} and ${f(c,a)}`}function w(a,b,c){return e.sql`${a} not between ${f(b,a)} and ${f(c,a)}`}function x(a,b){return e.sql`${a} like ${b}`}function y(a,b){return e.sql`${a} not like ${b}`}function z(a,b){return e.sql`${a} ilike ${b}`}function A(a,b){return e.sql`${a} not ilike ${b}`}a.s(["and",()=>i,"between",()=>v,"eq",()=>g,"exists",()=>t,"gt",()=>l,"gte",()=>m,"ilike",()=>z,"inArray",()=>p,"isNotNull",()=>s,"isNull",()=>r,"like",()=>x,"lt",()=>n,"lte",()=>o,"ne",()=>h,"not",()=>k,"notBetween",()=>w,"notExists",()=>u,"notIlike",()=>A,"notInArray",()=>q,"notLike",()=>y,"or",()=>j])},94758,37137,a=>{"use strict";var b,c,d=a.i(51674),e=a.i(89221),f=a.i(86096),g=a.i(90714),h=a.i(57833),i=a.i(602),j=a.i(65105),k=a.i(99450),l=a.i(18830),m=a.i(20713),n=a.i(94415),o=a.i(63227),p=a.i(74619),q=a.i(93321);function r(a){return d.sql`${a} asc`}function s(a){return d.sql`${a} desc`}class t{constructor(a,b,c){this.sourceTable=a,this.referencedTable=b,this.relationName=c,this.referencedTableName=b[m.Table.Symbol.Name]}static [o.entityKind]="Relation";referencedTableName;fieldName}class u{constructor(a,b){this.table=a,this.config=b}static [o.entityKind]="Relations"}class v extends t{constructor(a,b,c,d){super(a,b,c?.relationName),this.config=c,this.isNullable=d}static [o.entityKind]="One";withFieldName(a){let b=new v(this.sourceTable,this.referencedTable,this.config,this.isNullable);return b.fieldName=a,b}}class w extends t{constructor(a,b,c){super(a,b,c?.relationName),this.config=c}static [o.entityKind]="Many";withFieldName(a){let b=new w(this.sourceTable,this.referencedTable,this.config);return b.fieldName=a,b}}function x(a,b){return new u(a,a=>Object.fromEntries(Object.entries(b(a)).map(([a,b])=>[a,b.withFieldName(a)])))}function y(a){return{one:function(b,c){return new v(a,b,c,c?.fields.reduce((a,b)=>a&&b.notNull,!0)??!1)},many:function(b,c){return new w(a,b,c)}}}let z=(0,h.pgTable)("collections",{id:(0,i.serial)("id").primaryKey(),name:(0,j.text)("name").notNull(),slug:(0,j.text)("slug").notNull()}),A=(0,h.pgTable)("categories",{slug:(0,j.text)("slug").notNull().primaryKey(),name:(0,j.text)("name").notNull(),collection_id:(0,f.integer)("collection_id").notNull().references(()=>z.id,{onDelete:"cascade"}),image_url:(0,j.text)("image_url")},a=>({collectionIdIdx:(0,e.index)("categories_collection_id_idx").on(a.collection_id)})),B=(0,h.pgTable)("subcollections",{id:(0,i.serial)("id").primaryKey(),name:(0,j.text)("name").notNull(),category_slug:(0,j.text)("category_slug").notNull().references(()=>A.slug,{onDelete:"cascade"})},a=>({categorySlugIdx:(0,e.index)("subcollections_category_slug_idx").on(a.category_slug)})),C=(0,h.pgTable)("subcategories",{slug:(0,j.text)("slug").notNull().primaryKey(),name:(0,j.text)("name").notNull(),subcollection_id:(0,f.integer)("subcollection_id").notNull().references(()=>B.id,{onDelete:"cascade"}),image_url:(0,j.text)("image_url")},a=>({subcollectionIdIdx:(0,e.index)("subcategories_subcollection_id_idx").on(a.subcollection_id)})),D=(0,h.pgTable)("products",{slug:(0,j.text)("slug").notNull().primaryKey(),name:(0,j.text)("name").notNull(),description:(0,j.text)("description").notNull(),price:(0,g.numeric)("price").notNull(),subcategory_slug:(0,j.text)("subcategory_slug").notNull().references(()=>C.slug,{onDelete:"cascade"}),image_url:(0,j.text)("image_url")},a=>({nameSearchIndex:(0,e.index)("name_search_index").using("gin",d.sql`to_tsvector('english', ${a.name})`),nameTrgmIndex:(0,e.index)("name_trgm_index").using("gin",d.sql`${a.name} gin_trgm_ops`).concurrently(),subcategorySlugIdx:(0,e.index)("products_subcategory_slug_idx").on(a.subcategory_slug)})),E=x(z,({many:a})=>({categories:a(A)})),F=x(A,({one:a,many:b})=>({collection:a(z,{fields:[A.collection_id],references:[z.id]}),subcollections:b(B)})),G=x(B,({one:a,many:b})=>({category:a(A,{fields:[B.category_slug],references:[A.slug]}),subcategories:b(C)})),H=x(C,({one:a,many:b})=>({subcollection:a(B,{fields:[C.subcollection_id],references:[B.id]}),products:b(D)})),I=x(D,({one:a})=>({subcategory:a(C,{fields:[D.subcategory_slug],references:[C.slug]})})),J=(0,h.pgTable)("users",{id:(0,i.serial)("id").primaryKey(),username:(0,l.varchar)("username",{length:100}).notNull().unique(),passwordHash:(0,j.text)("password_hash").notNull(),createdAt:(0,k.timestamp)("created_at").notNull().defaultNow(),updatedAt:(0,k.timestamp)("updated_at").notNull().defaultNow()});a.s(["categories",0,A,"categoriesRelations",0,F,"collections",0,z,"collectionsRelations",0,E,"products",0,D,"productsRelations",0,I,"subcategories",0,C,"subcategoriesRelations",0,H,"subcollectionRelations",0,G,"subcollections",0,B,"users",0,J],37137);var K,L,M,N,O=a.i(37137),P=Object.create,Q=Object.defineProperty,R=Object.getOwnPropertyDescriptor,S=Object.getOwnPropertyNames,T=Object.getPrototypeOf,U=Object.prototype.hasOwnProperty,V=(a,b)=>Q(a,"name",{value:b,configurable:!0}),W=(a,b)=>()=>(a&&(b=a(a=0)),b),X=(a,b)=>()=>(b||a((b={exports:{}}).exports,b),b.exports),Y=(a,b)=>{for(var c in b)Q(a,c,{get:b[c],enumerable:!0})},Z=(a,b,c,d)=>{if(b&&"object"==typeof b||"function"==typeof b)for(let e of S(b))U.call(a,e)||e===c||Q(a,e,{get:()=>b[e],enumerable:!(d=R(b,e))||d.enumerable});return a},$=(a,b,c)=>(c=null!=a?P(T(a)):{},Z(!b&&a&&a.__esModule?c:Q(c,"default",{value:a,enumerable:!0}),a)),_=a=>Z(Q({},"__esModule",{value:!0}),a),aa=(a,b,c)=>{let d;return(d="symbol"!=typeof b?b+"":b)in a?Q(a,d,{enumerable:!0,configurable:!0,writable:!0,value:c}):a[d]=c},ab=X(a=>{ae(),a.byteLength=i,a.toByteArray=k,a.fromByteArray=n;var b,c,d=[],e=[],f="u">typeof Uint8Array?Uint8Array:Array,g="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(b=0,c=g.length;b<c;++b)d[b]=g[b],e[g.charCodeAt(b)]=b;function h(a){var b=a.length;if(b%4>0)throw Error("Invalid string. Length must be a multiple of 4");var c=a.indexOf("=");-1===c&&(c=b);var d=c===b?0:4-c%4;return[c,d]}function i(a){var b=h(a),c=b[0],d=b[1];return(c+d)*3/4-d}function j(a,b,c){return(b+c)*3/4-c}function k(a){var b,c,d=h(a),g=d[0],i=d[1],k=new f(j(a,g,i)),l=0,m=i>0?g-4:g;for(c=0;c<m;c+=4)b=e[a.charCodeAt(c)]<<18|e[a.charCodeAt(c+1)]<<12|e[a.charCodeAt(c+2)]<<6|e[a.charCodeAt(c+3)],k[l++]=b>>16&255,k[l++]=b>>8&255,k[l++]=255&b;return 2===i&&(b=e[a.charCodeAt(c)]<<2|e[a.charCodeAt(c+1)]>>4,k[l++]=255&b),1===i&&(b=e[a.charCodeAt(c)]<<10|e[a.charCodeAt(c+1)]<<4|e[a.charCodeAt(c+2)]>>2,k[l++]=b>>8&255,k[l++]=255&b),k}function l(a){return d[a>>18&63]+d[a>>12&63]+d[a>>6&63]+d[63&a]}function m(a,b,c){for(var d=[],e=b;e<c;e+=3)d.push(l((a[e]<<16&0xff0000)+(a[e+1]<<8&65280)+(255&a[e+2])));return d.join("")}function n(a){for(var b,c=a.length,e=c%3,f=[],g=0,h=c-e;g<h;g+=16383)f.push(m(a,g,g+16383>h?h:g+16383));return 1===e?f.push(d[(b=a[c-1])>>2]+d[b<<4&63]+"=="):2===e&&f.push(d[(b=(a[c-2]<<8)+a[c-1])>>10]+d[b>>4&63]+d[b<<2&63]+"="),f.join("")}e[45]=62,e[95]=63,V(h,"getLens"),V(i,"byteLength"),V(j,"_byteLength"),V(k,"toByteArray"),V(l,"tripletToBase64"),V(m,"encodeChunk"),V(n,"fromByteArray")}),ac=X(a=>{ae(),a.read=function(a,b,c,d,e){var f,g,h=8*e-d-1,i=(1<<h)-1,j=i>>1,k=-7,l=c?e-1:0,m=c?-1:1,n=a[b+l];for(l+=m,f=n&(1<<-k)-1,n>>=-k,k+=h;k>0;f=256*f+a[b+l],l+=m,k-=8);for(g=f&(1<<-k)-1,f>>=-k,k+=d;k>0;g=256*g+a[b+l],l+=m,k-=8);if(0===f)f=1-j;else{if(f===i)return g?NaN:1/0*(n?-1:1);g+=Math.pow(2,d),f-=j}return(n?-1:1)*g*Math.pow(2,f-d)},a.write=function(a,b,c,d,e,f){var g,h,i,j=8*f-e-1,k=(1<<j)-1,l=k>>1,m=5960464477539062e-23*(23===e),n=d?0:f-1,o=d?1:-1,p=+(b<0||0===b&&1/b<0);for(isNaN(b=Math.abs(b))||b===1/0?(h=+!!isNaN(b),g=k):(g=Math.floor(Math.log(b)/Math.LN2),b*(i=Math.pow(2,-g))<1&&(g--,i*=2),g+l>=1?b+=m/i:b+=m*Math.pow(2,1-l),b*i>=2&&(g++,i/=2),g+l>=k?(h=0,g=k):g+l>=1?(h=(b*i-1)*Math.pow(2,e),g+=l):(h=b*Math.pow(2,l-1)*Math.pow(2,e),g=0));e>=8;a[c+n]=255&h,n+=o,h/=256,e-=8);for(g=g<<e|h,j+=e;j>0;a[c+n]=255&g,n+=o,g/=256,j-=8);a[c+n-o]|=128*p}}),ad=X(a=>{ae();var b=ab(),c=ac(),d="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;function e(){try{let a=new Uint8Array(1),b={foo:V(function(){return 42},"foo")};return Object.setPrototypeOf(b,Uint8Array.prototype),Object.setPrototypeOf(a,b),42===a.foo()}catch{return!1}}function f(a){if(a>0x7fffffff)throw RangeError('The value "'+a+'" is invalid for option "size"');let b=new Uint8Array(a);return Object.setPrototypeOf(b,g.prototype),b}function g(a,b,c){if("number"==typeof a){if("string"==typeof b)throw TypeError('The "string" argument must be of type string. Received type number');return k(a)}return h(a,b,c)}function h(a,b,c){if("string"==typeof a)return l(a,b);if(ArrayBuffer.isView(a))return n(a);if(null==a)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof a);if(ag(a,ArrayBuffer)||a&&ag(a.buffer,ArrayBuffer)||"u">typeof SharedArrayBuffer&&(ag(a,SharedArrayBuffer)||a&&ag(a.buffer,SharedArrayBuffer)))return o(a,b,c);if("number"==typeof a)throw TypeError('The "value" argument must not be of type number. Received type number');let d=a.valueOf&&a.valueOf();if(null!=d&&d!==a)return g.from(d,b,c);let e=p(a);if(e)return e;if("u">typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof a[Symbol.toPrimitive])return g.from(a[Symbol.toPrimitive]("string"),b,c);throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof a)}function i(a){if("number"!=typeof a)throw TypeError('"size" argument must be of type number');if(a<0)throw RangeError('The value "'+a+'" is invalid for option "size"')}function j(a,b,c){return i(a),a<=0?f(a):void 0!==b?"string"==typeof c?f(a).fill(b,c):f(a).fill(b):f(a)}function k(a){return i(a),f(a<0?0:0|q(a))}function l(a,b){if(("string"!=typeof b||""===b)&&(b="utf8"),!g.isEncoding(b))throw TypeError("Unknown encoding: "+b);let c=0|s(a,b),d=f(c),e=d.write(a,b);return e!==c&&(d=d.slice(0,e)),d}function m(a){let b=a.length<0?0:0|q(a.length),c=f(b);for(let d=0;d<b;d+=1)c[d]=255&a[d];return c}function n(a){if(ag(a,Uint8Array)){let b=new Uint8Array(a);return o(b.buffer,b.byteOffset,b.byteLength)}return m(a)}function o(a,b,c){let d;if(b<0||a.byteLength<b)throw RangeError('"offset" is outside of buffer bounds');if(a.byteLength<b+(c||0))throw RangeError('"length" is outside of buffer bounds');return Object.setPrototypeOf(d=void 0===b&&void 0===c?new Uint8Array(a):void 0===c?new Uint8Array(a,b):new Uint8Array(a,b,c),g.prototype),d}function p(a){if(g.isBuffer(a)){let b=0|q(a.length),c=f(b);return 0===c.length||a.copy(c,0,0,b),c}return void 0!==a.length?"number"!=typeof a.length||ah(a.length)?f(0):m(a):"Buffer"===a.type&&Array.isArray(a.data)?m(a.data):void 0}function q(a){if(a>=0x7fffffff)throw RangeError("Attempt to allocate Buffer larger than maximum size: 0x7fffffff bytes");return 0|a}function r(a){return+a!=a&&(a=0),g.alloc(+a)}function s(a,b){if(g.isBuffer(a))return a.length;if(ArrayBuffer.isView(a)||ag(a,ArrayBuffer))return a.byteLength;if("string"!=typeof a)throw TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof a);let c=a.length,d=arguments.length>2&&!0===arguments[2];if(!d&&0===c)return 0;let e=!1;for(;;)switch(b){case"ascii":case"latin1":case"binary":return c;case"utf8":case"utf-8":return $(a).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*c;case"hex":return c>>>1;case"base64":return ad(a).length;default:if(e)return d?-1:$(a).length;b=(""+b).toLowerCase(),e=!0}}function t(a,b,c){let d=!1;if((void 0===b||b<0)&&(b=0),b>this.length||((void 0===c||c>this.length)&&(c=this.length),c<=0)||(c>>>=0)<=(b>>>=0))return"";for(a||(a="utf8");;)switch(a){case"hex":return H(this,b,c);case"utf8":case"utf-8":return D(this,b,c);case"ascii":return F(this,b,c);case"latin1":case"binary":return G(this,b,c);case"base64":return C(this,b,c);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return I(this,b,c);default:if(d)throw TypeError("Unknown encoding: "+a);a=(a+"").toLowerCase(),d=!0}}function u(a,b,c){let d=a[b];a[b]=a[c],a[c]=d}function v(a,b,c,d,e){if(0===a.length)return -1;if("string"==typeof c?(d=c,c=0):c>0x7fffffff?c=0x7fffffff:c<-0x80000000&&(c=-0x80000000),ah(c*=1)&&(c=e?0:a.length-1),c<0&&(c=a.length+c),c>=a.length){if(e)return -1;c=a.length-1}else if(c<0)if(!e)return -1;else c=0;if("string"==typeof b&&(b=g.from(b,d)),g.isBuffer(b))return 0===b.length?-1:w(a,b,c,d,e);if("number"==typeof b)return b&=255,"function"==typeof Uint8Array.prototype.indexOf?e?Uint8Array.prototype.indexOf.call(a,b,c):Uint8Array.prototype.lastIndexOf.call(a,b,c):w(a,[b],c,d,e);throw TypeError("val must be string, number or Buffer")}function w(a,b,c,d,e){let f,g=1,h=a.length,i=b.length;if(void 0!==d&&("ucs2"===(d=String(d).toLowerCase())||"ucs-2"===d||"utf16le"===d||"utf-16le"===d)){if(a.length<2||b.length<2)return -1;g=2,h/=2,i/=2,c/=2}function j(a,b){return 1===g?a[b]:a.readUInt16BE(b*g)}if(V(j,"read"),e){let d=-1;for(f=c;f<h;f++)if(j(a,f)===j(b,-1===d?0:f-d)){if(-1===d&&(d=f),f-d+1===i)return d*g}else -1!==d&&(f-=f-d),d=-1}else for(c+i>h&&(c=h-i),f=c;f>=0;f--){let c=!0;for(let d=0;d<i;d++)if(j(a,f+d)!==j(b,d)){c=!1;break}if(c)return f}return -1}function x(a,b,c,d){let e;c=Number(c)||0;let f=a.length-c;d?(d=Number(d))>f&&(d=f):d=f;let g=b.length;for(d>g/2&&(d=g/2),e=0;e<d;++e){let d=parseInt(b.substr(2*e,2),16);if(ah(d))break;a[c+e]=d}return e}function y(a,b,c,d){return af($(b,a.length-c),a,c,d)}function z(a,b,c,d){return af(_(b),a,c,d)}function A(a,b,c,d){return af(ad(b),a,c,d)}function B(a,b,c,d){return af(aa(b,a.length-c),a,c,d)}function C(a,c,d){return 0===c&&d===a.length?b.fromByteArray(a):b.fromByteArray(a.slice(c,d))}function D(a,b,c){c=Math.min(a.length,c);let d=[],e=b;for(;e<c;){let b=a[e],f=null,g=b>239?4:b>223?3:b>191?2:1;if(e+g<=c){let c,d,h,i;switch(g){case 1:b<128&&(f=b);break;case 2:(192&(c=a[e+1]))==128&&(i=(31&b)<<6|63&c)>127&&(f=i);break;case 3:c=a[e+1],d=a[e+2],(192&c)==128&&(192&d)==128&&(i=(15&b)<<12|(63&c)<<6|63&d)>2047&&(i<55296||i>57343)&&(f=i);break;case 4:c=a[e+1],d=a[e+2],h=a[e+3],(192&c)==128&&(192&d)==128&&(192&h)==128&&(i=(15&b)<<18|(63&c)<<12|(63&d)<<6|63&h)>65535&&i<1114112&&(f=i)}}null===f?(f=65533,g=1):f>65535&&(f-=65536,d.push(f>>>10&1023|55296),f=56320|1023&f),d.push(f),e+=g}return E(d)}function E(a){let b=a.length;if(b<=4096)return String.fromCharCode.apply(String,a);let c="",d=0;for(;d<b;)c+=String.fromCharCode.apply(String,a.slice(d,d+=4096));return c}function F(a,b,c){let d="";c=Math.min(a.length,c);for(let e=b;e<c;++e)d+=String.fromCharCode(127&a[e]);return d}function G(a,b,c){let d="";c=Math.min(a.length,c);for(let e=b;e<c;++e)d+=String.fromCharCode(a[e]);return d}function H(a,b,c){let d=a.length;(!b||b<0)&&(b=0),(!c||c<0||c>d)&&(c=d);let e="";for(let d=b;d<c;++d)e+=ai[a[d]];return e}function I(a,b,c){let d=a.slice(b,c),e="";for(let a=0;a<d.length-1;a+=2)e+=String.fromCharCode(d[a]+256*d[a+1]);return e}function J(a,b,c){if(a%1!=0||a<0)throw RangeError("offset is not uint");if(a+b>c)throw RangeError("Trying to access beyond buffer length")}function K(a,b,c,d,e,f){if(!g.isBuffer(a))throw TypeError('"buffer" argument must be a Buffer instance');if(b>e||b<f)throw RangeError('"value" argument is out of bounds');if(c+d>a.length)throw RangeError("Index out of range")}function L(a,b,c,d,e){U(b,d,e,a,c,7);let f=Number(b&BigInt(0xffffffff));a[c++]=f,f>>=8,a[c++]=f,f>>=8,a[c++]=f,f>>=8,a[c++]=f;let g=Number(b>>BigInt(32)&BigInt(0xffffffff));return a[c++]=g,g>>=8,a[c++]=g,g>>=8,a[c++]=g,g>>=8,a[c++]=g,c}function M(a,b,c,d,e){U(b,d,e,a,c,7);let f=Number(b&BigInt(0xffffffff));a[c+7]=f,f>>=8,a[c+6]=f,f>>=8,a[c+5]=f,f>>=8,a[c+4]=f;let g=Number(b>>BigInt(32)&BigInt(0xffffffff));return a[c+3]=g,g>>=8,a[c+2]=g,g>>=8,a[c+1]=g,g>>=8,a[c]=g,c+8}function N(a,b,c,d,e,f){if(c+d>a.length||c<0)throw RangeError("Index out of range")}function O(a,b,d,e,f){return b*=1,d>>>=0,f||N(a,b,d,4,34028234663852886e22,-34028234663852886e22),c.write(a,b,d,e,23,4),d+4}function P(a,b,d,e,f){return b*=1,d>>>=0,f||N(a,b,d,8,17976931348623157e292,-17976931348623157e292),c.write(a,b,d,e,52,8),d+8}a.Buffer=g,a.SlowBuffer=r,a.INSPECT_MAX_BYTES=50,a.kMaxLength=0x7fffffff,g.TYPED_ARRAY_SUPPORT=e(),!g.TYPED_ARRAY_SUPPORT&&"u">typeof console&&"function"==typeof console.error&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),V(e,"typedArraySupport"),Object.defineProperty(g.prototype,"parent",{enumerable:!0,get:V(function(){if(g.isBuffer(this))return this.buffer},"get")}),Object.defineProperty(g.prototype,"offset",{enumerable:!0,get:V(function(){if(g.isBuffer(this))return this.byteOffset},"get")}),V(f,"createBuffer"),V(g,"Buffer"),g.poolSize=8192,V(h,"from"),g.from=function(a,b,c){return h(a,b,c)},Object.setPrototypeOf(g.prototype,Uint8Array.prototype),Object.setPrototypeOf(g,Uint8Array),V(i,"assertSize"),V(j,"alloc"),g.alloc=function(a,b,c){return j(a,b,c)},V(k,"allocUnsafe"),g.allocUnsafe=function(a){return k(a)},g.allocUnsafeSlow=function(a){return k(a)},V(l,"fromString"),V(m,"fromArrayLike"),V(n,"fromArrayView"),V(o,"fromArrayBuffer"),V(p,"fromObject"),V(q,"checked"),V(r,"SlowBuffer"),g.isBuffer=V(function(a){return null!=a&&!0===a._isBuffer&&a!==g.prototype},"isBuffer"),g.compare=V(function(a,b){if(ag(a,Uint8Array)&&(a=g.from(a,a.offset,a.byteLength)),ag(b,Uint8Array)&&(b=g.from(b,b.offset,b.byteLength)),!g.isBuffer(a)||!g.isBuffer(b))throw TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(a===b)return 0;let c=a.length,d=b.length;for(let e=0,f=Math.min(c,d);e<f;++e)if(a[e]!==b[e]){c=a[e],d=b[e];break}return c<d?-1:+(d<c)},"compare"),g.isEncoding=V(function(a){switch(String(a).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},"isEncoding"),g.concat=V(function(a,b){let c;if(!Array.isArray(a))throw TypeError('"list" argument must be an Array of Buffers');if(0===a.length)return g.alloc(0);if(void 0===b)for(b=0,c=0;c<a.length;++c)b+=a[c].length;let d=g.allocUnsafe(b),e=0;for(c=0;c<a.length;++c){let b=a[c];if(ag(b,Uint8Array))e+b.length>d.length?(g.isBuffer(b)||(b=g.from(b)),b.copy(d,e)):Uint8Array.prototype.set.call(d,b,e);else if(g.isBuffer(b))b.copy(d,e);else throw TypeError('"list" argument must be an Array of Buffers');e+=b.length}return d},"concat"),V(s,"byteLength"),g.byteLength=s,V(t,"slowToString"),g.prototype._isBuffer=!0,V(u,"swap"),g.prototype.swap16=V(function(){let a=this.length;if(a%2!=0)throw RangeError("Buffer size must be a multiple of 16-bits");for(let b=0;b<a;b+=2)u(this,b,b+1);return this},"swap16"),g.prototype.swap32=V(function(){let a=this.length;if(a%4!=0)throw RangeError("Buffer size must be a multiple of 32-bits");for(let b=0;b<a;b+=4)u(this,b,b+3),u(this,b+1,b+2);return this},"swap32"),g.prototype.swap64=V(function(){let a=this.length;if(a%8!=0)throw RangeError("Buffer size must be a multiple of 64-bits");for(let b=0;b<a;b+=8)u(this,b,b+7),u(this,b+1,b+6),u(this,b+2,b+5),u(this,b+3,b+4);return this},"swap64"),g.prototype.toString=V(function(){let a=this.length;return 0===a?"":0==arguments.length?D(this,0,a):t.apply(this,arguments)},"toString"),g.prototype.toLocaleString=g.prototype.toString,g.prototype.equals=V(function(a){if(!g.isBuffer(a))throw TypeError("Argument must be a Buffer");return this===a||0===g.compare(this,a)},"equals"),g.prototype.inspect=V(function(){let b="",c=a.INSPECT_MAX_BYTES;return b=this.toString("hex",0,c).replace(/(.{2})/g,"$1 ").trim(),this.length>c&&(b+=" ... "),"<Buffer "+b+">"},"inspect"),d&&(g.prototype[d]=g.prototype.inspect),g.prototype.compare=V(function(a,b,c,d,e){if(ag(a,Uint8Array)&&(a=g.from(a,a.offset,a.byteLength)),!g.isBuffer(a))throw TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof a);if(void 0===b&&(b=0),void 0===c&&(c=a?a.length:0),void 0===d&&(d=0),void 0===e&&(e=this.length),b<0||c>a.length||d<0||e>this.length)throw RangeError("out of range index");if(d>=e&&b>=c)return 0;if(d>=e)return -1;if(b>=c)return 1;if(b>>>=0,c>>>=0,d>>>=0,e>>>=0,this===a)return 0;let f=e-d,h=c-b,i=Math.min(f,h),j=this.slice(d,e),k=a.slice(b,c);for(let a=0;a<i;++a)if(j[a]!==k[a]){f=j[a],h=k[a];break}return f<h?-1:+(h<f)},"compare"),V(v,"bidirectionalIndexOf"),V(w,"arrayIndexOf"),g.prototype.includes=V(function(a,b,c){return -1!==this.indexOf(a,b,c)},"includes"),g.prototype.indexOf=V(function(a,b,c){return v(this,a,b,c,!0)},"indexOf"),g.prototype.lastIndexOf=V(function(a,b,c){return v(this,a,b,c,!1)},"lastIndexOf"),V(x,"hexWrite"),V(y,"utf8Write"),V(z,"asciiWrite"),V(A,"base64Write"),V(B,"ucs2Write"),g.prototype.write=V(function(a,b,c,d){if(void 0===b)d="utf8",c=this.length,b=0;else if(void 0===c&&"string"==typeof b)d=b,c=this.length,b=0;else if(isFinite(b))b>>>=0,isFinite(c)?(c>>>=0,void 0===d&&(d="utf8")):(d=c,c=void 0);else throw Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");let e=this.length-b;if((void 0===c||c>e)&&(c=e),a.length>0&&(c<0||b<0)||b>this.length)throw RangeError("Attempt to write outside buffer bounds");d||(d="utf8");let f=!1;for(;;)switch(d){case"hex":return x(this,a,b,c);case"utf8":case"utf-8":return y(this,a,b,c);case"ascii":case"latin1":case"binary":return z(this,a,b,c);case"base64":return A(this,a,b,c);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return B(this,a,b,c);default:if(f)throw TypeError("Unknown encoding: "+d);d=(""+d).toLowerCase(),f=!0}},"write"),g.prototype.toJSON=V(function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},"toJSON"),V(C,"base64Slice"),V(D,"utf8Slice"),V(E,"decodeCodePointsArray"),V(F,"asciiSlice"),V(G,"latin1Slice"),V(H,"hexSlice"),V(I,"utf16leSlice"),g.prototype.slice=V(function(a,b){let c=this.length;a=~~a,b=void 0===b?c:~~b,a<0?(a+=c)<0&&(a=0):a>c&&(a=c),b<0?(b+=c)<0&&(b=0):b>c&&(b=c),b<a&&(b=a);let d=this.subarray(a,b);return Object.setPrototypeOf(d,g.prototype),d},"slice"),V(J,"checkOffset"),g.prototype.readUintLE=g.prototype.readUIntLE=V(function(a,b,c){a>>>=0,b>>>=0,c||J(a,b,this.length);let d=this[a],e=1,f=0;for(;++f<b&&(e*=256);)d+=this[a+f]*e;return d},"readUIntLE"),g.prototype.readUintBE=g.prototype.readUIntBE=V(function(a,b,c){a>>>=0,b>>>=0,c||J(a,b,this.length);let d=this[a+--b],e=1;for(;b>0&&(e*=256);)d+=this[a+--b]*e;return d},"readUIntBE"),g.prototype.readUint8=g.prototype.readUInt8=V(function(a,b){return a>>>=0,b||J(a,1,this.length),this[a]},"readUInt8"),g.prototype.readUint16LE=g.prototype.readUInt16LE=V(function(a,b){return a>>>=0,b||J(a,2,this.length),this[a]|this[a+1]<<8},"readUInt16LE"),g.prototype.readUint16BE=g.prototype.readUInt16BE=V(function(a,b){return a>>>=0,b||J(a,2,this.length),this[a]<<8|this[a+1]},"readUInt16BE"),g.prototype.readUint32LE=g.prototype.readUInt32LE=V(function(a,b){return a>>>=0,b||J(a,4,this.length),(this[a]|this[a+1]<<8|this[a+2]<<16)+0x1000000*this[a+3]},"readUInt32LE"),g.prototype.readUint32BE=g.prototype.readUInt32BE=V(function(a,b){return a>>>=0,b||J(a,4,this.length),0x1000000*this[a]+(this[a+1]<<16|this[a+2]<<8|this[a+3])},"readUInt32BE"),g.prototype.readBigUInt64LE=aj(V(function(a){W(a>>>=0,"offset");let b=this[a],c=this[a+7];(void 0===b||void 0===c)&&X(a,this.length-8);let d=b+256*this[++a]+65536*this[++a]+0x1000000*this[++a],e=this[++a]+256*this[++a]+65536*this[++a]+0x1000000*c;return BigInt(d)+(BigInt(e)<<BigInt(32))},"readBigUInt64LE")),g.prototype.readBigUInt64BE=aj(V(function(a){W(a>>>=0,"offset");let b=this[a],c=this[a+7];(void 0===b||void 0===c)&&X(a,this.length-8);let d=0x1000000*b+65536*this[++a]+256*this[++a]+this[++a],e=0x1000000*this[++a]+65536*this[++a]+256*this[++a]+c;return(BigInt(d)<<BigInt(32))+BigInt(e)},"readBigUInt64BE")),g.prototype.readIntLE=V(function(a,b,c){a>>>=0,b>>>=0,c||J(a,b,this.length);let d=this[a],e=1,f=0;for(;++f<b&&(e*=256);)d+=this[a+f]*e;return d>=(e*=128)&&(d-=Math.pow(2,8*b)),d},"readIntLE"),g.prototype.readIntBE=V(function(a,b,c){a>>>=0,b>>>=0,c||J(a,b,this.length);let d=b,e=1,f=this[a+--d];for(;d>0&&(e*=256);)f+=this[a+--d]*e;return f>=(e*=128)&&(f-=Math.pow(2,8*b)),f},"readIntBE"),g.prototype.readInt8=V(function(a,b){return a>>>=0,b||J(a,1,this.length),128&this[a]?-((255-this[a]+1)*1):this[a]},"readInt8"),g.prototype.readInt16LE=V(function(a,b){a>>>=0,b||J(a,2,this.length);let c=this[a]|this[a+1]<<8;return 32768&c?0xffff0000|c:c},"readInt16LE"),g.prototype.readInt16BE=V(function(a,b){a>>>=0,b||J(a,2,this.length);let c=this[a+1]|this[a]<<8;return 32768&c?0xffff0000|c:c},"readInt16BE"),g.prototype.readInt32LE=V(function(a,b){return a>>>=0,b||J(a,4,this.length),this[a]|this[a+1]<<8|this[a+2]<<16|this[a+3]<<24},"readInt32LE"),g.prototype.readInt32BE=V(function(a,b){return a>>>=0,b||J(a,4,this.length),this[a]<<24|this[a+1]<<16|this[a+2]<<8|this[a+3]},"readInt32BE"),g.prototype.readBigInt64LE=aj(V(function(a){W(a>>>=0,"offset");let b=this[a],c=this[a+7];return(void 0===b||void 0===c)&&X(a,this.length-8),(BigInt(this[a+4]+256*this[a+5]+65536*this[a+6]+(c<<24))<<BigInt(32))+BigInt(b+256*this[++a]+65536*this[++a]+0x1000000*this[++a])},"readBigInt64LE")),g.prototype.readBigInt64BE=aj(V(function(a){W(a>>>=0,"offset");let b=this[a],c=this[a+7];return(void 0===b||void 0===c)&&X(a,this.length-8),(BigInt((b<<24)+65536*this[++a]+256*this[++a]+this[++a])<<BigInt(32))+BigInt(0x1000000*this[++a]+65536*this[++a]+256*this[++a]+c)},"readBigInt64BE")),g.prototype.readFloatLE=V(function(a,b){return a>>>=0,b||J(a,4,this.length),c.read(this,a,!0,23,4)},"readFloatLE"),g.prototype.readFloatBE=V(function(a,b){return a>>>=0,b||J(a,4,this.length),c.read(this,a,!1,23,4)},"readFloatBE"),g.prototype.readDoubleLE=V(function(a,b){return a>>>=0,b||J(a,8,this.length),c.read(this,a,!0,52,8)},"readDoubleLE"),g.prototype.readDoubleBE=V(function(a,b){return a>>>=0,b||J(a,8,this.length),c.read(this,a,!1,52,8)},"readDoubleBE"),V(K,"checkInt"),g.prototype.writeUintLE=g.prototype.writeUIntLE=V(function(a,b,c,d){if(a*=1,b>>>=0,c>>>=0,!d){let d=Math.pow(2,8*c)-1;K(this,a,b,c,d,0)}let e=1,f=0;for(this[b]=255&a;++f<c&&(e*=256);)this[b+f]=a/e&255;return b+c},"writeUIntLE"),g.prototype.writeUintBE=g.prototype.writeUIntBE=V(function(a,b,c,d){if(a*=1,b>>>=0,c>>>=0,!d){let d=Math.pow(2,8*c)-1;K(this,a,b,c,d,0)}let e=c-1,f=1;for(this[b+e]=255&a;--e>=0&&(f*=256);)this[b+e]=a/f&255;return b+c},"writeUIntBE"),g.prototype.writeUint8=g.prototype.writeUInt8=V(function(a,b,c){return a*=1,b>>>=0,c||K(this,a,b,1,255,0),this[b]=255&a,b+1},"writeUInt8"),g.prototype.writeUint16LE=g.prototype.writeUInt16LE=V(function(a,b,c){return a*=1,b>>>=0,c||K(this,a,b,2,65535,0),this[b]=255&a,this[b+1]=a>>>8,b+2},"writeUInt16LE"),g.prototype.writeUint16BE=g.prototype.writeUInt16BE=V(function(a,b,c){return a*=1,b>>>=0,c||K(this,a,b,2,65535,0),this[b]=a>>>8,this[b+1]=255&a,b+2},"writeUInt16BE"),g.prototype.writeUint32LE=g.prototype.writeUInt32LE=V(function(a,b,c){return a*=1,b>>>=0,c||K(this,a,b,4,0xffffffff,0),this[b+3]=a>>>24,this[b+2]=a>>>16,this[b+1]=a>>>8,this[b]=255&a,b+4},"writeUInt32LE"),g.prototype.writeUint32BE=g.prototype.writeUInt32BE=V(function(a,b,c){return a*=1,b>>>=0,c||K(this,a,b,4,0xffffffff,0),this[b]=a>>>24,this[b+1]=a>>>16,this[b+2]=a>>>8,this[b+3]=255&a,b+4},"writeUInt32BE"),V(L,"wrtBigUInt64LE"),V(M,"wrtBigUInt64BE"),g.prototype.writeBigUInt64LE=aj(V(function(a,b=0){return L(this,a,b,BigInt(0),BigInt("0xffffffffffffffff"))},"writeBigUInt64LE")),g.prototype.writeBigUInt64BE=aj(V(function(a,b=0){return M(this,a,b,BigInt(0),BigInt("0xffffffffffffffff"))},"writeBigUInt64BE")),g.prototype.writeIntLE=V(function(a,b,c,d){if(a*=1,b>>>=0,!d){let d=Math.pow(2,8*c-1);K(this,a,b,c,d-1,-d)}let e=0,f=1,g=0;for(this[b]=255&a;++e<c&&(f*=256);)a<0&&0===g&&0!==this[b+e-1]&&(g=1),this[b+e]=(a/f|0)-g&255;return b+c},"writeIntLE"),g.prototype.writeIntBE=V(function(a,b,c,d){if(a*=1,b>>>=0,!d){let d=Math.pow(2,8*c-1);K(this,a,b,c,d-1,-d)}let e=c-1,f=1,g=0;for(this[b+e]=255&a;--e>=0&&(f*=256);)a<0&&0===g&&0!==this[b+e+1]&&(g=1),this[b+e]=(a/f|0)-g&255;return b+c},"writeIntBE"),g.prototype.writeInt8=V(function(a,b,c){return a*=1,b>>>=0,c||K(this,a,b,1,127,-128),a<0&&(a=255+a+1),this[b]=255&a,b+1},"writeInt8"),g.prototype.writeInt16LE=V(function(a,b,c){return a*=1,b>>>=0,c||K(this,a,b,2,32767,-32768),this[b]=255&a,this[b+1]=a>>>8,b+2},"writeInt16LE"),g.prototype.writeInt16BE=V(function(a,b,c){return a*=1,b>>>=0,c||K(this,a,b,2,32767,-32768),this[b]=a>>>8,this[b+1]=255&a,b+2},"writeInt16BE"),g.prototype.writeInt32LE=V(function(a,b,c){return a*=1,b>>>=0,c||K(this,a,b,4,0x7fffffff,-0x80000000),this[b]=255&a,this[b+1]=a>>>8,this[b+2]=a>>>16,this[b+3]=a>>>24,b+4},"writeInt32LE"),g.prototype.writeInt32BE=V(function(a,b,c){return a*=1,b>>>=0,c||K(this,a,b,4,0x7fffffff,-0x80000000),a<0&&(a=0xffffffff+a+1),this[b]=a>>>24,this[b+1]=a>>>16,this[b+2]=a>>>8,this[b+3]=255&a,b+4},"writeInt32BE"),g.prototype.writeBigInt64LE=aj(V(function(a,b=0){return L(this,a,b,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))},"writeBigInt64LE")),g.prototype.writeBigInt64BE=aj(V(function(a,b=0){return M(this,a,b,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))},"writeBigInt64BE")),V(N,"checkIEEE754"),V(O,"writeFloat"),g.prototype.writeFloatLE=V(function(a,b,c){return O(this,a,b,!0,c)},"writeFloatLE"),g.prototype.writeFloatBE=V(function(a,b,c){return O(this,a,b,!1,c)},"writeFloatBE"),V(P,"writeDouble"),g.prototype.writeDoubleLE=V(function(a,b,c){return P(this,a,b,!0,c)},"writeDoubleLE"),g.prototype.writeDoubleBE=V(function(a,b,c){return P(this,a,b,!1,c)},"writeDoubleBE"),g.prototype.copy=V(function(a,b,c,d){if(!g.isBuffer(a))throw TypeError("argument should be a Buffer");if(c||(c=0),d||0===d||(d=this.length),b>=a.length&&(b=a.length),b||(b=0),d>0&&d<c&&(d=c),d===c||0===a.length||0===this.length)return 0;if(b<0)throw RangeError("targetStart out of bounds");if(c<0||c>=this.length)throw RangeError("Index out of range");if(d<0)throw RangeError("sourceEnd out of bounds");d>this.length&&(d=this.length),a.length-b<d-c&&(d=a.length-b+c);let e=d-c;return this===a&&"function"==typeof Uint8Array.prototype.copyWithin?this.copyWithin(b,c,d):Uint8Array.prototype.set.call(a,this.subarray(c,d),b),e},"copy"),g.prototype.fill=V(function(a,b,c,d){let e;if("string"==typeof a){if("string"==typeof b?(d=b,b=0,c=this.length):"string"==typeof c&&(d=c,c=this.length),void 0!==d&&"string"!=typeof d)throw TypeError("encoding must be a string");if("string"==typeof d&&!g.isEncoding(d))throw TypeError("Unknown encoding: "+d);if(1===a.length){let b=a.charCodeAt(0);("utf8"===d&&b<128||"latin1"===d)&&(a=b)}}else"number"==typeof a?a&=255:"boolean"==typeof a&&(a=Number(a));if(b<0||this.length<b||this.length<c)throw RangeError("Out of range index");if(c<=b)return this;if(b>>>=0,c=void 0===c?this.length:c>>>0,a||(a=0),"number"==typeof a)for(e=b;e<c;++e)this[e]=a;else{let f=g.isBuffer(a)?a:g.from(a,d),h=f.length;if(0===h)throw TypeError('The value "'+a+'" is invalid for argument "value"');for(e=0;e<c-b;++e)this[e+b]=f[e%h]}return this},"fill");var Q={};function R(a,b,c){var d;Q[a]=(V(d=class extends c{constructor(){super(),Object.defineProperty(this,"message",{value:b.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${a}]`,this.stack,delete this.name}get code(){return a}set code(a){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:a,writable:!0})}toString(){return`${this.name} [${a}\
]: ${this.message}`}},"NodeError"),d)}function S(a){let b="",c=a.length,d=+("-"===a[0]);for(;c>=d+4;c-=3)b=`\
_${a.slice(c-3,c)}${b}`;return`${a.slice(0,c)}${b}`}function T(a,b,c){W(b,"offset"),(void 0===a[b]||void 0===a[b+c])&&X(b,a.length-(c+1))}function U(a,b,c,d,e,f){if(a>c||a<b){let d="bigint"==typeof b?"n":"",e;throw e=f>3?0===b||b===BigInt(0)?`>= 0${d} and < 2${d}\
 ** ${(f+1)*8}${d}`:`>= -(2${d} ** ${(f+1)*8-1}${d}) and < 2 ** ${(f+1)*8-1}${d}`:`>= ${b}${d} a\
nd <= ${c}${d}`,new Q.ERR_OUT_OF_RANGE("value",e,a)}T(d,e,f)}function W(a,b){if("number"!=typeof a)throw new Q.ERR_INVALID_ARG_TYPE(b,"number",a)}function X(a,b,c){throw Math.floor(a)!==a?(W(a,c),new Q.ERR_OUT_OF_RANGE(c||"offset","an integer",a)):b<0?new Q.ERR_BUFFER_OUT_OF_BOUNDS:new Q.ERR_OUT_OF_RANGE(c||"offset",`>= ${+!!c} and <= ${b}`,a)}V(R,"E"),R("ERR_BUFFER_OUT_OF_BOUNDS",function(a){return a?`${a} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),R("ERR_INVALID_ARG_TYPE",function(a,b){return`The "${a}" argument must be of type number. Received typ\
e ${typeof b}`},TypeError),R("ERR_OUT_OF_RANGE",function(a,b,c){let d=`The value of "${a}" is out o\
f range.`,e=c;return Number.isInteger(c)&&Math.abs(c)>0x100000000?e=S(String(c)):"bigint"==typeof c&&(e=String(c),(c>BigInt(2)**BigInt(32)||c<-(BigInt(2)**BigInt(32)))&&(e=S(e)),e+="n"),d+=` It must be ${b}. Re\
ceived ${e}`},RangeError),V(S,"addNumericalSeparator"),V(T,"checkBounds"),V(U,"checkIntBI"),V(W,"validateNumber"),V(X,"boundsError");var Y=/[^+/0-9A-Za-z-_]/g;function Z(a){if((a=(a=a.split("=")[0]).trim().replace(Y,"")).length<2)return"";for(;a.length%4!=0;)a+="=";return a}function $(a,b){b=b||1/0;let c,d=a.length,e=null,f=[];for(let g=0;g<d;++g){if((c=a.charCodeAt(g))>55295&&c<57344){if(!e){if(c>56319||g+1===d){(b-=3)>-1&&f.push(239,191,189);continue}e=c;continue}if(c<56320){(b-=3)>-1&&f.push(239,191,189),e=c;continue}c=(e-55296<<10|c-56320)+65536}else e&&(b-=3)>-1&&f.push(239,191,189);if(e=null,c<128){if((b-=1)<0)break;f.push(c)}else if(c<2048){if((b-=2)<0)break;f.push(c>>6|192,63&c|128)}else if(c<65536){if((b-=3)<0)break;f.push(c>>12|224,c>>6&63|128,63&c|128)}else if(c<1114112){if((b-=4)<0)break;f.push(c>>18|240,c>>12&63|128,c>>6&63|128,63&c|128)}else throw Error("Invalid code point")}return f}function _(a){let b=[];for(let c=0;c<a.length;++c)b.push(255&a.charCodeAt(c));return b}function aa(a,b){let c,d,e=[];for(let f=0;f<a.length&&!((b-=2)<0);++f)d=(c=a.charCodeAt(f))>>8,e.push(c%256),e.push(d);return e}function ad(a){return b.toByteArray(Z(a))}function af(a,b,c,d){let e;for(e=0;e<d&&!(e+c>=b.length||e>=a.length);++e)b[e+c]=a[e];return e}function ag(a,b){return a instanceof b||null!=a&&null!=a.constructor&&null!=a.constructor.name&&a.constructor.name===b.name}function ah(a){return a!=a}V(Z,"base64clean"),V($,"utf8ToBytes"),V(_,"asciiToBytes"),V(aa,"utf16leToBytes"),V(ad,"base64ToBytes"),V(af,"blitBuffer"),V(ag,"isInstance"),V(ah,"numberIsNaN");var ai=function(){let a="0123456789abcdef",b=Array(256);for(let c=0;c<16;++c){let d=16*c;for(let e=0;e<16;++e)b[d+e]=a[c]+a[e]}return b}();function aj(a){return typeof BigInt>"u"?ak:a}function ak(){throw Error("BigInt not supported")}V(aj,"defineBigIntMethod"),V(ak,"BufferBigIntNotDefined")}),ae=W(()=>{K=globalThis,L=globalThis.setImmediate??(a=>setTimeout(a,0)),globalThis.clearImmediate??(a=>clearTimeout(a)),M="function"==typeof globalThis.Buffer&&"function"==typeof globalThis.Buffer.allocUnsafe?globalThis.Buffer:ad().Buffer,(N=globalThis.process??{}).env??(N.env={});try{N.nextTick(()=>{})}catch{let a=Promise.resolve();N.nextTick=a.then.bind(a)}}),af=X((a,b)=>{ae();var c,d="object"==typeof Reflect?Reflect:null,e=d&&"function"==typeof d.apply?d.apply:V(function(a,b,c){return Function.prototype.apply.call(a,b,c)},"ReflectApply");function f(a){console&&console.warn&&console.warn(a)}c=d&&"function"==typeof d.ownKeys?d.ownKeys:Object.getOwnPropertySymbols?V(function(a){return Object.getOwnPropertyNames(a).concat(Object.getOwnPropertySymbols(a))},"ReflectOwnKeys"):V(function(a){return Object.getOwnPropertyNames(a)},"ReflectOwnKeys"),V(f,"ProcessEmitWarning");var g=Number.isNaN||V(function(a){return a!=a},"NumberIsNaN");function h(){h.init.call(this)}V(h,"EventEmitter"),b.exports=h,b.exports.once=t,h.EventEmitter=h,h.prototype._events=void 0,h.prototype._eventsCount=0,h.prototype._maxListeners=void 0;var i=10;function j(a){if("function"!=typeof a)throw TypeError('The "listener" argument must be of type Function. Received type '+typeof a)}function k(a){return void 0===a._maxListeners?h.defaultMaxListeners:a._maxListeners}function l(a,b,c,d){var e,g,h;if(j(c),void 0===(g=a._events)?(g=a._events=Object.create(null),a._eventsCount=0):(void 0!==g.newListener&&(a.emit("newListener",b,c.listener?c.listener:c),g=a._events),h=g[b]),void 0===h)h=g[b]=c,++a._eventsCount;else if("function"==typeof h?h=g[b]=d?[c,h]:[h,c]:d?h.unshift(c):h.push(c),(e=k(a))>0&&h.length>e&&!h.warned){h.warned=!0;var i=Error("Possible EventEmitter memory leak detected. "+h.length+" "+String(b)+" listeners added. Use emitter.setMaxListeners() to increase limit");i.name="MaxListenersExceededWarning",i.emitter=a,i.type=b,i.count=h.length,f(i)}return a}function m(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0==arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function n(a,b,c){var d={fired:!1,wrapFn:void 0,target:a,type:b,listener:c},e=m.bind(d);return e.listener=c,d.wrapFn=e,e}function o(a,b,c){var d=a._events;if(void 0===d)return[];var e=d[b];return void 0===e?[]:"function"==typeof e?c?[e.listener||e]:[e]:c?s(e):q(e,e.length)}function p(a){var b=this._events;if(void 0!==b){var c=b[a];if("function"==typeof c)return 1;if(void 0!==c)return c.length}return 0}function q(a,b){for(var c=Array(b),d=0;d<b;++d)c[d]=a[d];return c}function r(a,b){for(;b+1<a.length;b++)a[b]=a[b+1];a.pop()}function s(a){for(var b=Array(a.length),c=0;c<b.length;++c)b[c]=a[c].listener||a[c];return b}function t(a,b){return new Promise(function(c,d){function e(c){a.removeListener(b,f),d(c)}function f(){"function"==typeof a.removeListener&&a.removeListener("error",e),c([].slice.call(arguments))}V(e,"errorListener"),V(f,"resolver"),v(a,b,f,{once:!0}),"error"!==b&&u(a,e,{once:!0})})}function u(a,b,c){"function"==typeof a.on&&v(a,"error",b,c)}function v(a,b,c,d){if("function"==typeof a.on)d.once?a.once(b,c):a.on(b,c);else if("function"==typeof a.addEventListener)a.addEventListener(b,V(function e(f){d.once&&a.removeEventListener(b,e),c(f)},"wrapListener"));else throw TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof a)}V(j,"checkListener"),Object.defineProperty(h,"defaultMaxListeners",{enumerable:!0,get:V(function(){return i},"get"),set:V(function(a){if("number"!=typeof a||a<0||g(a))throw RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+a+".");i=a},"set")}),h.init=function(){(void 0===this._events||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},h.prototype.setMaxListeners=V(function(a){if("number"!=typeof a||a<0||g(a))throw RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+a+".");return this._maxListeners=a,this},"setMaxListeners"),V(k,"_getMaxListeners"),h.prototype.getMaxListeners=V(function(){return k(this)},"getMaxListeners"),h.prototype.emit=V(function(a){for(var b=[],c=1;c<arguments.length;c++)b.push(arguments[c]);var d="error"===a,f=this._events;if(void 0!==f)d=d&&void 0===f.error;else if(!d)return!1;if(d){if(b.length>0&&(g=b[0]),g instanceof Error)throw g;var g,h=Error("Unhandled error."+(g?" ("+g.message+")":""));throw h.context=g,h}var i=f[a];if(void 0===i)return!1;if("function"==typeof i)e(i,this,b);else for(var j=i.length,k=q(i,j),c=0;c<j;++c)e(k[c],this,b);return!0},"emit"),V(l,"_addListener"),h.prototype.addListener=V(function(a,b){return l(this,a,b,!1)},"addListener"),h.prototype.on=h.prototype.addListener,h.prototype.prependListener=V(function(a,b){return l(this,a,b,!0)},"prependListener"),V(m,"onceWrapper"),V(n,"_onceWrap"),h.prototype.once=V(function(a,b){return j(b),this.on(a,n(this,a,b)),this},"once"),h.prototype.prependOnceListener=V(function(a,b){return j(b),this.prependListener(a,n(this,a,b)),this},"prependOnceListener"),h.prototype.removeListener=V(function(a,b){var c,d,e,f,g;if(j(b),void 0===(d=this._events)||void 0===(c=d[a]))return this;if(c===b||c.listener===b)0==--this._eventsCount?this._events=Object.create(null):(delete d[a],d.removeListener&&this.emit("removeListener",a,c.listener||b));else if("function"!=typeof c){for(e=-1,f=c.length-1;f>=0;f--)if(c[f]===b||c[f].listener===b){g=c[f].listener,e=f;break}if(e<0)return this;0===e?c.shift():r(c,e),1===c.length&&(d[a]=c[0]),void 0!==d.removeListener&&this.emit("removeListener",a,g||b)}return this},"removeListener"),h.prototype.off=h.prototype.removeListener,h.prototype.removeAllListeners=V(function(a){var b,c,d;if(void 0===(c=this._events))return this;if(void 0===c.removeListener)return 0==arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==c[a]&&(0==--this._eventsCount?this._events=Object.create(null):delete c[a]),this;if(0==arguments.length){var e,f=Object.keys(c);for(d=0;d<f.length;++d)"removeListener"!==(e=f[d])&&this.removeAllListeners(e);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(b=c[a]))this.removeListener(a,b);else if(void 0!==b)for(d=b.length-1;d>=0;d--)this.removeListener(a,b[d]);return this},"removeAllListeners"),V(o,"_listeners"),h.prototype.listeners=V(function(a){return o(this,a,!0)},"listeners"),h.prototype.rawListeners=V(function(a){return o(this,a,!1)},"rawListeners"),h.listenerCount=function(a,b){return"function"==typeof a.listenerCount?a.listenerCount(b):p.call(a,b)},h.prototype.listenerCount=p,V(p,"listenerCount"),h.prototype.eventNames=V(function(){return this._eventsCount>0?c(this._events):[]},"eventNames"),V(q,"arrayClone"),V(r,"spliceOne"),V(s,"unwrapListeners"),V(t,"once"),V(u,"addErrorHandlerIfEventEmitter"),V(v,"eventTargetAgnosticAddListener")}),ag={};function ah(a){return 0}Y(ag,{Socket:()=>al,isIP:()=>ah});var ai,aj,ak,al,am=W(()=>{ae(),ai=$(af(),1),V(ah,"isIP"),aj=/^[^.]+\./,ak=class a extends ai.EventEmitter{constructor(){super(...arguments),aa(this,"opts",{}),aa(this,"connecting",!1),aa(this,"pending",!0),aa(this,"writable",!0),aa(this,"encrypted",!1),aa(this,"authorized",!1),aa(this,"destroyed",!1),aa(this,"ws",null),aa(this,"writeBuffer"),aa(this,"tlsState",0),aa(this,"tlsRead"),aa(this,"tlsWrite")}static get poolQueryViaFetch(){return a.opts.poolQueryViaFetch??a.defaults.poolQueryViaFetch}static set poolQueryViaFetch(b){a.opts.poolQueryViaFetch=b}static get fetchEndpoint(){return a.opts.fetchEndpoint??a.defaults.fetchEndpoint}static set fetchEndpoint(b){a.opts.fetchEndpoint=b}static get fetchConnectionCache(){return!0}static set fetchConnectionCache(a){console.warn("The `fetchConnectionCache` option is deprecated (now always `true`)")}static get fetchFunction(){return a.opts.fetchFunction??a.defaults.fetchFunction}static set fetchFunction(b){a.opts.fetchFunction=b}static get webSocketConstructor(){return a.opts.webSocketConstructor??a.defaults.webSocketConstructor}static set webSocketConstructor(b){a.opts.webSocketConstructor=b}get webSocketConstructor(){return this.opts.webSocketConstructor??a.webSocketConstructor}set webSocketConstructor(a){this.opts.webSocketConstructor=a}static get wsProxy(){return a.opts.wsProxy??a.defaults.wsProxy}static set wsProxy(b){a.opts.wsProxy=b}get wsProxy(){return this.opts.wsProxy??a.wsProxy}set wsProxy(a){this.opts.wsProxy=a}static get coalesceWrites(){return a.opts.coalesceWrites??a.defaults.coalesceWrites}static set coalesceWrites(b){a.opts.coalesceWrites=b}get coalesceWrites(){return this.opts.coalesceWrites??a.coalesceWrites}set coalesceWrites(a){this.opts.coalesceWrites=a}static get useSecureWebSocket(){return a.opts.useSecureWebSocket??a.defaults.useSecureWebSocket}static set useSecureWebSocket(b){a.opts.useSecureWebSocket=b}get useSecureWebSocket(){return this.opts.useSecureWebSocket??a.useSecureWebSocket}set useSecureWebSocket(a){this.opts.useSecureWebSocket=a}static get forceDisablePgSSL(){return a.opts.forceDisablePgSSL??a.defaults.forceDisablePgSSL}static set forceDisablePgSSL(b){a.opts.forceDisablePgSSL=b}get forceDisablePgSSL(){return this.opts.forceDisablePgSSL??a.forceDisablePgSSL}set forceDisablePgSSL(a){this.opts.forceDisablePgSSL=a}static get disableSNI(){return a.opts.disableSNI??a.defaults.disableSNI}static set disableSNI(b){a.opts.disableSNI=b}get disableSNI(){return this.opts.disableSNI??a.disableSNI}set disableSNI(a){this.opts.disableSNI=a}static get disableWarningInBrowsers(){return a.opts.disableWarningInBrowsers??a.defaults.disableWarningInBrowsers}static set disableWarningInBrowsers(b){a.opts.disableWarningInBrowsers=b}get disableWarningInBrowsers(){return this.opts.disableWarningInBrowsers??a.disableWarningInBrowsers}set disableWarningInBrowsers(a){this.opts.disableWarningInBrowsers=a}static get pipelineConnect(){return a.opts.pipelineConnect??a.defaults.pipelineConnect}static set pipelineConnect(b){a.opts.pipelineConnect=b}get pipelineConnect(){return this.opts.pipelineConnect??a.pipelineConnect}set pipelineConnect(a){this.opts.pipelineConnect=a}static get subtls(){return a.opts.subtls??a.defaults.subtls}static set subtls(b){a.opts.subtls=b}get subtls(){return this.opts.subtls??a.subtls}set subtls(a){this.opts.subtls=a}static get pipelineTLS(){return a.opts.pipelineTLS??a.defaults.pipelineTLS}static set pipelineTLS(b){a.opts.pipelineTLS=b}get pipelineTLS(){return this.opts.pipelineTLS??a.pipelineTLS}set pipelineTLS(a){this.opts.pipelineTLS=a}static get rootCerts(){return a.opts.rootCerts??a.defaults.rootCerts}static set rootCerts(b){a.opts.rootCerts=b}get rootCerts(){return this.opts.rootCerts??a.rootCerts}set rootCerts(a){this.opts.rootCerts=a}wsProxyAddrForHost(a,b){let c=this.wsProxy;if(void 0===c)throw Error("No WebSocket proxy is configured. Please see https://github.com/neondatabase/serverless/blob/main/CONFIG.md#wsproxy-string--host-string-port-number--string--string");return"function"==typeof c?c(a,b):`${c}?address=${a}:${b}`}setNoDelay(){return this}setKeepAlive(){return this}ref(){return this}unref(){return this}connect(a,b,c){this.connecting=!0,c&&this.once("connect",c);let d=V(()=>{this.connecting=!1,this.pending=!1,this.emit("connect"),this.emit("ready")},"handleWebSocketOpen"),e=V((a,b=!1)=>{a.binaryType="arraybuffer",a.addEventListener("error",a=>{this.emit("error",a),this.emit("close")}),a.addEventListener("message",a=>{if(0===this.tlsState){let b=M.from(a.data);this.emit("data",b)}}),a.addEventListener("close",()=>{this.emit("close")}),b?d():a.addEventListener("open",d)},"configureWebSocket"),f;try{f=this.wsProxyAddrForHost(b,"string"==typeof a?parseInt(a,10):a)}catch(a){this.emit("error",a),this.emit("close");return}try{let a=(this.useSecureWebSocket?"wss:":"ws:")+"//"+f;if(void 0!==this.webSocketConstructor)this.ws=new this.webSocketConstructor(a),e(this.ws);else try{this.ws=new WebSocket(a),e(this.ws)}catch{this.ws=new __unstable_WebSocket(a),e(this.ws)}}catch(a){fetch((this.useSecureWebSocket?"https:":"http:")+"//"+f,{headers:{Upgrade:"websocket"}}).then(b=>{if(this.ws=b.webSocket,null==this.ws)throw a;this.ws.accept(),e(this.ws,!0)}).catch(a=>{this.emit("error",Error(`All attempts to open a WebSocket to connect to the database failed. Please refer \
to https://github.com/neondatabase/serverless/blob/main/CONFIG.md#websocketconstructor-typeof-websoc\
ket--undefined. Details: ${a}`)),this.emit("close")})}}async startTls(a){if(void 0===this.subtls)throw Error("For Postgres SSL connections, you must set `neonConfig.subtls` to the subtls library. See https://github.com/neondatabase/serverless/blob/main/CONFIG.md for more information.");this.tlsState=1;let b=await this.subtls.TrustedCert.databaseFromPEM(this.rootCerts),c=new this.subtls.WebSocketReadQueue(this.ws),d=c.read.bind(c),e=this.rawWrite.bind(this),{read:f,write:g}=await this.subtls.startTls(a,b,d,e,{useSNI:!this.disableSNI,expectPreData:this.pipelineTLS?new Uint8Array([83]):void 0});this.tlsRead=f,this.tlsWrite=g,this.tlsState=2,this.encrypted=!0,this.authorized=!0,this.emit("secureConnection",this),this.tlsReadLoop()}async tlsReadLoop(){for(;;){let a=await this.tlsRead();if(void 0===a)break;{let b=M.from(a);this.emit("data",b)}}}rawWrite(a){if(!this.coalesceWrites){this.ws&&this.ws.send(a);return}if(void 0===this.writeBuffer)this.writeBuffer=a,setTimeout(()=>{this.ws&&this.ws.send(this.writeBuffer),this.writeBuffer=void 0},0);else{let b=new Uint8Array(this.writeBuffer.length+a.length);b.set(this.writeBuffer),b.set(a,this.writeBuffer.length),this.writeBuffer=b}}write(a,b="utf8",c=a=>{}){return 0===a.length?c():("string"==typeof a&&(a=M.from(a,b)),0===this.tlsState?(this.rawWrite(a),c()):1===this.tlsState?this.once("secureConnection",()=>{this.write(a,b,c)}):(this.tlsWrite(a),c())),!0}end(a=M.alloc(0),b="utf8",c=()=>{}){return this.write(a,b,()=>{this.ws.close(),c()}),this}destroy(){return this.destroyed=!0,this.end()}},V(ak,"Socket"),aa(ak,"defaults",{poolQueryViaFetch:!1,fetchEndpoint:V((a,b,c)=>"https://"+(c?.jwtAuth?a.replace(aj,"apiauth."):a.replace(aj,"api."))+"/sql","fetchEndpoint"),fetchConnectionCache:!0,fetchFunction:void 0,webSocketConstructor:void 0,wsProxy:V(a=>a+"/v2","wsProxy"),useSecureWebSocket:!0,forceDisablePgSSL:!0,coalesceWrites:!0,pipelineConnect:"password",subtls:void 0,rootCerts:"",pipelineTLS:!1,disableSNI:!1,disableWarningInBrowsers:!1}),aa(ak,"opts",{}),al=ak}),an={};function ao(a,b=!1){let{protocol:c}=new URL(a),{username:d,password:e,host:f,hostname:g,port:h,pathname:i,search:j,searchParams:k,hash:l}=new URL("http:"+a.substring(c.length));e=decodeURIComponent(e),d=decodeURIComponent(d),i=decodeURIComponent(i);let m=d+":"+e,n=b?Object.fromEntries(k.entries()):j;return{href:a,protocol:c,auth:m,username:d,password:e,host:f,hostname:g,port:h,pathname:i,search:j,query:n,hash:l}}Y(an,{parse:()=>ao});var ap=W(()=>{ae(),V(ao,"parse")}),aq=X(a=>{ae(),a.parse=function(a,b){return new c(a,b).parse()};var b=class a{constructor(a,b){this.source=a,this.transform=b||d,this.position=0,this.entries=[],this.recorded=[],this.dimension=0}isEof(){return this.position>=this.source.length}nextCharacter(){var a=this.source[this.position++];return"\\"===a?{value:this.source[this.position++],escaped:!0}:{value:a,escaped:!1}}record(a){this.recorded.push(a)}newEntry(a){var b;(this.recorded.length>0||a)&&("NULL"!==(b=this.recorded.join(""))||a||(b=null),null!==b&&(b=this.transform(b)),this.entries.push(b),this.recorded=[])}consumeDimensions(){if("["===this.source[0])for(;!this.isEof()&&"="!==this.nextCharacter().value;);}parse(b){var c,d,e;for(this.consumeDimensions();!this.isEof();)if("{"!==(c=this.nextCharacter()).value||e){if("}"!==c.value||e)'"'!==c.value||c.escaped?","!==c.value||e?this.record(c.value):this.newEntry():(e&&this.newEntry(!0),e=!e);else if(this.dimension--,!this.dimension&&(this.newEntry(),b))return this.entries}else this.dimension++,this.dimension>1&&(d=new a(this.source.substr(this.position-1),this.transform),this.entries.push(d.parse(!0)),this.position+=d.position-2);if(0!==this.dimension)throw Error("array dimension not balanced");return this.entries}};V(b,"ArrayParser");var c=b;function d(a){return a}V(d,"identity")}),ar=X((a,b)=>{ae();var c=aq();b.exports={create:V(function(a,b){return{parse:V(function(){return c.parse(a,b)},"parse")}},"create")}}),as=X((a,b)=>{ae();var c=/(\d{1,})-(\d{2})-(\d{2}) (\d{2}):(\d{2}):(\d{2})(\.\d{1,})?.*?( BC)?$/,d=/^(\d{1,})-(\d{2})-(\d{2})( BC)?$/,e=/([Z+-])(\d{2})?:?(\d{2})?:?(\d{2})?/,f=/^-?infinity$/;function g(a){var b=d.exec(a);if(b){var c=parseInt(b[1],10);b[4]&&(c=i(c));var e=new Date(c,parseInt(b[2],10)-1,b[3]);return j(c)&&e.setFullYear(c),e}}function h(a){if(a.endsWith("+00"))return 0;var b=e.exec(a.split(" ")[1]);if(b){var c=b[1];return"Z"===c?0:(3600*parseInt(b[2],10)+60*parseInt(b[3]||0,10)+parseInt(b[4]||0,10))*("-"===c?-1:1)*1e3}}function i(a){return-(a-1)}function j(a){return a>=0&&a<100}b.exports=V(function(a){if(f.test(a))return Number(a.replace("i","I"));var b=c.exec(a);if(!b)return g(a)||null;var d=!!b[8],e=parseInt(b[1],10);d&&(e=i(e));var k=parseInt(b[2],10)-1,l=b[3],m=parseInt(b[4],10),n=parseInt(b[5],10),o=parseInt(b[6],10),p=b[7];p=p?1e3*parseFloat(p):0;var q,r=h(a);return null!=r?(q=new Date(Date.UTC(e,k,l,m,n,o,p)),j(e)&&q.setUTCFullYear(e),0!==r&&q.setTime(q.getTime()-r)):(q=new Date(e,k,l,m,n,o,p),j(e)&&q.setFullYear(e)),q},"parseDate"),V(g,"getDate"),V(h,"timeZoneOffset"),V(i,"bcYearToNegativeYear"),V(j,"is0To99")}),at=X((a,b)=>{ae(),b.exports=d;var c=Object.prototype.hasOwnProperty;function d(a){for(var b=1;b<arguments.length;b++){var d=arguments[b];for(var e in d)c.call(d,e)&&(a[e]=d[e])}return a}V(d,"extend")}),au=X((a,b)=>{ae();var c=at();function d(a){if(!(this instanceof d))return new d(a);c(this,n(a))}b.exports=d,V(d,"PostgresInterval");var e=["seconds","minutes","hours","days","months","years"];d.prototype.toPostgres=function(){var a=e.filter(this.hasOwnProperty,this);return this.milliseconds&&0>a.indexOf("seconds")&&a.push("seconds"),0===a.length?"0":a.map(function(a){var b=this[a]||0;return"seconds"===a&&this.milliseconds&&(b=(b+this.milliseconds/1e3).toFixed(6).replace(/\.?0+$/,"")),b+" "+a},this).join(" ")};var f={years:"Y",months:"M",days:"D",hours:"H",minutes:"M",seconds:"S"},g=["years","months","days"],h=["hours","minutes","seconds"];d.prototype.toISOString=d.prototype.toISO=function(){return"P"+g.map(a,this).join("")+"T"+h.map(a,this).join("");function a(a){var b=this[a]||0;return"seconds"===a&&this.milliseconds&&(b=(b+this.milliseconds/1e3).toFixed(6).replace(/0+$/,"")),b+f[a]}};var i="([+-]?\\d+)",j=new RegExp([i+"\\s+years?",i+"\\s+mons?",i+"\\s+days?","([+-])?([\\d]*):(\\d\\d):(\\d\\d)\\.?(\\d{1,6})?"].map(function(a){return"("+a+")?"}).join("\\s*")),k={years:2,months:4,days:6,hours:9,minutes:10,seconds:11,milliseconds:12},l=["hours","minutes","seconds","milliseconds"];function m(a){return parseInt(a+"000000".slice(a.length),10)/1e3}function n(a){if(!a)return{};var b=j.exec(a),c="-"===b[8];return Object.keys(k).reduce(function(a,d){var e=b[k[d]];return e&&(e="milliseconds"===d?m(e):parseInt(e,10))&&(c&&~l.indexOf(d)&&(e*=-1),a[d]=e),a},{})}V(m,"parseMilliseconds"),V(n,"parse")}),av=X((a,b)=>{ae(),b.exports=V(function(a){if(/^\\x/.test(a))return new M(a.substr(2),"hex");for(var b="",c=0;c<a.length;)if("\\"!==a[c])b+=a[c],++c;else if(/[0-7]{3}/.test(a.substr(c+1,3)))b+=String.fromCharCode(parseInt(a.substr(c+1,3),8)),c+=4;else{for(var d=1;c+d<a.length&&"\\"===a[c+d];)d++;for(var e=0;e<Math.floor(d/2);++e)b+="\\";c+=2*Math.floor(d/2)}return new M(b,"binary")},"parseBytea")}),aw=X((a,b)=>{ae();var c=aq(),d=ar(),e=as(),f=au(),g=av();function h(a){return V(function(b){return null===b?b:a(b)},"nullAllowed")}function i(a){return null===a?a:"TRUE"===a||"t"===a||"true"===a||"y"===a||"yes"===a||"on"===a||"1"===a}function j(a){return a?c.parse(a,i):null}function k(a){return parseInt(a,10)}function l(a){return a?c.parse(a,h(k)):null}function m(a){return a?c.parse(a,h(function(a){return u(a).trim()})):null}V(h,"allowNull"),V(i,"parseBool"),V(j,"parseBoolArray"),V(k,"parseBaseTenInt"),V(l,"parseIntegerArray"),V(m,"parseBigIntegerArray");var n=V(function(a){return a?d.create(a,function(a){return null!==a&&(a=w(a)),a}).parse():null},"parsePointArray"),o=V(function(a){return a?d.create(a,function(a){return null!==a&&(a=parseFloat(a)),a}).parse():null},"parseFloatArray"),p=V(function(a){return a?d.create(a).parse():null},"parseStringArray"),q=V(function(a){return a?d.create(a,function(a){return null!==a&&(a=e(a)),a}).parse():null},"parseDateArray"),r=V(function(a){return a?d.create(a,function(a){return null!==a&&(a=f(a)),a}).parse():null},"parseIntervalArray"),s=V(function(a){return a?c.parse(a,h(g)):null},"parseByteAArray"),t=V(function(a){return parseInt(a,10)},"parseInteger"),u=V(function(a){var b=String(a);return/^\d+$/.test(b)?b:a},"parseBigInteger"),v=V(function(a){return a?c.parse(a,h(JSON.parse)):null},"parseJsonArray"),w=V(function(a){return"("!==a[0]?null:{x:parseFloat((a=a.substring(1,a.length-1).split(","))[0]),y:parseFloat(a[1])}},"parsePoint"),x=V(function(a){if("<"!==a[0]&&"("!==a[1])return null;for(var b="(",c="",d=!1,e=2;e<a.length-1;e++){if(d||(b+=a[e]),")"===a[e]){d=!0;continue}d&&","!==a[e]&&(c+=a[e])}var f=w(b);return f.radius=parseFloat(c),f},"parseCircle");b.exports={init:V(function(a){a(20,u),a(21,t),a(23,t),a(26,t),a(700,parseFloat),a(701,parseFloat),a(16,i),a(1082,e),a(1114,e),a(1184,e),a(600,w),a(651,p),a(718,x),a(1e3,j),a(1001,s),a(1005,l),a(1007,l),a(1028,l),a(1016,m),a(1017,n),a(1021,o),a(1022,o),a(1231,o),a(1014,p),a(1015,p),a(1008,p),a(1009,p),a(1040,p),a(1041,p),a(1115,q),a(1182,q),a(1185,q),a(1186,f),a(1187,r),a(17,g),a(114,JSON.parse.bind(JSON)),a(3802,JSON.parse.bind(JSON)),a(199,v),a(3807,v),a(3907,p),a(2951,p),a(791,p),a(1183,p),a(1270,p)},"init")}}),ax=X((a,b)=>{function c(a){var b=a.readInt32BE(0),c=a.readUInt32BE(4),d="";b<0&&(b=~b+(0===c),c=~c+1>>>0,d="-");var e,f,g,h,i,j,k="";if(e=b%1e6,b=b/1e6>>>0,c=(f=0x100000000*e+c)/1e6>>>0,g=""+(f-1e6*c),0===c&&0===b)return d+g+k;for(h="",i=6-g.length,j=0;j<i;j++)h+="0";if(k=h+g+k,e=b%1e6,b=b/1e6>>>0,c=(f=0x100000000*e+c)/1e6>>>0,g=""+(f-1e6*c),0===c&&0===b)return d+g+k;for(h="",i=6-g.length,j=0;j<i;j++)h+="0";if(k=h+g+k,e=b%1e6,b=b/1e6>>>0,c=(f=0x100000000*e+c)/1e6>>>0,g=""+(f-1e6*c),0===c&&0===b)return d+g+k;for(h="",i=6-g.length,j=0;j<i;j++)h+="0";return k=h+g+k,d+(g=""+(f=0x100000000*(e=b%1e6)+c)%1e6)+k}ae(),V(c,"readInt8"),b.exports=c}),ay=X((a,b)=>{ae();var c=ax(),d=V(function(a,b,c,d,e){c=c||0,d=d||!1,e=e||function(a,b,c){return a*Math.pow(2,c)+b};var f=c>>3,g=V(function(a){return d?255&~a:a},"inv"),h=255,i=8-c%8;b<i&&(h=255<<8-b&255,i=b),c&&(h>>=c%8);var j=0;c%8+b>=8&&(j=e(0,g(a[f])&h,i));for(var k=b+c>>3,l=f+1;l<k;l++)j=e(j,g(a[l]),8);var m=(b+c)%8;return m>0&&(j=e(j,g(a[k])>>8-m,m)),j},"parseBits"),e=V(function(a,b,c){var e=Math.pow(2,c-1)-1,f=d(a,1),g=d(a,c,1);if(0===g)return 0;var h=1,i=d(a,b,c+1,!1,V(function(a,b,c){0===a&&(a=1);for(var d=1;d<=c;d++)h/=2,(b&1<<c-d)>0&&(a+=h);return a},"parsePrecisionBits"));return g==Math.pow(2,c+1)-1?0===i?0===f?1/0:-1/0:NaN:(0===f?1:-1)*Math.pow(2,g-e)*i},"parseFloatFromBits"),f=V(function(a){return 1==d(a,1)?-1*(d(a,15,1,!0)+1):d(a,15,1)},"parseInt16"),g=V(function(a){return 1==d(a,1)?-1*(d(a,31,1,!0)+1):d(a,31,1)},"parseInt32"),h=V(function(a){return e(a,23,8)},"parseFloat32"),i=V(function(a){return e(a,52,11)},"parseFloat64"),j=V(function(a){var b=d(a,16,32);if(49152==b)return NaN;for(var c=Math.pow(1e4,d(a,16,16)),e=0,f=d(a,16),g=0;g<f;g++)e+=d(a,16,64+16*g)*c,c/=1e4;var h=Math.pow(10,d(a,16,48));return(0===b?1:-1)*Math.round(e*h)/h},"parseNumeric"),k=V(function(a,b){var c=d(b,1),e=d(b,63,1),f=new Date((0===c?1:-1)*e/1e3+9466848e5);return a||f.setTime(f.getTime()+6e4*f.getTimezoneOffset()),f.usec=e%1e3,f.getMicroSeconds=function(){return this.usec},f.setMicroSeconds=function(a){this.usec=a},f.getUTCMicroSeconds=function(){return this.usec},f},"parseDate"),l=V(function(a){for(var b=d(a,32),c=(d(a,32,32),d(a,32,64)),e=96,f=[],g=0;g<b;g++)f[g]=d(a,32,e),e+=64;var h=V(function(b){var c,f=d(a,32,e);return(e+=32,0xffffffff==f)?null:23==b||20==b?(c=d(a,8*f,e),e+=8*f,c):25==b?a.toString(this.encoding,e>>3,(e+=f<<3)>>3):void console.log("ERROR: ElementType not implemented: "+b)},"parseElement"),i=V(function(a,b){var c,d=[];if(a.length>1){var e=a.shift();for(c=0;c<e;c++)d[c]=i(a,b);a.unshift(e)}else for(c=0;c<a[0];c++)d[c]=h(b);return d},"parse");return i(f,c)},"parseArray"),m=V(function(a){return a.toString("utf8")},"parseText"),n=V(function(a){return null===a?null:d(a,8)>0},"parseBool");b.exports={init:V(function(a){a(20,c),a(21,f),a(23,g),a(26,g),a(1700,j),a(700,h),a(701,i),a(16,n),a(1114,k.bind(null,!1)),a(1184,k.bind(null,!0)),a(1e3,l),a(1007,l),a(1016,l),a(1008,l),a(1009,l),a(25,m)},"init")}}),az=X((a,b)=>{ae(),b.exports={BOOL:16,BYTEA:17,CHAR:18,INT8:20,INT2:21,INT4:23,REGPROC:24,TEXT:25,OID:26,TID:27,XID:28,CID:29,JSON:114,XML:142,PG_NODE_TREE:194,SMGR:210,PATH:602,POLYGON:604,CIDR:650,FLOAT4:700,FLOAT8:701,ABSTIME:702,RELTIME:703,TINTERVAL:704,CIRCLE:718,MACADDR8:774,MONEY:790,MACADDR:829,INET:869,ACLITEM:1033,BPCHAR:1042,VARCHAR:1043,DATE:1082,TIME:1083,TIMESTAMP:1114,TIMESTAMPTZ:1184,INTERVAL:1186,TIMETZ:1266,BIT:1560,VARBIT:1562,NUMERIC:1700,REFCURSOR:1790,REGPROCEDURE:2202,REGOPER:2203,REGOPERATOR:2204,REGCLASS:2205,REGTYPE:2206,UUID:2950,TXID_SNAPSHOT:2970,PG_LSN:3220,PG_NDISTINCT:3361,PG_DEPENDENCIES:3402,TSVECTOR:3614,TSQUERY:3615,GTSVECTOR:3642,REGCONFIG:3734,REGDICTIONARY:3769,JSONB:3802,REGNAMESPACE:4089,REGROLE:4096}}),aA=X(a=>{ae();var b=aw(),c=ay(),d=ar(),e=az();a.getTypeParser=h,a.setTypeParser=i,a.arrayParser=d,a.builtins=e;var f={text:{},binary:{}};function g(a){return String(a)}function h(a,b){return f[b=b||"text"]&&f[b][a]||g}function i(a,b,c){"function"==typeof b&&(c=b,b="text"),f[b][a]=c}V(g,"noParse"),V(h,"getTypeParser"),V(i,"setTypeParser"),b.init(function(a,b){f.text[a]=b}),c.init(function(a,b){f.binary[a]=b})}),aB=X((a,b)=>{ae();var c=aA();function d(a){this._types=a||c,this.text={},this.binary={}}V(d,"TypeOverrides"),d.prototype.getOverrides=function(a){switch(a){case"text":return this.text;case"binary":return this.binary;default:return{}}},d.prototype.setTypeParser=function(a,b,c){"function"==typeof b&&(c=b,b="text"),this.getOverrides(b)[a]=c},d.prototype.getTypeParser=function(a,b){return b=b||"text",this.getOverrides(b)[a]||this._types.getTypeParser(a,b)},b.exports=d});function aC(a){let b=0x6a09e667,c=0xbb67ae85,d=0x3c6ef372,e=0xa54ff53a,f=0x510e527f,g=0x9b05688c,h=0x1f83d9ab,i=0x5be0cd19,j=0,k=0,l=[0x428a2f98,0x71374491,0xb5c0fbcf,0xe9b5dba5,0x3956c25b,0x59f111f1,0x923f82a4,0xab1c5ed5,0xd807aa98,0x12835b01,0x243185be,0x550c7dc3,0x72be5d74,0x80deb1fe,0x9bdc06a7,0xc19bf174,0xe49b69c1,0xefbe4786,0xfc19dc6,0x240ca1cc,0x2de92c6f,0x4a7484aa,0x5cb0a9dc,0x76f988da,0x983e5152,0xa831c66d,0xb00327c8,0xbf597fc7,0xc6e00bf3,0xd5a79147,0x6ca6351,0x14292967,0x27b70a85,0x2e1b2138,0x4d2c6dfc,0x53380d13,0x650a7354,0x766a0abb,0x81c2c92e,0x92722c85,0xa2bfe8a1,0xa81a664b,0xc24b8b70,0xc76c51a3,0xd192e819,0xd6990624,0xf40e3585,0x106aa070,0x19a4c116,0x1e376c08,0x2748774c,0x34b0bcb5,0x391c0cb3,0x4ed8aa4a,0x5b9cca4f,0x682e6ff3,0x748f82ee,0x78a5636f,0x84c87814,0x8cc70208,0x90befffa,0xa4506ceb,0xbef9a3f7,0xc67178f2],m=V((a,b)=>a>>>b|a<<32-b,"rrot"),n=new Uint32Array(64),o=new Uint8Array(64),p=V(()=>{for(let a=0,b=0;a<16;a++,b+=4)n[a]=o[b]<<24|o[b+1]<<16|o[b+2]<<8|o[b+3];for(let a=16;a<64;a++){let b=m(n[a-15],7)^m(n[a-15],18)^n[a-15]>>>3,c=m(n[a-2],17)^m(n[a-2],19)^n[a-2]>>>10;n[a]=n[a-16]+b+n[a-7]+c|0}let a=b,j=c,p=d,q=e,r=f,s=g,t=h,u=i;for(let b=0;b<64;b++){let c=u+(m(r,6)^m(r,11)^m(r,25))+(r&s^~r&t)+l[b]+n[b]|0,d=(m(a,2)^m(a,13)^m(a,22))+(a&j^a&p^j&p)|0;u=t,t=s,s=r,r=q+c|0,q=p,p=j,j=a,a=c+d|0}b=b+a|0,c=c+j|0,d=d+p|0,e=e+q|0,f=f+r|0,g=g+s|0,h=h+t|0,i=i+u|0,k=0},"process"),q=V(a=>{"string"==typeof a&&(a=new TextEncoder().encode(a));for(let b=0;b<a.length;b++)o[k++]=a[b],64===k&&p();j+=a.length},"add"),r=V(()=>{if(o[k++]=128,64==k&&p(),k+8>64){for(;k<64;)o[k++]=0;p()}for(;k<58;)o[k++]=0;let a=8*j;o[k++]=a/0x10000000000&255,o[k++]=a/0x100000000&255,o[k++]=a>>>24,o[k++]=a>>>16&255,o[k++]=a>>>8&255,o[k++]=255&a,p();let l=new Uint8Array(32);return l[0]=b>>>24,l[1]=b>>>16&255,l[2]=b>>>8&255,l[3]=255&b,l[4]=c>>>24,l[5]=c>>>16&255,l[6]=c>>>8&255,l[7]=255&c,l[8]=d>>>24,l[9]=d>>>16&255,l[10]=d>>>8&255,l[11]=255&d,l[12]=e>>>24,l[13]=e>>>16&255,l[14]=e>>>8&255,l[15]=255&e,l[16]=f>>>24,l[17]=f>>>16&255,l[18]=f>>>8&255,l[19]=255&f,l[20]=g>>>24,l[21]=g>>>16&255,l[22]=g>>>8&255,l[23]=255&g,l[24]=h>>>24,l[25]=h>>>16&255,l[26]=h>>>8&255,l[27]=255&h,l[28]=i>>>24,l[29]=i>>>16&255,l[30]=i>>>8&255,l[31]=255&i,l},"digest");return void 0===a?{add:q,digest:r}:(q(a),r())}var aD,aE,aF=W(()=>{ae(),V(aC,"sha256")}),aG=W(()=>{ae(),V(aD=class a{constructor(){aa(this,"_dataLength",0),aa(this,"_bufferLength",0),aa(this,"_state",new Int32Array(4)),aa(this,"_buffer",new ArrayBuffer(68)),aa(this,"_buffer8"),aa(this,"_buffer32"),this._buffer8=new Uint8Array(this._buffer,0,68),this._buffer32=new Uint32Array(this._buffer,0,17),this.start()}static hashByteArray(a,b=!1){return this.onePassHasher.start().appendByteArray(a).end(b)}static hashStr(a,b=!1){return this.onePassHasher.start().appendStr(a).end(b)}static hashAsciiStr(a,b=!1){return this.onePassHasher.start().appendAsciiStr(a).end(b)}static _hex(b){let c=a.hexChars,d=a.hexOut,e,f,g,h;for(h=0;h<4;h+=1)for(f=8*h,e=b[h],g=0;g<8;g+=2)d[f+1+g]=c.charAt(15&e),e>>>=4,d[f+0+g]=c.charAt(15&e),e>>>=4;return d.join("")}static _md5cycle(a,b){let c=a[0],d=a[1],e=a[2],f=a[3];c+=(d&e|~d&f)+b[0]-0x28955b88|0,f+=((c=(c<<7|c>>>25)+d|0)&d|~c&e)+b[1]-0x173848aa|0,e+=((f=(f<<12|f>>>20)+c|0)&c|~f&d)+b[2]+0x242070db|0,d+=((e=(e<<17|e>>>15)+f|0)&f|~e&c)+b[3]-0x3e423112|0,c+=((d=(d<<22|d>>>10)+e|0)&e|~d&f)+b[4]-0xa83f051|0,f+=((c=(c<<7|c>>>25)+d|0)&d|~c&e)+b[5]+0x4787c62a|0,e+=((f=(f<<12|f>>>20)+c|0)&c|~f&d)+b[6]-0x57cfb9ed|0,d+=((e=(e<<17|e>>>15)+f|0)&f|~e&c)+b[7]-0x2b96aff|0,c+=((d=(d<<22|d>>>10)+e|0)&e|~d&f)+b[8]+0x698098d8|0,f+=((c=(c<<7|c>>>25)+d|0)&d|~c&e)+b[9]-0x74bb0851|0,e+=((f=(f<<12|f>>>20)+c|0)&c|~f&d)+b[10]-42063|0,d+=((e=(e<<17|e>>>15)+f|0)&f|~e&c)+b[11]-0x76a32842|0,c+=((d=(d<<22|d>>>10)+e|0)&e|~d&f)+b[12]+0x6b901122|0,f+=((c=(c<<7|c>>>25)+d|0)&d|~c&e)+b[13]-0x2678e6d|0,e+=((f=(f<<12|f>>>20)+c|0)&c|~f&d)+b[14]-0x5986bc72|0,d+=((e=(e<<17|e>>>15)+f|0)&f|~e&c)+b[15]+0x49b40821|0,c+=((d=(d<<22|d>>>10)+e|0)&f|e&~f)+b[1]-0x9e1da9e|0,f+=((c=(c<<5|c>>>27)+d|0)&e|d&~e)+b[6]-0x3fbf4cc0|0,e+=((f=(f<<9|f>>>23)+c|0)&d|c&~d)+b[11]+0x265e5a51|0,d+=((e=(e<<14|e>>>18)+f|0)&c|f&~c)+b[0]-0x16493856|0,c+=((d=(d<<20|d>>>12)+e|0)&f|e&~f)+b[5]-0x29d0efa3|0,f+=((c=(c<<5|c>>>27)+d|0)&e|d&~e)+b[10]+0x2441453|0,e+=((f=(f<<9|f>>>23)+c|0)&d|c&~d)+b[15]-0x275e197f|0,d+=((e=(e<<14|e>>>18)+f|0)&c|f&~c)+b[4]-0x182c0438|0,c+=((d=(d<<20|d>>>12)+e|0)&f|e&~f)+b[9]+0x21e1cde6|0,f+=((c=(c<<5|c>>>27)+d|0)&e|d&~e)+b[14]-0x3cc8f82a|0,e+=((f=(f<<9|f>>>23)+c|0)&d|c&~d)+b[3]-0xb2af279|0,d+=((e=(e<<14|e>>>18)+f|0)&c|f&~c)+b[8]+0x455a14ed|0,c+=((d=(d<<20|d>>>12)+e|0)&f|e&~f)+b[13]-0x561c16fb|0,f+=((c=(c<<5|c>>>27)+d|0)&e|d&~e)+b[2]-0x3105c08|0,e+=((f=(f<<9|f>>>23)+c|0)&d|c&~d)+b[7]+0x676f02d9|0,d+=((e=(e<<14|e>>>18)+f|0)&c|f&~c)+b[12]-0x72d5b376|0,c+=((d=(d<<20|d>>>12)+e|0)^e^f)+b[5]-378558|0,f+=((c=(c<<4|c>>>28)+d|0)^d^e)+b[8]-0x788e097f|0,e+=((f=(f<<11|f>>>21)+c|0)^c^d)+b[11]+0x6d9d6122|0,d+=((e=(e<<16|e>>>16)+f|0)^f^c)+b[14]-0x21ac7f4|0,c+=((d=(d<<23|d>>>9)+e|0)^e^f)+b[1]-0x5b4115bc|0,f+=((c=(c<<4|c>>>28)+d|0)^d^e)+b[4]+0x4bdecfa9|0,e+=((f=(f<<11|f>>>21)+c|0)^c^d)+b[7]-0x944b4a0|0,d+=((e=(e<<16|e>>>16)+f|0)^f^c)+b[10]-0x41404390|0,c+=((d=(d<<23|d>>>9)+e|0)^e^f)+b[13]+0x289b7ec6|0,f+=((c=(c<<4|c>>>28)+d|0)^d^e)+b[0]-0x155ed806|0,e+=((f=(f<<11|f>>>21)+c|0)^c^d)+b[3]-0x2b10cf7b|0,d+=((e=(e<<16|e>>>16)+f|0)^f^c)+b[6]+0x4881d05|0,c+=((d=(d<<23|d>>>9)+e|0)^e^f)+b[9]-0x262b2fc7|0,f+=((c=(c<<4|c>>>28)+d|0)^d^e)+b[12]-0x1924661b|0,e+=((f=(f<<11|f>>>21)+c|0)^c^d)+b[15]+0x1fa27cf8|0,d+=((e=(e<<16|e>>>16)+f|0)^f^c)+b[2]-0x3b53a99b|0,d=(d<<23|d>>>9)+e|0,c+=(e^(d|~f))+b[0]-0xbd6ddbc|0,c=(c<<6|c>>>26)+d|0,f+=(d^(c|~e))+b[7]+0x432aff97|0,f=(f<<10|f>>>22)+c|0,e+=(c^(f|~d))+b[14]-0x546bdc59|0,e=(e<<15|e>>>17)+f|0,d+=(f^(e|~c))+b[5]-0x36c5fc7|0,d=(d<<21|d>>>11)+e|0,c+=(e^(d|~f))+b[12]+0x655b59c3|0,c=(c<<6|c>>>26)+d|0,f+=(d^(c|~e))+b[3]-0x70f3336e|0,f=(f<<10|f>>>22)+c|0,e+=(c^(f|~d))+b[10]-1051523|0,e=(e<<15|e>>>17)+f|0,d+=(f^(e|~c))+b[1]-0x7a7ba22f|0,d=(d<<21|d>>>11)+e|0,c+=(e^(d|~f))+b[8]+0x6fa87e4f|0,c=(c<<6|c>>>26)+d|0,f+=(d^(c|~e))+b[15]-0x1d31920|0,f=(f<<10|f>>>22)+c|0,e+=(c^(f|~d))+b[6]-0x5cfebcec|0,e=(e<<15|e>>>17)+f|0,d+=(f^(e|~c))+b[13]+0x4e0811a1|0,d=(d<<21|d>>>11)+e|0,c+=(e^(d|~f))+b[4]-0x8ac817e|0,c=(c<<6|c>>>26)+d|0,f+=(d^(c|~e))+b[11]-0x42c50dcb|0,f=(f<<10|f>>>22)+c|0,e+=(c^(f|~d))+b[2]+0x2ad7d2bb|0,e=(e<<15|e>>>17)+f|0,d+=(f^(e|~c))+b[9]-0x14792c6f|0,d=(d<<21|d>>>11)+e|0,a[0]=c+a[0]|0,a[1]=d+a[1]|0,a[2]=e+a[2]|0,a[3]=f+a[3]|0}start(){return this._dataLength=0,this._bufferLength=0,this._state.set(a.stateIdentity),this}appendStr(b){let c=this._buffer8,d=this._buffer32,e=this._bufferLength,f,g;for(g=0;g<b.length;g+=1){if((f=b.charCodeAt(g))<128)c[e++]=f;else if(f<2048)c[e++]=(f>>>6)+192,c[e++]=63&f|128;else if(f<55296||f>56319)c[e++]=(f>>>12)+224,c[e++]=f>>>6&63|128,c[e++]=63&f|128;else{if((f=(f-55296)*1024+(b.charCodeAt(++g)-56320)+65536)>1114111)throw Error("Unicode standard supports code points up to U+10FFFF");c[e++]=(f>>>18)+240,c[e++]=f>>>12&63|128,c[e++]=f>>>6&63|128,c[e++]=63&f|128}e>=64&&(this._dataLength+=64,a._md5cycle(this._state,d),e-=64,d[0]=d[16])}return this._bufferLength=e,this}appendAsciiStr(b){let c=this._buffer8,d=this._buffer32,e=this._bufferLength,f,g=0;for(;;){for(f=Math.min(b.length-g,64-e);f--;)c[e++]=b.charCodeAt(g++);if(e<64)break;this._dataLength+=64,a._md5cycle(this._state,d),e=0}return this._bufferLength=e,this}appendByteArray(b){let c=this._buffer8,d=this._buffer32,e=this._bufferLength,f,g=0;for(;;){for(f=Math.min(b.length-g,64-e);f--;)c[e++]=b[g++];if(e<64)break;this._dataLength+=64,a._md5cycle(this._state,d),e=0}return this._bufferLength=e,this}getState(){let a=this._state;return{buffer:String.fromCharCode.apply(null,Array.from(this._buffer8)),buflen:this._bufferLength,length:this._dataLength,state:[a[0],a[1],a[2],a[3]]}}setState(a){let b=a.buffer,c=a.state,d=this._state,e;for(this._dataLength=a.length,this._bufferLength=a.buflen,d[0]=c[0],d[1]=c[1],d[2]=c[2],d[3]=c[3],e=0;e<b.length;e+=1)this._buffer8[e]=b.charCodeAt(e)}end(b=!1){let c=this._bufferLength,d=this._buffer8,e=this._buffer32,f=(c>>2)+1;this._dataLength+=c;let g=8*this._dataLength;if(d[c]=128,d[c+1]=d[c+2]=d[c+3]=0,e.set(a.buffer32Identity.subarray(f),f),c>55&&(a._md5cycle(this._state,e),e.set(a.buffer32Identity)),g<=0xffffffff)e[14]=g;else{let a=g.toString(16).match(/(.*?)(.{0,8})$/);if(null===a)return;let b=parseInt(a[2],16),c=parseInt(a[1],16)||0;e[14]=b,e[15]=c}return a._md5cycle(this._state,e),b?this._state:a._hex(this._state)}},"Md5"),aa(aD,"stateIdentity",new Int32Array([0x67452301,-0x10325477,-0x67452302,0x10325476])),aa(aD,"buffer32Identity",new Int32Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0])),aa(aD,"hexChars","0123456789abcdef"),aa(aD,"hexOut",[]),aa(aD,"onePassHasher",new aD),aE=aD}),aH={};function aI(a){return crypto.getRandomValues(M.alloc(a))}function aJ(a){if("sha256"===a)return{update:V(function(a){return{digest:V(function(){return M.from(aC(a))},"digest")}},"update")};if("md5"===a)return{update:V(function(a){return{digest:V(function(){return"string"==typeof a?aE.hashStr(a):aE.hashByteArray(a)},"digest")}},"update")};throw Error(`Hash type '${a}' not supported`)}function aK(a,b){if("sha256"!==a)throw Error(`\
Only sha256 is supported (requested: '${a}')`);return{update:V(function(a){return{digest:V(function(){"string"==typeof b&&(b=new TextEncoder().encode(b)),"string"==typeof a&&(a=new TextEncoder().encode(a));let c=b.length;if(c>64)b=aC(b);else if(c<64){let a=new Uint8Array(64);a.set(b),b=a}let d=new Uint8Array(64),e=new Uint8Array(64);for(let a=0;a<64;a++)d[a]=54^b[a],e[a]=92^b[a];let f=new Uint8Array(a.length+64);f.set(d,0),f.set(a,64);let g=new Uint8Array(96);return g.set(e,0),g.set(aC(f),64),M.from(aC(g))},"digest")}},"update")}}Y(aH,{createHash:()=>aJ,createHmac:()=>aK,randomBytes:()=>aI});var aL=W(()=>{ae(),aF(),aG(),V(aI,"randomBytes"),V(aJ,"createHash"),V(aK,"createHmac")}),aM=X((a,b)=>{ae(),b.exports={host:"localhost",user:"win32"===N.platform?N.env.USERNAME:N.env.USER,database:void 0,password:null,connectionString:void 0,port:5432,rows:0,binary:!1,max:10,idleTimeoutMillis:3e4,client_encoding:"",ssl:!1,application_name:void 0,fallback_application_name:void 0,options:void 0,parseInputDatesAsUTC:!1,statement_timeout:!1,lock_timeout:!1,idle_in_transaction_session_timeout:!1,query_timeout:!1,connect_timeout:0,keepalives:1,keepalives_idle:0};var c=aA(),d=c.getTypeParser(20,"text"),e=c.getTypeParser(1016,"text");b.exports.__defineSetter__("parseInt8",function(a){c.setTypeParser(20,"text",a?c.getTypeParser(23,"text"):d),c.setTypeParser(1016,"text",a?c.getTypeParser(1007,"text"):e)})}),aN=X((a,b)=>{ae();var c=(aL(),_(aH)),d=aM();function e(a){return'"'+a.replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'"'}function f(a){for(var b="{",c=0;c<a.length;c++)c>0&&(b+=","),null===a[c]||typeof a[c]>"u"?b+="NULL":Array.isArray(a[c])?b+=f(a[c]):a[c]instanceof M?b+="\\\\x"+a[c].toString("hex"):b+=e(g(a[c]));return b+"}"}V(e,"escapeElement"),V(f,"arrayString");var g=V(function(a,b){if(null==a)return null;if(a instanceof M)return a;if(ArrayBuffer.isView(a)){var c=M.from(a.buffer,a.byteOffset,a.byteLength);return c.length===a.byteLength?c:c.slice(a.byteOffset,a.byteOffset+a.byteLength)}return a instanceof Date?d.parseInputDatesAsUTC?k(a):j(a):Array.isArray(a)?f(a):"object"==typeof a?h(a,b):a.toString()},"prepareValue");function h(a,b){if(a&&"function"==typeof a.toPostgres){if(-1!==(b=b||[]).indexOf(a))throw Error('circular reference detected while preparing "'+a+'" for query');return b.push(a),g(a.toPostgres(g),b)}return JSON.stringify(a)}function i(a,b){for(a=""+a;a.length<b;)a="0"+a;return a}function j(a){var b=-a.getTimezoneOffset(),c=a.getFullYear(),d=c<1;d&&(c=Math.abs(c)+1);var e=i(c,4)+"-"+i(a.getMonth()+1,2)+"-"+i(a.getDate(),2)+"T"+i(a.getHours(),2)+":"+i(a.getMinutes(),2)+":"+i(a.getSeconds(),2)+"."+i(a.getMilliseconds(),3);return b<0?(e+="-",b*=-1):e+="+",e+=i(Math.floor(b/60),2)+":"+i(b%60,2),d&&(e+=" BC"),e}function k(a){var b=a.getUTCFullYear(),c=b<1;c&&(b=Math.abs(b)+1);var d=i(b,4)+"-"+i(a.getUTCMonth()+1,2)+"-"+i(a.getUTCDate(),2)+"T"+i(a.getUTCHours(),2)+":"+i(a.getUTCMinutes(),2)+":"+i(a.getUTCSeconds(),2)+"."+i(a.getUTCMilliseconds(),3);return d+="+00:00",c&&(d+=" BC"),d}function l(a,b,c){return a="string"==typeof a?{text:a}:a,b&&("function"==typeof b?a.callback=b:a.values=b),c&&(a.callback=c),a}V(h,"prepareObject"),V(i,"pad"),V(j,"dateToString"),V(k,"dateToStringUTC"),V(l,"normalizeQueryConfig");var m=V(function(a){return c.createHash("md5").update(a,"utf-8").digest("hex")},"md5"),n=V(function(a,b,c){var d=m(b+a);return"md5"+m(M.concat([M.from(d),c]))},"postgresMd5PasswordHash");b.exports={prepareValue:V(function(a){return g(a)},"prepareValueWrapper"),normalizeQueryConfig:l,postgresMd5PasswordHash:n,md5:m}}),aO={};Y(aO,{default:()=>aP});var aP,aQ=W(()=>{ae(),aP={}}),aR=X((a,b)=>{ae();var c=(aL(),_(aH));function d(a){if(-1===a.indexOf("SCRAM-SHA-256"))throw Error("SASL: Only mechanism SCRAM-SHA-256 is currently supported");let b=c.randomBytes(18).toString("base64");return{mechanism:"SCRAM-SHA-256",clientNonce:b,response:"n,,n=*,r="+b,message:"SASLInitialResponse"}}function e(a,b,c){if("SASLInitialResponse"!==a.message)throw Error("SASL: Last message was not SASLInitialResponse");if("string"!=typeof b)throw Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: client password must be a string");if("string"!=typeof c)throw Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: serverData must be a string");let d=j(c);if(d.nonce.startsWith(a.clientNonce)){if(d.nonce.length===a.clientNonce.length)throw Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: server nonce is too short")}else throw Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: server nonce does not start with client nonce");var e=o(b,M.from(d.salt,"base64"),d.iteration),f=n(e,"Client Key"),g=m(f),h="n=*,r="+a.clientNonce,i="r="+d.nonce+",s="+d.salt+",i="+d.iteration,k="c=biws,r="+d.nonce,p=h+","+i+","+k,q=l(f,n(g,p)).toString("base64"),r=n(e,"Server Key"),s=n(r,p);a.message="SASLResponse",a.serverSignature=s.toString("base64"),a.response=k+",p="+q}function f(a,b){if("SASLResponse"!==a.message)throw Error("SASL: Last message was not SASLResponse");if("string"!=typeof b)throw Error("SASL: SCRAM-SERVER-FINAL-MESSAGE: serverData must be a string");let{serverSignature:c}=k(b);if(c!==a.serverSignature)throw Error("SASL: SCRAM-SERVER-FINAL-MESSAGE: server signature does not match")}function g(a){if("string"!=typeof a)throw TypeError("SASL: text must be a string");return a.split("").map((b,c)=>a.charCodeAt(c)).every(a=>a>=33&&a<=43||a>=45&&a<=126)}function h(a){return/^(?:[a-zA-Z0-9+/]{4})*(?:[a-zA-Z0-9+/]{2}==|[a-zA-Z0-9+/]{3}=)?$/.test(a)}function i(a){if("string"!=typeof a)throw TypeError("SASL: attribute pairs text must be a string");return new Map(a.split(",").map(a=>{if(!/^.=/.test(a))throw Error("SASL: Invalid attribute pair entry");return[a[0],a.substring(2)]}))}function j(a){let b=i(a),c=b.get("r");if(c){if(!g(c))throw Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: nonce must only contain printable characters")}else throw Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: nonce missing");let d=b.get("s");if(d){if(!h(d))throw Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: salt must be base64")}else throw Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: salt missing");let e=b.get("i");if(e){if(!/^[1-9][0-9]*$/.test(e))throw Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: invalid iteration count")}else throw Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: iteration missing");return{nonce:c,salt:d,iteration:parseInt(e,10)}}function k(a){let b=i(a).get("v");if(b){if(!h(b))throw Error("SASL: SCRAM-SERVER-FINAL-MESSAGE: server signature must be base64")}else throw Error("SASL: SCRAM-SERVER-FINAL-MESSAGE: server signature is missing");return{serverSignature:b}}function l(a,b){if(!M.isBuffer(a))throw TypeError("first argument must be a Buffer");if(!M.isBuffer(b))throw TypeError("second argument must be a Buffer");if(a.length!==b.length)throw Error("Buffer lengths must match");if(0===a.length)throw Error("Buffers cannot be empty");return M.from(a.map((c,d)=>a[d]^b[d]))}function m(a){return c.createHash("sha256").update(a).digest()}function n(a,b){return c.createHmac("sha256",a).update(b).digest()}function o(a,b,c){for(var d=n(a,M.concat([b,M.from([0,0,0,1])])),e=d,f=0;f<c-1;f++)e=l(e,d=n(a,d));return e}V(d,"startSession"),V(e,"continueSession"),V(f,"finalizeSession"),V(g,"isPrintableChars"),V(h,"isBase64"),V(i,"parseAttributePairs"),V(j,"parseServerFirstMessage"),V(k,"parseServerFinalMessage"),V(l,"xorBuffers"),V(m,"sha256"),V(n,"hmacSha256"),V(o,"Hi"),b.exports={startSession:d,continueSession:e,finalizeSession:f}}),aS={};function aT(...a){return a.join("/")}Y(aS,{join:()=>aT});var aU=W(()=>{ae(),V(aT,"join")}),aV={};function aW(a,b){b(Error("No filesystem"))}Y(aV,{stat:()=>aW});var aX=W(()=>{ae(),V(aW,"stat")}),aY={};Y(aY,{default:()=>aZ});var aZ,a$=W(()=>{ae(),aZ={}}),a_={};Y(a_,{StringDecoder:()=>a1});var a0,a1,a2=W(()=>{ae(),V(a0=class{constructor(a){aa(this,"td"),this.td=new TextDecoder(a)}write(a){return this.td.decode(a,{stream:!0})}end(a){return this.td.decode(a)}},"StringDecoder"),a1=a0}),a3=X((a,b)=>{ae();var{Transform:c}=(a$(),_(aY)),{StringDecoder:d}=(a2(),_(a_)),e=Symbol("last"),f=Symbol("decoder");function g(a,b,c){let d;if(this.overflow){if(1===(d=this[f].write(a).split(this.matcher)).length)return c();d.shift(),this.overflow=!1}else this[e]+=this[f].write(a),d=this[e].split(this.matcher);this[e]=d.pop();for(let a=0;a<d.length;a++)try{i(this,this.mapper(d[a]))}catch(a){return c(a)}(this.overflow=this[e].length>this.maxLength,this.overflow&&!this.skipOverflow)?c(Error("maximum buffer reached")):c()}function h(a){if(this[e]+=this[f].end(),this[e])try{i(this,this.mapper(this[e]))}catch(b){return a(b)}a()}function i(a,b){void 0!==b&&a.push(b)}function j(a){return a}function k(a,b,i){switch(a=a||/\r?\n/,b=b||j,i=i||{},arguments.length){case 1:"function"==typeof a?(b=a,a=/\r?\n/):"object"!=typeof a||a instanceof RegExp||a[Symbol.split]||(i=a,a=/\r?\n/);break;case 2:"function"==typeof a?(i=b,b=a,a=/\r?\n/):"object"==typeof b&&(i=b,b=j)}(i=Object.assign({},i)).autoDestroy=!0,i.transform=g,i.flush=h,i.readableObjectMode=!0;let k=new c(i);return k[e]="",k[f]=new d("utf8"),k.matcher=a,k.mapper=b,k.maxLength=i.maxLength,k.skipOverflow=i.skipOverflow||!1,k.overflow=!1,k._destroy=function(a,b){this._writableState.errorEmitted=!1,b(a)},k}V(g,"transform"),V(h,"flush"),V(i,"push"),V(j,"noop"),V(k,"split"),b.exports=k}),a4=X((a,b)=>{ae();var c=(aU(),_(aS)),d=(a$(),_(aY)).Stream,e=a3(),f=(aQ(),_(aO)),g="win32"===N.platform,h=N.stderr;function i(a){return(61440&a)==32768}V(i,"isRegFile");var j=["host","port","database","user","password"],k=j.length,l=j[k-1];function m(){if(h instanceof d&&!0===h.writable){var a=Array.prototype.slice.call(arguments).concat(`
`);h.write(f.format.apply(f,a))}}V(m,"warn"),Object.defineProperty(b.exports,"isWin",{get:V(function(){return g},"get"),set:V(function(a){g=a},"set")}),b.exports.warnTo=function(a){var b=h;return h=a,b},b.exports.getFileName=function(a){var b=a||N.env;return b.PGPASSFILE||(g?c.join(b.APPDATA||"./","postgresql","pgpass.conf"):c.join(b.HOME||"./",".pgpass"))},b.exports.usePgPass=function(a,b){return!Object.prototype.hasOwnProperty.call(N.env,"PGPASSWORD")&&(!!g||(b=b||"<unkn>",i(a.mode)?!(63&a.mode)||(m('WARNING: password file "%s" has group or world access; permissions should be u=rw (0600) or less',b),!1):(m('WARNING: password file "%s" is not a plain file',b),!1)))};var n=b.exports.match=function(a,b){return j.slice(0,-1).reduce(function(c,d,e){return 1==e&&Number(a[d]||5432)===Number(b[d])?c&&!0:c&&("*"===b[d]||b[d]===a[d])},!0)};b.exports.getPassword=function(a,b,c){var d,f=b.pipe(e());function g(b){var c=o(b);c&&p(c)&&n(a,c)&&(d=c[l],f.end())}V(g,"onLine");var h=V(function(){b.destroy(),c(d)},"onEnd"),i=V(function(a){b.destroy(),m("WARNING: error on reading file: %s",a),c(void 0)},"onErr");b.on("error",i),f.on("data",g).on("end",h).on("error",i)};var o=b.exports.parseLine=function(a){if(a.length<11||a.match(/^\s+#/))return null;for(var b="",c="",d=0,e=0,f={},g=V(function(b,c,d){var e=a.substring(c,d);Object.hasOwnProperty.call(N.env,"PGPASS_NO_DEESCAPE")||(e=e.replace(/\\([:\\])/g,"$1")),f[j[b]]=e},"addToObj"),h=0;h<a.length-1;h+=1){if(b=a.charAt(h+1),c=a.charAt(h),d==k-1){g(d,e);break}h>=0&&":"==b&&"\\"!==c&&(g(d,e,h+1),e=h+2,d+=1)}return f=Object.keys(f).length===k?f:null},p=b.exports.isValidEntry=function(a){for(var b={0:function(a){return a.length>0},1:function(a){return"*"===a||isFinite(a=Number(a))&&a>0&&a<0x20000000000000&&Math.floor(a)===a},2:function(a){return a.length>0},3:function(a){return a.length>0},4:function(a){return a.length>0}},c=0;c<j.length;c+=1)if(!(0,b[c])(a[j[c]]||""))return!1;return!0}}),a5=X((a,b)=>{ae(),aU(),_(aS);var c=(aX(),_(aV)),d=a4();b.exports=function(a,b){var e=d.getFileName();c.stat(e,function(f,g){if(f||!d.usePgPass(g,e))return b(void 0);var h=c.createReadStream(e);d.getPassword(a,h,b)})},b.exports.warnTo=d.warnTo}),a6={};Y(a6,{default:()=>a7});var a7,a8=W(()=>{ae(),a7={}}),a9=X((a,b)=>{ae();var c=(ap(),_(an)),d=(aX(),_(aV));function e(a){if("/"===a.charAt(0)){var b=a.split(" ");return{host:b[0],database:b[1]}}var e=c.parse(/ |%[^a-f0-9]|%[a-f0-9][^a-f0-9]/i.test(a)?encodeURI(a).replace(/\%25(\d\d)/g,"%$1"):a,!0),b=e.query;for(var f in b)Array.isArray(b[f])&&(b[f]=b[f][b[f].length-1]);var g=(e.auth||":").split(":");if(b.user=g[0],b.password=g.splice(1).join(":"),b.port=e.port,"socket:"==e.protocol)return b.host=decodeURI(e.pathname),b.database=e.query.db,b.client_encoding=e.query.encoding,b;b.host||(b.host=e.hostname);var h=e.pathname;if(!b.host&&h&&/^%2f/i.test(h)){var i=h.split("/");b.host=decodeURIComponent(i[0]),h=i.splice(1).join("/")}switch(h&&"/"===h.charAt(0)&&(h=h.slice(1)||null),b.database=h&&decodeURI(h),("true"===b.ssl||"1"===b.ssl)&&(b.ssl=!0),"0"===b.ssl&&(b.ssl=!1),(b.sslcert||b.sslkey||b.sslrootcert||b.sslmode)&&(b.ssl={}),b.sslcert&&(b.ssl.cert=d.readFileSync(b.sslcert).toString()),b.sslkey&&(b.ssl.key=d.readFileSync(b.sslkey).toString()),b.sslrootcert&&(b.ssl.ca=d.readFileSync(b.sslrootcert).toString()),b.sslmode){case"disable":b.ssl=!1;break;case"prefer":case"require":case"verify-ca":case"verify-full":break;case"no-verify":b.ssl.rejectUnauthorized=!1}return b}V(e,"parse"),b.exports=e,e.parse=e}),ba=X((a,b)=>{ae();var c=(a8(),_(a6)),d=aM(),e=a9().parse,f=V(function(a,b,c){return void 0===c?c=N.env["PG"+a.toUpperCase()]:!1===c||(c=N.env[c]),b[a]||c||d[a]},"val"),g=V(function(){switch(N.env.PGSSLMODE){case"disable":return!1;case"prefer":case"require":case"verify-ca":case"verify-full":return!0;case"no-verify":return{rejectUnauthorized:!1}}return d.ssl},"readSSLConfigFromEnvironment"),h=V(function(a){return"'"+(""+a).replace(/\\/g,"\\\\").replace(/'/g,"\\'")+"'"},"quoteParamValue"),i=V(function(a,b,c){var d=b[c];null!=d&&a.push(c+"="+h(d))},"add"),j=class{constructor(a){(a="string"==typeof a?e(a):a||{}).connectionString&&(a=Object.assign({},a,e(a.connectionString))),this.user=f("user",a),this.database=f("database",a),void 0===this.database&&(this.database=this.user),this.port=parseInt(f("port",a),10),this.host=f("host",a),Object.defineProperty(this,"password",{configurable:!0,enumerable:!1,writable:!0,value:f("password",a)}),this.binary=f("binary",a),this.options=f("options",a),this.ssl=typeof a.ssl>"u"?g():a.ssl,"string"==typeof this.ssl&&"true"===this.ssl&&(this.ssl=!0),"no-verify"===this.ssl&&(this.ssl={rejectUnauthorized:!1}),this.ssl&&this.ssl.key&&Object.defineProperty(this.ssl,"key",{enumerable:!1}),this.client_encoding=f("client_encoding",a),this.replication=f("replication",a),this.isDomainSocket=!(this.host||"").indexOf("/"),this.application_name=f("application_name",a,"PGAPPNAME"),this.fallback_application_name=f("fallback_application_name",a,!1),this.statement_timeout=f("statement_timeout",a,!1),this.lock_timeout=f("lock_timeout",a,!1),this.idle_in_transaction_session_timeout=f("idle_in_transaction_session_timeout",a,!1),this.query_timeout=f("query_timeout",a,!1),void 0===a.connectionTimeoutMillis?this.connect_timeout=N.env.PGCONNECT_TIMEOUT||0:this.connect_timeout=Math.floor(a.connectionTimeoutMillis/1e3),!1===a.keepAlive?this.keepalives=0:!0===a.keepAlive&&(this.keepalives=1),"number"==typeof a.keepAliveInitialDelayMillis&&(this.keepalives_idle=Math.floor(a.keepAliveInitialDelayMillis/1e3))}getLibpqConnectionString(a){var b=[];i(b,this,"user"),i(b,this,"password"),i(b,this,"port"),i(b,this,"application_name"),i(b,this,"fallback_application_name"),i(b,this,"connect_timeout"),i(b,this,"options");var d="object"==typeof this.ssl?this.ssl:this.ssl?{sslmode:this.ssl}:{};if(i(b,d,"sslmode"),i(b,d,"sslca"),i(b,d,"sslkey"),i(b,d,"sslcert"),i(b,d,"sslrootcert"),this.database&&b.push("dbname="+h(this.database)),this.replication&&b.push("replication="+h(this.replication)),this.host&&b.push("host="+h(this.host)),this.isDomainSocket)return a(null,b.join(" "));this.client_encoding&&b.push("client_encoding="+h(this.client_encoding)),c.lookup(this.host,function(c,d){return c?a(c,null):(b.push("hostaddr="+h(d)),a(null,b.join(" ")))})}};V(j,"ConnectionParameters"),b.exports=j}),bb=X((a,b)=>{ae();var c=aA(),d=/^([A-Za-z]+)(?: (\d+))?(?: (\d+))?/,e=class{constructor(a,b){this.command=null,this.rowCount=null,this.oid=null,this.rows=[],this.fields=[],this._parsers=void 0,this._types=b,this.RowCtor=null,this.rowAsArray="array"===a,this.rowAsArray&&(this.parseRow=this._parseRowAsArray)}addCommandComplete(a){var b;(b=a.text?d.exec(a.text):d.exec(a.command))&&(this.command=b[1],b[3]?(this.oid=parseInt(b[2],10),this.rowCount=parseInt(b[3],10)):b[2]&&(this.rowCount=parseInt(b[2],10)))}_parseRowAsArray(a){for(var b=Array(a.length),c=0,d=a.length;c<d;c++){var e=a[c];null!==e?b[c]=this._parsers[c](e):b[c]=null}return b}parseRow(a){for(var b={},c=0,d=a.length;c<d;c++){var e=a[c],f=this.fields[c].name;null!==e?b[f]=this._parsers[c](e):b[f]=null}return b}addRow(a){this.rows.push(a)}addFields(a){this.fields=a,this.fields.length&&(this._parsers=Array(a.length));for(var b=0;b<a.length;b++){var d=a[b];this._types?this._parsers[b]=this._types.getTypeParser(d.dataTypeID,d.format||"text"):this._parsers[b]=c.getTypeParser(d.dataTypeID,d.format||"text")}}};V(e,"Result"),b.exports=e}),bc=X((a,b)=>{ae();var{EventEmitter:c}=af(),d=bb(),e=aN(),f=class extends c{constructor(a,b,c){super(),a=e.normalizeQueryConfig(a,b,c),this.text=a.text,this.values=a.values,this.rows=a.rows,this.types=a.types,this.name=a.name,this.binary=a.binary,this.portal=a.portal||"",this.callback=a.callback,this._rowMode=a.rowMode,N.domain&&a.callback&&(this.callback=N.domain.bind(a.callback)),this._result=new d(this._rowMode,this.types),this._results=this._result,this.isPreparedStatement=!1,this._canceledDueToError=!1,this._promise=null}requiresPreparation(){return!!this.name||!!this.rows||!!this.text&&!!this.values&&this.values.length>0}_checkForMultirow(){this._result.command&&(Array.isArray(this._results)||(this._results=[this._result]),this._result=new d(this._rowMode,this.types),this._results.push(this._result))}handleRowDescription(a){this._checkForMultirow(),this._result.addFields(a.fields),this._accumulateRows=this.callback||!this.listeners("row").length}handleDataRow(a){let b;if(!this._canceledDueToError){try{b=this._result.parseRow(a.fields)}catch(a){this._canceledDueToError=a;return}this.emit("row",b,this._result),this._accumulateRows&&this._result.addRow(b)}}handleCommandComplete(a,b){this._checkForMultirow(),this._result.addCommandComplete(a),this.rows&&b.sync()}handleEmptyQuery(a){this.rows&&a.sync()}handleError(a,b){if(this._canceledDueToError&&(a=this._canceledDueToError,this._canceledDueToError=!1),this.callback)return this.callback(a);this.emit("error",a)}handleReadyForQuery(a){if(this._canceledDueToError)return this.handleError(this._canceledDueToError,a);if(this.callback)try{this.callback(null,this._results)}catch(a){N.nextTick(()=>{throw a})}this.emit("end",this._results)}submit(a){if("string"!=typeof this.text&&"string"!=typeof this.name)return Error("A query must have either text or a name. Supplying neither is unsupported.");let b=a.parsedStatements[this.name];return this.text&&b&&this.text!==b?Error(`Prepared statements must be unique - '${this.name}\
' was used for a different statement`):this.values&&!Array.isArray(this.values)?Error("Query values must be an array"):(this.requiresPreparation()?this.prepare(a):a.query(this.text),null)}hasBeenParsed(a){return this.name&&a.parsedStatements[this.name]}handlePortalSuspended(a){this._getRows(a,this.rows)}_getRows(a,b){a.execute({portal:this.portal,rows:b}),b?a.flush():a.sync()}prepare(a){this.isPreparedStatement=!0,this.hasBeenParsed(a)||a.parse({text:this.text,name:this.name,types:this.types});try{a.bind({portal:this.portal,statement:this.name,values:this.values,binary:this.binary,valueMapper:e.prepareValue})}catch(b){this.handleError(b,a);return}a.describe({type:"P",name:this.portal||""}),this._getRows(a,this.rows)}handleCopyInResponse(a){a.sendCopyFail("No source stream defined")}handleCopyData(a,b){}};V(f,"Query"),b.exports=f}),bd=X(a=>{ae(),Object.defineProperty(a,"__esModule",{value:!0}),a.NoticeMessage=a.DataRowMessage=a.CommandCompleteMessage=a.ReadyForQueryMessage=a.NotificationResponseMessage=a.BackendKeyDataMessage=a.AuthenticationMD5Password=a.ParameterStatusMessage=a.ParameterDescriptionMessage=a.RowDescriptionMessage=a.Field=a.CopyResponse=a.CopyDataMessage=a.DatabaseError=a.copyDone=a.emptyQuery=a.replicationStart=a.portalSuspended=a.noData=a.closeComplete=a.bindComplete=a.parseComplete=void 0,a.parseComplete={name:"parseComplete",length:5},a.bindComplete={name:"bindComplete",length:5},a.closeComplete={name:"closeComplete",length:5},a.noData={name:"noData",length:5},a.portalSuspended={name:"portalSuspended",length:5},a.replicationStart={name:"replicationStart",length:4},a.emptyQuery={name:"emptyQuery",length:4},a.copyDone={name:"copyDone",length:4};var b=class extends Error{constructor(a,b,c){super(a),this.length=b,this.name=c}};V(b,"DatabaseError"),a.DatabaseError=b;var c=class{constructor(a,b){this.length=a,this.chunk=b,this.name="copyData"}};V(c,"CopyDataMessage"),a.CopyDataMessage=c;var d=class{constructor(a,b,c,d){this.length=a,this.name=b,this.binary=c,this.columnTypes=Array(d)}};V(d,"CopyResponse"),a.CopyResponse=d;var e=class{constructor(a,b,c,d,e,f,g){this.name=a,this.tableID=b,this.columnID=c,this.dataTypeID=d,this.dataTypeSize=e,this.dataTypeModifier=f,this.format=g}};V(e,"Field"),a.Field=e;var f=class{constructor(a,b){this.length=a,this.fieldCount=b,this.name="rowDescription",this.fields=Array(this.fieldCount)}};V(f,"RowDescriptionMessage"),a.RowDescriptionMessage=f;var g=class{constructor(a,b){this.length=a,this.parameterCount=b,this.name="parameterDescription",this.dataTypeIDs=Array(this.parameterCount)}};V(g,"ParameterDescriptionMessage"),a.ParameterDescriptionMessage=g;var h=class{constructor(a,b,c){this.length=a,this.parameterName=b,this.parameterValue=c,this.name="parameterStatus"}};V(h,"ParameterStatusMessage"),a.ParameterStatusMessage=h;var i=class{constructor(a,b){this.length=a,this.salt=b,this.name="authenticationMD5Password"}};V(i,"AuthenticationMD5Password"),a.AuthenticationMD5Password=i;var j=class{constructor(a,b,c){this.length=a,this.processID=b,this.secretKey=c,this.name="backendKeyData"}};V(j,"BackendKeyDataMessage"),a.BackendKeyDataMessage=j;var k=class{constructor(a,b,c,d){this.length=a,this.processId=b,this.channel=c,this.payload=d,this.name="notification"}};V(k,"NotificationResponseMessage"),a.NotificationResponseMessage=k;var l=class{constructor(a,b){this.length=a,this.status=b,this.name="readyForQuery"}};V(l,"ReadyForQueryMessage"),a.ReadyForQueryMessage=l;var m=class{constructor(a,b){this.length=a,this.text=b,this.name="commandComplete"}};V(m,"CommandCompleteMessage"),a.CommandCompleteMessage=m;var n=class{constructor(a,b){this.length=a,this.fields=b,this.name="dataRow",this.fieldCount=b.length}};V(n,"DataRowMessage"),a.DataRowMessage=n;var o=class{constructor(a,b){this.length=a,this.message=b,this.name="notice"}};V(o,"NoticeMessage"),a.NoticeMessage=o}),be=X(a=>{ae(),Object.defineProperty(a,"__esModule",{value:!0}),a.Writer=void 0;var b=class{constructor(a=256){this.size=a,this.offset=5,this.headerPosition=0,this.buffer=M.allocUnsafe(a)}ensure(a){if(this.buffer.length-this.offset<a){let b=this.buffer,c=b.length+(b.length>>1)+a;this.buffer=M.allocUnsafe(c),b.copy(this.buffer)}}addInt32(a){return this.ensure(4),this.buffer[this.offset++]=a>>>24&255,this.buffer[this.offset++]=a>>>16&255,this.buffer[this.offset++]=a>>>8&255,this.buffer[this.offset++]=a>>>0&255,this}addInt16(a){return this.ensure(2),this.buffer[this.offset++]=a>>>8&255,this.buffer[this.offset++]=a>>>0&255,this}addCString(a){if(a){let b=M.byteLength(a);this.ensure(b+1),this.buffer.write(a,this.offset,"utf-8"),this.offset+=b}else this.ensure(1);return this.buffer[this.offset++]=0,this}addString(a=""){let b=M.byteLength(a);return this.ensure(b),this.buffer.write(a,this.offset),this.offset+=b,this}add(a){return this.ensure(a.length),a.copy(this.buffer,this.offset),this.offset+=a.length,this}join(a){if(a){this.buffer[this.headerPosition]=a;let b=this.offset-(this.headerPosition+1);this.buffer.writeInt32BE(b,this.headerPosition+1)}return this.buffer.slice(5*!a,this.offset)}flush(a){let b=this.join(a);return this.offset=5,this.headerPosition=0,this.buffer=M.allocUnsafe(this.size),b}};V(b,"Writer"),a.Writer=b}),bf=X(a=>{ae(),Object.defineProperty(a,"__esModule",{value:!0}),a.serialize=void 0;var b=be(),c=new b.Writer,d=V(a=>{for(let b of(c.addInt16(3).addInt16(0),Object.keys(a)))c.addCString(b).addCString(a[b]);c.addCString("client_encoding").addCString("UTF8");let d=c.addCString("").flush(),e=d.length+4;return new b.Writer().addInt32(e).add(d).flush()},"startup"),e=V(()=>{let a=M.allocUnsafe(8);return a.writeInt32BE(8,0),a.writeInt32BE(0x4d2162f,4),a},"requestSsl"),f=V(a=>c.addCString(a).flush(112),"password"),g=V(function(a,b){return c.addCString(a).addInt32(M.byteLength(b)).addString(b),c.flush(112)},"sendSASLInitialResponseMessage"),h=V(function(a){return c.addString(a).flush(112)},"sendSCRAMClientFinalMessage"),i=V(a=>c.addCString(a).flush(81),"query"),j=[],k=V(a=>{let b=a.name||"";b.length>63&&(console.error("Warning! Postgres only supports 63 characters for query names."),console.error("You supplied %s (%s)",b,b.length),console.error("This can cause conflicts and silent errors executing queries"));let d=a.types||j,e=d.length,f=c.addCString(b).addCString(a.text).addInt16(e);for(let a=0;a<e;a++)f.addInt32(d[a]);return c.flush(80)},"parse"),l=new b.Writer,m=V(function(a,b){for(let d=0;d<a.length;d++){let e=b?b(a[d],d):a[d];null==e?(c.addInt16(0),l.addInt32(-1)):e instanceof M?(c.addInt16(1),l.addInt32(e.length),l.add(e)):(c.addInt16(0),l.addInt32(M.byteLength(e)),l.addString(e))}},"writeValues"),n=V((a={})=>{let b=a.portal||"",d=a.statement||"",e=a.binary||!1,f=a.values||j,g=f.length;return c.addCString(b).addCString(d),c.addInt16(g),m(f,a.valueMapper),c.addInt16(g),c.add(l.flush()),c.addInt16(+!!e),c.flush(66)},"bind"),o=M.from([69,0,0,0,9,0,0,0,0,0]),p=V(a=>{if(!a||!a.portal&&!a.rows)return o;let b=a.portal||"",c=a.rows||0,d=M.byteLength(b),e=4+d+1+4,f=M.allocUnsafe(1+e);return f[0]=69,f.writeInt32BE(e,1),f.write(b,5,"utf-8"),f[d+5]=0,f.writeUInt32BE(c,f.length-4),f},"execute"),q=V((a,b)=>{let c=M.allocUnsafe(16);return c.writeInt32BE(16,0),c.writeInt16BE(1234,4),c.writeInt16BE(5678,6),c.writeInt32BE(a,8),c.writeInt32BE(b,12),c},"cancel"),r=V((a,b)=>{let c=4+M.byteLength(b)+1,d=M.allocUnsafe(1+c);return d[0]=a,d.writeInt32BE(c,1),d.write(b,5,"utf-8"),d[c]=0,d},"cstringMessage"),s=c.addCString("P").flush(68),t=c.addCString("S").flush(68),u=V(a=>a.name?r(68,`${a.type}${a.name||""}`):"P"===a.type?s:t,"describe"),v=V(a=>r(67,`${a.type}${a.name||""}`),"close"),w=V(a=>c.add(a).flush(100),"copyData"),x=V(a=>r(102,a),"copyFail"),y=V(a=>M.from([a,0,0,0,4]),"codeOnlyBuffer"),z=y(72),A=y(83),B=y(88),C=y(99);a.serialize={startup:d,password:f,requestSsl:e,sendSASLInitialResponseMessage:g,sendSCRAMClientFinalMessage:h,query:i,parse:k,bind:n,execute:p,describe:u,close:v,flush:V(()=>z,"flush"),sync:V(()=>A,"sync"),end:V(()=>B,"end"),copyData:w,copyDone:V(()=>C,"copyDone"),copyFail:x,cancel:q}}),bg=X(a=>{ae(),Object.defineProperty(a,"__esModule",{value:!0}),a.BufferReader=void 0;var b=M.allocUnsafe(0),c=class{constructor(a=0){this.offset=a,this.buffer=b,this.encoding="utf-8"}setBuffer(a,b){this.offset=a,this.buffer=b}int16(){let a=this.buffer.readInt16BE(this.offset);return this.offset+=2,a}byte(){let a=this.buffer[this.offset];return this.offset++,a}int32(){let a=this.buffer.readInt32BE(this.offset);return this.offset+=4,a}uint32(){let a=this.buffer.readUInt32BE(this.offset);return this.offset+=4,a}string(a){let b=this.buffer.toString(this.encoding,this.offset,this.offset+a);return this.offset+=a,b}cstring(){let a=this.offset,b=a;for(;0!==this.buffer[b++];);return this.offset=b,this.buffer.toString(this.encoding,a,b-1)}bytes(a){let b=this.buffer.slice(this.offset,this.offset+a);return this.offset+=a,b}};V(c,"BufferReader"),a.BufferReader=c}),bh=X(a=>{ae(),Object.defineProperty(a,"__esModule",{value:!0}),a.Parser=void 0;var b=bd(),c=bg(),d=M.allocUnsafe(0),e=class{constructor(a){if(this.buffer=d,this.bufferLength=0,this.bufferOffset=0,this.reader=new c.BufferReader,a?.mode==="binary")throw Error("Binary mode not supported yet");this.mode=a?.mode||"text"}parse(a,b){this.mergeBuffer(a);let c=this.bufferOffset+this.bufferLength,e=this.bufferOffset;for(;e+5<=c;){let a=this.buffer[e],d=this.buffer.readUInt32BE(e+1),f=1+d;if(f+e<=c)b(this.handlePacket(e+5,a,d,this.buffer)),e+=f;else break}e===c?(this.buffer=d,this.bufferLength=0,this.bufferOffset=0):(this.bufferLength=c-e,this.bufferOffset=e)}mergeBuffer(a){if(this.bufferLength>0){let b=this.bufferLength+a.byteLength;if(b+this.bufferOffset>this.buffer.byteLength){let a;if(b<=this.buffer.byteLength&&this.bufferOffset>=this.bufferLength)a=this.buffer;else{let c=2*this.buffer.byteLength;for(;b>=c;)c*=2;a=M.allocUnsafe(c)}this.buffer.copy(a,0,this.bufferOffset,this.bufferOffset+this.bufferLength),this.buffer=a,this.bufferOffset=0}a.copy(this.buffer,this.bufferOffset+this.bufferLength),this.bufferLength=b}else this.buffer=a,this.bufferOffset=0,this.bufferLength=a.byteLength}handlePacket(a,c,d,e){switch(c){case 50:return b.bindComplete;case 49:return b.parseComplete;case 51:return b.closeComplete;case 110:return b.noData;case 115:return b.portalSuspended;case 99:return b.copyDone;case 87:return b.replicationStart;case 73:return b.emptyQuery;case 68:return this.parseDataRowMessage(a,d,e);case 67:return this.parseCommandCompleteMessage(a,d,e);case 90:return this.parseReadyForQueryMessage(a,d,e);case 65:return this.parseNotificationMessage(a,d,e);case 82:return this.parseAuthenticationResponse(a,d,e);case 83:return this.parseParameterStatusMessage(a,d,e);case 75:return this.parseBackendKeyData(a,d,e);case 69:return this.parseErrorMessage(a,d,e,"error");case 78:return this.parseErrorMessage(a,d,e,"notice");case 84:return this.parseRowDescriptionMessage(a,d,e);case 116:return this.parseParameterDescriptionMessage(a,d,e);case 71:return this.parseCopyInMessage(a,d,e);case 72:return this.parseCopyOutMessage(a,d,e);case 100:return this.parseCopyData(a,d,e);default:return new b.DatabaseError("received invalid response: "+c.toString(16),d,"error")}}parseReadyForQueryMessage(a,c,d){this.reader.setBuffer(a,d);let e=this.reader.string(1);return new b.ReadyForQueryMessage(c,e)}parseCommandCompleteMessage(a,c,d){this.reader.setBuffer(a,d);let e=this.reader.cstring();return new b.CommandCompleteMessage(c,e)}parseCopyData(a,c,d){let e=d.slice(a,a+(c-4));return new b.CopyDataMessage(c,e)}parseCopyInMessage(a,b,c){return this.parseCopyMessage(a,b,c,"copyInResponse")}parseCopyOutMessage(a,b,c){return this.parseCopyMessage(a,b,c,"copyOutResponse")}parseCopyMessage(a,c,d,e){this.reader.setBuffer(a,d);let f=0!==this.reader.byte(),g=this.reader.int16(),h=new b.CopyResponse(c,e,f,g);for(let a=0;a<g;a++)h.columnTypes[a]=this.reader.int16();return h}parseNotificationMessage(a,c,d){this.reader.setBuffer(a,d);let e=this.reader.int32(),f=this.reader.cstring(),g=this.reader.cstring();return new b.NotificationResponseMessage(c,e,f,g)}parseRowDescriptionMessage(a,c,d){this.reader.setBuffer(a,d);let e=this.reader.int16(),f=new b.RowDescriptionMessage(c,e);for(let a=0;a<e;a++)f.fields[a]=this.parseField();return f}parseField(){let a=this.reader.cstring(),c=this.reader.uint32(),d=this.reader.int16(),e=this.reader.uint32(),f=this.reader.int16(),g=this.reader.int32(),h=0===this.reader.int16()?"text":"binary";return new b.Field(a,c,d,e,f,g,h)}parseParameterDescriptionMessage(a,c,d){this.reader.setBuffer(a,d);let e=this.reader.int16(),f=new b.ParameterDescriptionMessage(c,e);for(let a=0;a<e;a++)f.dataTypeIDs[a]=this.reader.int32();return f}parseDataRowMessage(a,c,d){this.reader.setBuffer(a,d);let e=this.reader.int16(),f=Array(e);for(let a=0;a<e;a++){let b=this.reader.int32();f[a]=-1===b?null:this.reader.string(b)}return new b.DataRowMessage(c,f)}parseParameterStatusMessage(a,c,d){this.reader.setBuffer(a,d);let e=this.reader.cstring(),f=this.reader.cstring();return new b.ParameterStatusMessage(c,e,f)}parseBackendKeyData(a,c,d){this.reader.setBuffer(a,d);let e=this.reader.int32(),f=this.reader.int32();return new b.BackendKeyDataMessage(c,e,f)}parseAuthenticationResponse(a,c,d){this.reader.setBuffer(a,d);let e=this.reader.int32(),f={name:"authenticationOk",length:c};switch(e){case 0:break;case 3:8===f.length&&(f.name="authenticationCleartextPassword");break;case 5:if(12===f.length){f.name="authenticationMD5Password";let a=this.reader.bytes(4);return new b.AuthenticationMD5Password(c,a)}break;case 10:{let a;f.name="authenticationSASL",f.mechanisms=[];do(a=this.reader.cstring())&&f.mechanisms.push(a);while(a)}break;case 11:f.name="authenticationSASLContinue",f.data=this.reader.string(c-8);break;case 12:f.name="authenticationSASLFinal",f.data=this.reader.string(c-8);break;default:throw Error("Unknown authenticationOk message type "+e)}return f}parseErrorMessage(a,c,d,e){this.reader.setBuffer(a,d);let f={},g=this.reader.string(1);for(;"\0"!==g;)f[g]=this.reader.cstring(),g=this.reader.string(1);let h=f.M,i="notice"===e?new b.NoticeMessage(c,h):new b.DatabaseError(h,c,e);return i.severity=f.S,i.code=f.C,i.detail=f.D,i.hint=f.H,i.position=f.P,i.internalPosition=f.p,i.internalQuery=f.q,i.where=f.W,i.schema=f.s,i.table=f.t,i.column=f.c,i.dataType=f.d,i.constraint=f.n,i.file=f.F,i.line=f.L,i.routine=f.R,i}};V(e,"Parser"),a.Parser=e}),bi=X(a=>{ae(),Object.defineProperty(a,"__esModule",{value:!0}),a.DatabaseError=a.serialize=a.parse=void 0;var b=bd();Object.defineProperty(a,"DatabaseError",{enumerable:!0,get:V(function(){return b.DatabaseError},"get")});var c=bf();Object.defineProperty(a,"serialize",{enumerable:!0,get:V(function(){return c.serialize},"get")});var d=bh();function e(a,b){let c=new d.Parser;return a.on("data",a=>c.parse(a,b)),new Promise(b=>a.on("end",()=>b()))}V(e,"parse"),a.parse=e}),bj={};function bk({socket:a,servername:b}){return a.startTls(b),a}Y(bj,{connect:()=>bk});var bl=W(()=>{ae(),V(bk,"connect")}),bm=X((a,b)=>{ae();var c=(am(),_(ag)),d=af().EventEmitter,{parse:e,serialize:f}=bi(),g=f.flush(),h=f.sync(),i=f.end(),j=class extends d{constructor(a){super(),a=a||{},this.stream=a.stream||new c.Socket,this._keepAlive=a.keepAlive,this._keepAliveInitialDelayMillis=a.keepAliveInitialDelayMillis,this.lastBuffer=!1,this.parsedStatements={},this.ssl=a.ssl||!1,this._ending=!1,this._emitMessage=!1;var b=this;this.on("newListener",function(a){"message"===a&&(b._emitMessage=!0)})}connect(a,b){var d=this;this._connecting=!0,this.stream.setNoDelay(!0),this.stream.connect(a,b),this.stream.once("connect",function(){d._keepAlive&&d.stream.setKeepAlive(!0,d._keepAliveInitialDelayMillis),d.emit("connect")});let e=V(function(a){d._ending&&("ECONNRESET"===a.code||"EPIPE"===a.code)||d.emit("error",a)},"reportStreamError");if(this.stream.on("error",e),this.stream.on("close",function(){d.emit("end")}),!this.ssl)return this.attachListeners(this.stream);this.stream.once("data",function(a){switch(a.toString("utf8")){case"S":break;case"N":return d.stream.end(),d.emit("error",Error("The server does not support SSL connections"));default:return d.stream.end(),d.emit("error",Error("There was an error establishing an SSL connection"))}var f=(bl(),_(bj));let g={socket:d.stream};!0!==d.ssl&&(Object.assign(g,d.ssl),"key"in d.ssl&&(g.key=d.ssl.key)),0===c.isIP(b)&&(g.servername=b);try{d.stream=f.connect(g)}catch(a){return d.emit("error",a)}d.attachListeners(d.stream),d.stream.on("error",e),d.emit("sslconnect")})}attachListeners(a){a.on("end",()=>{this.emit("end")}),e(a,a=>{var b="error"===a.name?"errorMessage":a.name;this._emitMessage&&this.emit("message",a),this.emit(b,a)})}requestSsl(){this.stream.write(f.requestSsl())}startup(a){this.stream.write(f.startup(a))}cancel(a,b){this._send(f.cancel(a,b))}password(a){this._send(f.password(a))}sendSASLInitialResponseMessage(a,b){this._send(f.sendSASLInitialResponseMessage(a,b))}sendSCRAMClientFinalMessage(a){this._send(f.sendSCRAMClientFinalMessage(a))}_send(a){return!!this.stream.writable&&this.stream.write(a)}query(a){this._send(f.query(a))}parse(a){this._send(f.parse(a))}bind(a){this._send(f.bind(a))}execute(a){this._send(f.execute(a))}flush(){this.stream.writable&&this.stream.write(g)}sync(){this._ending=!0,this._send(g),this._send(h)}ref(){this.stream.ref()}unref(){this.stream.unref()}end(){return(this._ending=!0,this._connecting&&this.stream.writable)?this.stream.write(i,()=>{this.stream.end()}):void this.stream.end()}close(a){this._send(f.close(a))}describe(a){this._send(f.describe(a))}sendCopyFromChunk(a){this._send(f.copyData(a))}endCopyFrom(){this._send(f.copyDone())}sendCopyFail(a){this._send(f.copyFail(a))}};V(j,"Connection"),b.exports=j}),bn=X((a,b)=>{ae();var c=af().EventEmitter,d=(aQ(),_(aO),aN()),e=aR(),f=a5(),g=aB(),h=ba(),i=bc(),j=aM(),k=bm(),l=class extends c{constructor(a){super(),this.connectionParameters=new h(a),this.user=this.connectionParameters.user,this.database=this.connectionParameters.database,this.port=this.connectionParameters.port,this.host=this.connectionParameters.host,Object.defineProperty(this,"password",{configurable:!0,enumerable:!1,writable:!0,value:this.connectionParameters.password}),this.replication=this.connectionParameters.replication;var b=a||{};this._Promise=b.Promise||K.Promise,this._types=new g(b.types),this._ending=!1,this._connecting=!1,this._connected=!1,this._connectionError=!1,this._queryable=!0,this.connection=b.connection||new k({stream:b.stream,ssl:this.connectionParameters.ssl,keepAlive:b.keepAlive||!1,keepAliveInitialDelayMillis:b.keepAliveInitialDelayMillis||0,encoding:this.connectionParameters.client_encoding||"utf8"}),this.queryQueue=[],this.binary=b.binary||j.binary,this.processID=null,this.secretKey=null,this.ssl=this.connectionParameters.ssl||!1,this.ssl&&this.ssl.key&&Object.defineProperty(this.ssl,"key",{enumerable:!1}),this._connectionTimeoutMillis=b.connectionTimeoutMillis||0}_errorAllQueries(a){let b=V(b=>{N.nextTick(()=>{b.handleError(a,this.connection)})},"enqueueError");this.activeQuery&&(b(this.activeQuery),this.activeQuery=null),this.queryQueue.forEach(b),this.queryQueue.length=0}_connect(a){var b=this,c=this.connection;if(this._connectionCallback=a,this._connecting||this._connected){let b=Error("Client has already been connected. You cannot reuse a client.");N.nextTick(()=>{a(b)});return}this._connecting=!0,this.connectionTimeoutHandle,this._connectionTimeoutMillis>0&&(this.connectionTimeoutHandle=setTimeout(()=>{c._ending=!0,c.stream.destroy(Error("timeout expired"))},this._connectionTimeoutMillis)),this.host&&0===this.host.indexOf("/")?c.connect(this.host+"/.s.PGSQL."+this.port):c.connect(this.port,this.host),c.on("connect",function(){b.ssl?c.requestSsl():c.startup(b.getStartupConf())}),c.on("sslconnect",function(){c.startup(b.getStartupConf())}),this._attachListeners(c),c.once("end",()=>{let a=this._ending?Error("Connection terminated"):Error("Connection terminated unexpectedly");clearTimeout(this.connectionTimeoutHandle),this._errorAllQueries(a),this._ending||(this._connecting&&!this._connectionError?this._connectionCallback?this._connectionCallback(a):this._handleErrorEvent(a):this._connectionError||this._handleErrorEvent(a)),N.nextTick(()=>{this.emit("end")})})}connect(a){return a?void this._connect(a):new this._Promise((a,b)=>{this._connect(c=>{c?b(c):a()})})}_attachListeners(a){a.on("authenticationCleartextPassword",this._handleAuthCleartextPassword.bind(this)),a.on("authenticationMD5Password",this._handleAuthMD5Password.bind(this)),a.on("authenticationSASL",this._handleAuthSASL.bind(this)),a.on("authenticationSASLContinue",this._handleAuthSASLContinue.bind(this)),a.on("authenticationSASLFinal",this._handleAuthSASLFinal.bind(this)),a.on("backendKeyData",this._handleBackendKeyData.bind(this)),a.on("error",this._handleErrorEvent.bind(this)),a.on("errorMessage",this._handleErrorMessage.bind(this)),a.on("readyForQuery",this._handleReadyForQuery.bind(this)),a.on("notice",this._handleNotice.bind(this)),a.on("rowDescription",this._handleRowDescription.bind(this)),a.on("dataRow",this._handleDataRow.bind(this)),a.on("portalSuspended",this._handlePortalSuspended.bind(this)),a.on("emptyQuery",this._handleEmptyQuery.bind(this)),a.on("commandComplete",this._handleCommandComplete.bind(this)),a.on("parseComplete",this._handleParseComplete.bind(this)),a.on("copyInResponse",this._handleCopyInResponse.bind(this)),a.on("copyData",this._handleCopyData.bind(this)),a.on("notification",this._handleNotification.bind(this))}_checkPgPass(a){let b=this.connection;"function"==typeof this.password?this._Promise.resolve().then(()=>this.password()).then(c=>{if(void 0!==c){if("string"!=typeof c)return void b.emit("error",TypeError("Password must be a string"));this.connectionParameters.password=this.password=c}else this.connectionParameters.password=this.password=null;a()}).catch(a=>{b.emit("error",a)}):null!==this.password?a():f(this.connectionParameters,b=>{void 0!==b&&(this.connectionParameters.password=this.password=b),a()})}_handleAuthCleartextPassword(a){this._checkPgPass(()=>{this.connection.password(this.password)})}_handleAuthMD5Password(a){this._checkPgPass(()=>{let b=d.postgresMd5PasswordHash(this.user,this.password,a.salt);this.connection.password(b)})}_handleAuthSASL(a){this._checkPgPass(()=>{this.saslSession=e.startSession(a.mechanisms),this.connection.sendSASLInitialResponseMessage(this.saslSession.mechanism,this.saslSession.response)})}_handleAuthSASLContinue(a){e.continueSession(this.saslSession,this.password,a.data),this.connection.sendSCRAMClientFinalMessage(this.saslSession.response)}_handleAuthSASLFinal(a){e.finalizeSession(this.saslSession,a.data),this.saslSession=null}_handleBackendKeyData(a){this.processID=a.processID,this.secretKey=a.secretKey}_handleReadyForQuery(a){this._connecting&&(this._connecting=!1,this._connected=!0,clearTimeout(this.connectionTimeoutHandle),this._connectionCallback&&(this._connectionCallback(null,this),this._connectionCallback=null),this.emit("connect"));let{activeQuery:b}=this;this.activeQuery=null,this.readyForQuery=!0,b&&b.handleReadyForQuery(this.connection),this._pulseQueryQueue()}_handleErrorWhileConnecting(a){if(!this._connectionError){if(this._connectionError=!0,clearTimeout(this.connectionTimeoutHandle),this._connectionCallback)return this._connectionCallback(a);this.emit("error",a)}}_handleErrorEvent(a){if(this._connecting)return this._handleErrorWhileConnecting(a);this._queryable=!1,this._errorAllQueries(a),this.emit("error",a)}_handleErrorMessage(a){if(this._connecting)return this._handleErrorWhileConnecting(a);let b=this.activeQuery;b?(this.activeQuery=null,b.handleError(a,this.connection)):this._handleErrorEvent(a)}_handleRowDescription(a){this.activeQuery.handleRowDescription(a)}_handleDataRow(a){this.activeQuery.handleDataRow(a)}_handlePortalSuspended(a){this.activeQuery.handlePortalSuspended(this.connection)}_handleEmptyQuery(a){this.activeQuery.handleEmptyQuery(this.connection)}_handleCommandComplete(a){this.activeQuery.handleCommandComplete(a,this.connection)}_handleParseComplete(a){this.activeQuery.name&&(this.connection.parsedStatements[this.activeQuery.name]=this.activeQuery.text)}_handleCopyInResponse(a){this.activeQuery.handleCopyInResponse(this.connection)}_handleCopyData(a){this.activeQuery.handleCopyData(a,this.connection)}_handleNotification(a){this.emit("notification",a)}_handleNotice(a){this.emit("notice",a)}getStartupConf(){var a=this.connectionParameters,b={user:a.user,database:a.database},c=a.application_name||a.fallback_application_name;return c&&(b.application_name=c),a.replication&&(b.replication=""+a.replication),a.statement_timeout&&(b.statement_timeout=String(parseInt(a.statement_timeout,10))),a.lock_timeout&&(b.lock_timeout=String(parseInt(a.lock_timeout,10))),a.idle_in_transaction_session_timeout&&(b.idle_in_transaction_session_timeout=String(parseInt(a.idle_in_transaction_session_timeout,10))),a.options&&(b.options=a.options),b}cancel(a,b){if(a.activeQuery===b){var c=this.connection;this.host&&0===this.host.indexOf("/")?c.connect(this.host+"/.s.PGSQL."+this.port):c.connect(this.port,this.host),c.on("connect",function(){c.cancel(a.processID,a.secretKey)})}else -1!==a.queryQueue.indexOf(b)&&a.queryQueue.splice(a.queryQueue.indexOf(b),1)}setTypeParser(a,b,c){return this._types.setTypeParser(a,b,c)}getTypeParser(a,b){return this._types.getTypeParser(a,b)}escapeIdentifier(a){return'"'+a.replace(/"/g,'""')+'"'}escapeLiteral(a){for(var b=!1,c="'",d=0;d<a.length;d++){var e=a[d];"'"===e?c+=e+e:"\\"===e?(c+=e+e,b=!0):c+=e}return c+="'",!0===b&&(c=" E"+c),c}_pulseQueryQueue(){if(!0===this.readyForQuery)if(this.activeQuery=this.queryQueue.shift(),this.activeQuery){this.readyForQuery=!1,this.hasExecuted=!0;let a=this.activeQuery.submit(this.connection);a&&N.nextTick(()=>{this.activeQuery.handleError(a,this.connection),this.readyForQuery=!0,this._pulseQueryQueue()})}else this.hasExecuted&&(this.activeQuery=null,this.emit("drain"))}query(a,b,c){var d,e,f,g,h;if(null==a)throw TypeError("Client was passed a null or undefined query");return"function"==typeof a.submit?(f=a.query_timeout||this.connectionParameters.query_timeout,e=d=a,"function"==typeof b&&(d.callback=d.callback||b)):(f=this.connectionParameters.query_timeout,(d=new i(a,b,c)).callback||(e=new this._Promise((a,b)=>{d.callback=(c,d)=>c?b(c):a(d)}))),f&&(h=d.callback,g=setTimeout(()=>{var a=Error("Query read timeout");N.nextTick(()=>{d.handleError(a,this.connection)}),h(a),d.callback=()=>{};var b=this.queryQueue.indexOf(d);b>-1&&this.queryQueue.splice(b,1),this._pulseQueryQueue()},f),d.callback=(a,b)=>{clearTimeout(g),h(a,b)}),this.binary&&!d.binary&&(d.binary=!0),d._result&&!d._result._types&&(d._result._types=this._types),this._queryable?this._ending?N.nextTick(()=>{d.handleError(Error("Client was closed and is not queryable"),this.connection)}):(this.queryQueue.push(d),this._pulseQueryQueue()):N.nextTick(()=>{d.handleError(Error("Client has encountered a connection error and is not queryable"),this.connection)}),e}ref(){this.connection.ref()}unref(){this.connection.unref()}end(a){if(this._ending=!0,!this.connection._connecting)if(!a)return this._Promise.resolve();else a();if(this.activeQuery||!this._queryable?this.connection.stream.destroy():this.connection.end(),!a)return new this._Promise(a=>{this.connection.once("end",a)});this.connection.once("end",a)}};V(l,"Client"),l.Query=i,b.exports=l}),bo=X((a,b)=>{ae();var c=af().EventEmitter,d=V(function(){},"NOOP"),e=V((a,b)=>{let c=a.findIndex(b);return -1===c?void 0:a.splice(c,1)[0]},"removeWhere"),f=class{constructor(a,b,c){this.client=a,this.idleListener=b,this.timeoutId=c}};V(f,"IdleItem");var g=class{constructor(a){this.callback=a}};function h(){throw Error("Release called on client which has already been released to the pool.")}function i(a,b){let c,d;return b?{callback:b,result:void 0}:{callback:V(function(a,b){a?c(a):d(b)},"cb"),result:new a(function(a,b){d=a,c=b}).catch(a=>{throw Error.captureStackTrace(a),a})}}function j(a,b){return V(function c(d){d.client=b,b.removeListener("error",c),b.on("error",()=>{a.log("additional client error after disconnection due to error",d)}),a._remove(b),a.emit("error",d,b)},"idleListener")}V(g,"PendingItem"),V(h,"throwOnDoubleRelease"),V(i,"promisify"),V(j,"makeIdleListener");var k=class extends c{constructor(a,b){super(),this.options=Object.assign({},a),null!=a&&"password"in a&&Object.defineProperty(this.options,"password",{configurable:!0,enumerable:!1,writable:!0,value:a.password}),null!=a&&a.ssl&&a.ssl.key&&Object.defineProperty(this.options.ssl,"key",{enumerable:!1}),this.options.max=this.options.max||this.options.poolSize||10,this.options.min=this.options.min||0,this.options.maxUses=this.options.maxUses||1/0,this.options.allowExitOnIdle=this.options.allowExitOnIdle||!1,this.options.maxLifetimeSeconds=this.options.maxLifetimeSeconds||0,this.log=this.options.log||function(){},this.Client=this.options.Client||b||bw().Client,this.Promise=this.options.Promise||K.Promise,typeof this.options.idleTimeoutMillis>"u"&&(this.options.idleTimeoutMillis=1e4),this._clients=[],this._idle=[],this._expired=new WeakSet,this._pendingQueue=[],this._endCallback=void 0,this.ending=!1,this.ended=!1}_isFull(){return this._clients.length>=this.options.max}_isAboveMin(){return this._clients.length>this.options.min}_pulseQueue(){if(this.log("pulse queue"),this.ended)return void this.log("pulse queue ended");if(this.ending){this.log("pulse queue on ending"),this._idle.length&&this._idle.slice().map(a=>{this._remove(a.client)}),this._clients.length||(this.ended=!0,this._endCallback());return}if(!this._pendingQueue.length)return void this.log("no queued requests");if(!this._idle.length&&this._isFull())return;let a=this._pendingQueue.shift();if(this._idle.length){let b=this._idle.pop();clearTimeout(b.timeoutId);let c=b.client;c.ref&&c.ref();let d=b.idleListener;return this._acquireClient(c,a,d,!1)}if(!this._isFull())return this.newClient(a);throw Error("unexpected condition")}_remove(a){let b=e(this._idle,b=>b.client===a);void 0!==b&&clearTimeout(b.timeoutId),this._clients=this._clients.filter(b=>b!==a),a.end(),this.emit("remove",a)}connect(a){if(this.ending){let b=Error("Cannot use a pool after calling end on the pool");return a?a(b):this.Promise.reject(b)}let b=i(this.Promise,a),c=b.result;if(this._isFull()||this._idle.length){if(this._idle.length&&N.nextTick(()=>this._pulseQueue()),!this.options.connectionTimeoutMillis)return this._pendingQueue.push(new g(b.callback)),c;let a=V((a,c,d)=>{clearTimeout(f),b.callback(a,c,d)},"queueCallback"),d=new g(a),f=setTimeout(()=>{e(this._pendingQueue,b=>b.callback===a),d.timedOut=!0,b.callback(Error("timeout exceeded when trying to connect"))},this.options.connectionTimeoutMillis);return f.unref&&f.unref(),this._pendingQueue.push(d),c}return this.newClient(new g(b.callback)),c}newClient(a){let b=new this.Client(this.options);this._clients.push(b);let c=j(this,b);this.log("checking client timeout");let e,f=!1;this.options.connectionTimeoutMillis&&(e=setTimeout(()=>{this.log("ending client due to timeout"),f=!0,b.connection?b.connection.stream.destroy():b.end()},this.options.connectionTimeoutMillis)),this.log("connecting new client"),b.connect(h=>{if(e&&clearTimeout(e),b.on("error",c),h)this.log("client failed to connect",h),this._clients=this._clients.filter(a=>a!==b),f&&(h=Error("Connection terminated due to connection timeout",{cause:h})),this._pulseQueue(),a.timedOut||a.callback(h,void 0,d);else{if(this.log("new client connected"),0!==this.options.maxLifetimeSeconds){let a=setTimeout(()=>{this.log("ending client due to expired lifetime"),this._expired.add(b),-1!==this._idle.findIndex(a=>a.client===b)&&this._acquireClient(b,new g((a,b,c)=>c()),c,!1)},1e3*this.options.maxLifetimeSeconds);a.unref(),b.once("end",()=>clearTimeout(a))}return this._acquireClient(b,a,c,!0)}})}_acquireClient(a,b,c,e){e&&this.emit("connect",a),this.emit("acquire",a),a.release=this._releaseOnce(a,c),a.removeListener("error",c),b.timedOut?e&&this.options.verify?this.options.verify(a,a.release):a.release():e&&this.options.verify?this.options.verify(a,c=>{if(c)return a.release(c),b.callback(c,void 0,d);b.callback(void 0,a,a.release)}):b.callback(void 0,a,a.release)}_releaseOnce(a,b){let c=!1;return d=>{c&&h(),c=!0,this._release(a,b,d)}}_release(a,b,c){let d;if(a.on("error",b),a._poolUseCount=(a._poolUseCount||0)+1,this.emit("release",c,a),c||this.ending||!a._queryable||a._ending||a._poolUseCount>=this.options.maxUses){a._poolUseCount>=this.options.maxUses&&this.log("remove expended client"),this._remove(a),this._pulseQueue();return}if(this._expired.has(a)){this.log("remove expired client"),this._expired.delete(a),this._remove(a),this._pulseQueue();return}this.options.idleTimeoutMillis&&this._isAboveMin()&&(d=setTimeout(()=>{this.log("remove idle client"),this._remove(a)},this.options.idleTimeoutMillis),this.options.allowExitOnIdle&&d.unref()),this.options.allowExitOnIdle&&a.unref(),this._idle.push(new f(a,b,d)),this._pulseQueue()}query(a,b,c){if("function"==typeof a){let b=i(this.Promise,a);return L(function(){return b.callback(Error("Passing a function as the first parameter to pool.query is not supported"))}),b.result}"function"==typeof b&&(c=b,b=void 0);let d=i(this.Promise,c);return c=d.callback,this.connect((d,e)=>{if(d)return c(d);let f=!1,g=V(a=>{f||(f=!0,e.release(a),c(a))},"onError");e.once("error",g),this.log("dispatching query");try{e.query(a,b,(a,b)=>{if(this.log("query dispatched"),e.removeListener("error",g),!f)return f=!0,e.release(a),a?c(a):c(void 0,b)})}catch(a){return e.release(a),c(a)}}),d.result}end(a){if(this.log("ending"),this.ending){let b=Error("Called end on pool more than once");return a?a(b):this.Promise.reject(b)}this.ending=!0;let b=i(this.Promise,a);return this._endCallback=b.callback,this._pulseQueue(),b.result}get waitingCount(){return this._pendingQueue.length}get idleCount(){return this._idle.length}get expiredCount(){return this._clients.reduce((a,b)=>a+ +!!this._expired.has(b),0)}get totalCount(){return this._clients.length}};V(k,"Pool"),b.exports=k}),bp={};Y(bp,{default:()=>bq});var bq,br=W(()=>{ae(),bq={}}),bs=X((a,b)=>{b.exports={name:"pg",version:"8.8.0",description:"PostgreSQL client - pure javascript & libpq with the same API",keywords:["database","libpq","pg","postgre","postgres","postgresql","rdbms"],homepage:"https://github.com/brianc/node-postgres",repository:{type:"git",url:"git://github.com/brianc/node-postgres.git",directory:"packages/pg"},author:"Brian Carlson <brian.m.carlson@gmail.com>",main:"./lib",dependencies:{"buffer-writer":"2.0.0","packet-reader":"1.0.0","pg-connection-string":"^2.5.0","pg-pool":"^3.5.2","pg-protocol":"^1.5.0","pg-types":"^2.1.0",pgpass:"1.x"},devDependencies:{async:"2.6.4",bluebird:"3.5.2",co:"4.6.0","pg-copy-streams":"0.3.0"},peerDependencies:{"pg-native":">=3.0.1"},peerDependenciesMeta:{"pg-native":{optional:!0}},scripts:{test:"make test-all"},files:["lib","SPONSORS.md"],license:"MIT",engines:{node:">= 8.0.0"},gitHead:"c99fb2c127ddf8d712500db2c7b9a5491a178655"}}),bt=X((a,b)=>{ae();var c=af().EventEmitter,d=(aQ(),_(aO)),e=aN(),f=b.exports=function(a,b,d){c.call(this),a=e.normalizeQueryConfig(a,b,d),this.text=a.text,this.values=a.values,this.name=a.name,this.callback=a.callback,this.state="new",this._arrayMode="array"===a.rowMode,this._emitRowEvents=!1,this.on("newListener",(function(a){"row"===a&&(this._emitRowEvents=!0)}).bind(this))};d.inherits(f,c);var g={sqlState:"code",statementPosition:"position",messagePrimary:"message",context:"where",schemaName:"schema",tableName:"table",columnName:"column",dataTypeName:"dataType",constraintName:"constraint",sourceFile:"file",sourceLine:"line",sourceFunction:"routine"};f.prototype.handleError=function(a){var b=this.native.pq.resultErrorFields();if(b)for(var c in b)a[g[c]||c]=b[c];this.callback?this.callback(a):this.emit("error",a),this.state="error"},f.prototype.then=function(a,b){return this._getPromise().then(a,b)},f.prototype.catch=function(a){return this._getPromise().catch(a)},f.prototype._getPromise=function(){return this._promise||(this._promise=new Promise((function(a,b){this._once("end",a),this._once("error",b)}).bind(this))),this._promise},f.prototype.submit=function(a){this.state="running";var b=this;this.native=a.native,a.native.arrayMode=this._arrayMode;var c=V(function(c,d,e){if(a.native.arrayMode=!1,L(function(){b.emit("_done")}),c)return b.handleError(c);b._emitRowEvents&&(e.length>1?d.forEach((a,c)=>{a.forEach(a=>{b.emit("row",a,e[c])})}):d.forEach(function(a){b.emit("row",a,e)})),b.state="end",b.emit("end",e),b.callback&&b.callback(null,e)},"after");if(N.domain&&(c=N.domain.bind(c)),this.name){this.name.length>63&&(console.error("Warning! Postgres only supports 63 characters for query names."),console.error("You supplied %s (%s)",this.name,this.name.length),console.error("This can cause conflicts and silent errors executing queries"));var d=(this.values||[]).map(e.prepareValue);if(a.namedQueries[this.name]){if(this.text&&a.namedQueries[this.name]!==this.text){let a=Error(`Prepa\
red statements must be unique - '${this.name}' was used for a different statement`);return c(a)}return a.native.execute(this.name,d,c)}return a.native.prepare(this.name,this.text,d.length,function(e){return e?c(e):(a.namedQueries[b.name]=b.text,b.native.execute(b.name,d,c))})}if(this.values){if(!Array.isArray(this.values)){let a=Error("Query values must be an array");return c(a)}var f=this.values.map(e.prepareValue);a.native.query(this.text,f,c)}else a.native.query(this.text,c)}}),bu=X((a,b)=>{ae();var c=(br(),_(bp)),d=aB(),e=(bs(),af().EventEmitter),f=(aQ(),_(aO)),g=ba(),h=bt(),i=b.exports=function(a){e.call(this),a=a||{},this._Promise=a.Promise||K.Promise,this._types=new d(a.types),this.native=new c({types:this._types}),this._queryQueue=[],this._ending=!1,this._connecting=!1,this._connected=!1,this._queryable=!0;var b=this.connectionParameters=new g(a);this.user=b.user,Object.defineProperty(this,"password",{configurable:!0,enumerable:!1,writable:!0,value:b.password}),this.database=b.database,this.host=b.host,this.port=b.port,this.namedQueries={}};i.Query=h,f.inherits(i,e),i.prototype._errorAllQueries=function(a){let b=V(b=>{N.nextTick(()=>{b.native=this.native,b.handleError(a)})},"enqueueError");this._hasActiveQuery()&&(b(this._activeQuery),this._activeQuery=null),this._queryQueue.forEach(b),this._queryQueue.length=0},i.prototype._connect=function(a){var b=this;this._connecting?N.nextTick(()=>a(Error("Client has already been connected. You cannot reuse a client."))):(this._connecting=!0,this.connectionParameters.getLibpqConnectionString(function(c,d){if(c)return a(c);b.native.connect(d,function(c){if(c)return b.native.end(),a(c);b._connected=!0,b.native.on("error",function(a){b._queryable=!1,b._errorAllQueries(a),b.emit("error",a)}),b.native.on("notification",function(a){b.emit("notification",{channel:a.relname,payload:a.extra})}),b.emit("connect"),b._pulseQueryQueue(!0),a()})}))},i.prototype.connect=function(a){return a?void this._connect(a):new this._Promise((a,b)=>{this._connect(c=>{c?b(c):a()})})},i.prototype.query=function(a,b,c){var d,e,f,g,i;if(null==a)throw TypeError("Client was passed a null or undefined query");if("function"==typeof a.submit)f=a.query_timeout||this.connectionParameters.query_timeout,e=d=a,"function"==typeof b&&(a.callback=b);else if(f=this.connectionParameters.query_timeout,!(d=new h(a,b,c)).callback){let a,b;e=new this._Promise((c,d)=>{a=c,b=d}),d.callback=(c,d)=>c?b(c):a(d)}return f&&(i=d.callback,g=setTimeout(()=>{var a=Error("Query read timeout");N.nextTick(()=>{d.handleError(a,this.connection)}),i(a),d.callback=()=>{};var b=this._queryQueue.indexOf(d);b>-1&&this._queryQueue.splice(b,1),this._pulseQueryQueue()},f),d.callback=(a,b)=>{clearTimeout(g),i(a,b)}),this._queryable?this._ending?(d.native=this.native,N.nextTick(()=>{d.handleError(Error("Client was closed and is not queryable"))})):(this._queryQueue.push(d),this._pulseQueryQueue()):(d.native=this.native,N.nextTick(()=>{d.handleError(Error("Client has encountered a connection error and is not queryable"))})),e},i.prototype.end=function(a){var b,c=this;return this._ending=!0,this._connected||this.once("connect",this.end.bind(this,a)),a||(b=new this._Promise(function(b,c){a=V(a=>a?c(a):b(),"cb")})),this.native.end(function(){c._errorAllQueries(Error("Connection terminated")),N.nextTick(()=>{c.emit("end"),a&&a()})}),b},i.prototype._hasActiveQuery=function(){return this._activeQuery&&"error"!==this._activeQuery.state&&"end"!==this._activeQuery.state},i.prototype._pulseQueryQueue=function(a){if(this._connected&&!this._hasActiveQuery()){var b=this._queryQueue.shift();if(!b){a||this.emit("drain");return}this._activeQuery=b,b.submit(this);var c=this;b.once("_done",function(){c._pulseQueryQueue()})}},i.prototype.cancel=function(a){this._activeQuery===a?this.native.cancel(function(){}):-1!==this._queryQueue.indexOf(a)&&this._queryQueue.splice(this._queryQueue.indexOf(a),1)},i.prototype.ref=function(){},i.prototype.unref=function(){},i.prototype.setTypeParser=function(a,b,c){return this._types.setTypeParser(a,b,c)},i.prototype.getTypeParser=function(a,b){return this._types.getTypeParser(a,b)}}),bv=X((a,b)=>{ae(),b.exports=bu()}),bw=X((a,b)=>{ae();var c=bn(),d=aM(),e=bm(),f=bo(),{DatabaseError:g}=bi(),h=V(a=>{var b;return V(b=class extends f{constructor(b){super(b,a)}},"BoundPool"),b},"poolFactory"),i=V(function(a){this.defaults=d,this.Client=a,this.Query=this.Client.Query,this.Pool=h(this.Client),this._pools=[],this.Connection=e,this.types=aA(),this.DatabaseError=g},"PG");"u">typeof N.env.NODE_PG_FORCE_NATIVE?b.exports=new i(bv()):(b.exports=new i(c),Object.defineProperty(b.exports,"native",{configurable:!0,enumerable:!1,get(){var a=null;try{a=new i(bv())}catch(a){if("MODULE_NOT_FOUND"!==a.code)throw a}return Object.defineProperty(b.exports,"native",{value:a}),a}}))});ae(),ae(),am(),ap(),ae();var bx=Object.defineProperty,by=Object.defineProperties,bz=Object.getOwnPropertyDescriptors,bA=Object.getOwnPropertySymbols,bB=Object.prototype.hasOwnProperty,bC=Object.prototype.propertyIsEnumerable,bD=V((a,b,c)=>b in a?bx(a,b,{enumerable:!0,configurable:!0,writable:!0,value:c}):a[b]=c,"__defNormalProp"),bE=V((a,b)=>{for(var c in b||(b={}))bB.call(b,c)&&bD(a,c,b[c]);if(bA)for(var c of bA(b))bC.call(b,c)&&bD(a,c,b[c]);return a},"__spreadValues"),bF=V((a,b)=>by(a,bz(b)),"__spreadProps"),bG=2===new Uint8Array(new Uint16Array([258]).buffer)[0],bH=new TextDecoder,bI=new TextEncoder,bJ=bI.encode("0123456789abcdef"),bK=bI.encode("0123456789ABCDEF"),bL=bI.encode("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/").slice();function bM(a,{alphabet:d,scratchArr:e}={}){if(!b)if(b=new Uint16Array(256),c=new Uint16Array(256),bG)for(let a=0;a<256;a++)b[a]=bJ[15&a]<<8|bJ[a>>>4],c[a]=bK[15&a]<<8|bK[a>>>4];else for(let a=0;a<256;a++)b[a]=bJ[15&a]|bJ[a>>>4]<<8,c[a]=bK[15&a]|bK[a>>>4]<<8;a.byteOffset%4!=0&&(a=new Uint8Array(a));let f=a.length,g=f>>>2,h=e||new Uint16Array(f),i=new Uint32Array(a.buffer,a.byteOffset,g),j=new Uint32Array(h.buffer,h.byteOffset,f>>>1),k="upper"===d?c:b,l=0,m=0,n;if(bG)for(;l<g;)n=i[l++],j[m++]=k[n>>>8&255]<<16|k[255&n],j[m++]=k[n>>>24]<<16|k[n>>>16&255];else for(;l<g;)n=i[l++],j[m++]=k[n>>>24]<<16|k[n>>>16&255],j[m++]=k[n>>>8&255]<<16|k[255&n];for(l<<=2;l<f;)h[l]=k[a[l++]];return bH.decode(h.subarray(0,f))}function bN(a,b={}){let c="",d=a.length,e=Math.ceil(d/504e3),f=new Uint16Array(e>1?504e3:d);for(let d=0;d<e;d++){let e=504e3*d,g=e+504e3;c+=bM(a.subarray(e,g),bF(bE({},b),{scratchArr:f}))}return c}function bO(a,b={}){return"upper"!==b.alphabet&&"function"==typeof a.toHex?a.toHex():bN(a,b)}bL[62]=45,bL[63]=95,V(bM,"_toHex"),V(bN,"_toHexChunked"),V(bO,"toHex"),ae();var bP=class a{constructor(a,b){this.strings=a,this.values=b}toParameterizedQuery(b={query:"",params:[]}){let{strings:c,values:d}=this;for(let e=0,f=c.length;e<f;e++)if(b.query+=c[e],e<d.length){let c=d[e];if(c instanceof bR)b.query+=c.sql;else if(c instanceof b0)if(c.queryData instanceof a)c.queryData.toParameterizedQuery(b);else{if(c.queryData.params?.length)throw Error("This query is not composable");b.query+=c.queryData.query}else{let{params:a}=b;a.push(c),b.query+="$"+a.length,(c instanceof M||ArrayBuffer.isView(c))&&(b.query+="::bytea")}}return b}};V(bP,"SqlTemplate");var bQ=class{constructor(a){this.sql=a}};V(bQ,"UnsafeRawSql");var bR=bQ;function bS(){}ae(),V(bS,"warnIfBrowser"),am();var bT=$(aB()),bU=$(aN()),bV=class a extends Error{constructor(b){super(b),aa(this,"name","NeonDbError"),aa(this,"severity"),aa(this,"code"),aa(this,"detail"),aa(this,"hint"),aa(this,"position"),aa(this,"internalPosition"),aa(this,"internalQuery"),aa(this,"where"),aa(this,"schema"),aa(this,"table"),aa(this,"column"),aa(this,"dataType"),aa(this,"constraint"),aa(this,"file"),aa(this,"line"),aa(this,"routine"),aa(this,"sourceError"),"captureStackTrace"in Error&&"function"==typeof Error.captureStackTrace&&Error.captureStackTrace(this,a)}};V(bV,"NeonDbError");var bW="transaction() expects an array of queries, or a function returning an array of queries",bX=["severity","code","detail","hint","position","internalPosition","internalQuery","where","schema","table","column","dataType","constraint","file","line","routine"];function bY(a){return a instanceof M?"\\x"+bO(a):a}function bZ(a){let{query:b,params:c}=a instanceof bP?a.toParameterizedQuery():a;return{query:b,params:c.map(a=>bY((0,bU.prepareValue)(a)))}}function b$(a,{arrayMode:b,fullResults:c,fetchOptions:d,isolationLevel:e,readOnly:f,deferrable:g,authToken:h,disableWarningInBrowsers:i}={}){let j;if(!a)throw Error("No database connection string was provided to `neon()`. Perhaps an environment variable has not been set?");try{j=ao(a)}catch{throw Error("Database connection string provided to `neon()` is not a valid URL. Connection string: "+String(a))}let{protocol:k,username:l,hostname:m,port:n,pathname:o}=j;if("postgres:"!==k&&"postgresql:"!==k||!l||!m||!o)throw Error("Database connection string format for `neon()` should be: postgresql://user:password@host.tld/dbname?option=value");function p(a,...b){if(!(Array.isArray(a)&&Array.isArray(a.raw)&&Array.isArray(b)))throw Error('This function can now be called only as a tagged-template function: sql`SELECT ${value}`, not sql("SELECT $1", [value], options). For a conventional function call with value placeholders ($1, $2, etc.), use sql.query("SELECT $1", [value], options).');return new b0(q,new bP(a,b))}async function q(j,k,l){let o,{fetchEndpoint:p,fetchFunction:q}=al,r=Array.isArray(j)?{queries:j.map(a=>bZ(a))}:bZ(j),s=d??{},t=b??!1,u=c??!1,v=e,w=f,x=g;void 0!==l&&(void 0!==l.fetchOptions&&(s={...s,...l.fetchOptions}),void 0!==l.arrayMode&&(t=l.arrayMode),void 0!==l.fullResults&&(u=l.fullResults),void 0!==l.isolationLevel&&(v=l.isolationLevel),void 0!==l.readOnly&&(w=l.readOnly),void 0!==l.deferrable&&(x=l.deferrable)),void 0===k||Array.isArray(k)||void 0===k.fetchOptions||(s={...s,...k.fetchOptions});let y=h;Array.isArray(k)||k?.authToken===void 0||(y=k.authToken);let z="function"==typeof p?p(m,n,{jwtAuth:void 0!==y}):p,A={"Neon-Connection-String":a,"Neon-Raw-Text-Output":"true","Neon-Array-Mode":"true"},B=await b2(y);B&&(A.Authorization=`Bearer ${B}`),Array.isArray(j)&&(void 0!==v&&(A["Neon-Batch-Isolation-Level"]=v),void 0!==w&&(A["Neon-Batch-Read-Only"]=String(w)),void 0!==x&&(A["Neon-Batch-Deferrable"]=String(x))),i||al.disableWarningInBrowsers||bS();try{o=await (q??fetch)(z,{method:"POST",body:JSON.stringify(r),headers:A,...s})}catch(b){let a=new bV(`Error connecting to database: ${b}`);throw a.sourceError=b,a}if(o.ok){let a=await o.json();if(Array.isArray(j)){let b=a.results;if(!Array.isArray(b))throw new bV("Neon internal error: unexpected result format");return b.map((a,b)=>{let c=k[b]??{};return b1(a,{arrayMode:c.arrayMode??t,fullResults:c.fullResults??u,types:c.types})})}{let b=k??{};return b1(a,{arrayMode:b.arrayMode??t,fullResults:b.fullResults??u,types:b.types})}}{let{status:a}=o;if(400===a){let a=await o.json(),b=new bV(a.message);for(let c of bX)b[c]=a[c]??void 0;throw b}{let b=await o.text();throw new bV(`Server error (HTTP status ${a}): ${b}`)}}}return V(p,"templateFn"),p.query=(a,b,c)=>new b0(q,{query:a,params:b??[]},c),p.unsafe=a=>new bR(a),p.transaction=async(a,b)=>{if("function"==typeof a&&(a=a(p)),!Array.isArray(a))throw Error(bW);return a.forEach(a=>{if(!(a instanceof b0))throw Error(bW)}),q(a.map(a=>a.queryData),a.map(a=>a.opts??{}),b)},V(q,"execute"),p}V(bY,"encodeBuffersAsBytea"),V(bZ,"prepareQuery"),V(b$,"neon");var b_=class{constructor(a,b,c){this.execute=a,this.queryData=b,this.opts=c}then(a,b){return this.execute(this.queryData,this.opts).then(a,b)}catch(a){return this.execute(this.queryData,this.opts).catch(a)}finally(a){return this.execute(this.queryData,this.opts).finally(a)}};V(b_,"NeonQueryPromise");var b0=b_;function b1(a,{arrayMode:b,fullResults:c,types:d}){let e=new bT.default(d),f=a.fields.map(a=>a.name),g=a.fields.map(a=>e.getTypeParser(a.dataTypeID)),h=!0===b?a.rows.map(a=>a.map((a,b)=>null===a?null:g[b](a))):a.rows.map(a=>Object.fromEntries(a.map((a,b)=>[f[b],null===a?null:g[b](a)])));return c?(a.viaNeonFetch=!0,a.rowAsArray=b,a.rows=h,a._parsers=g,a._types=e,a):h}async function b2(a){if("string"==typeof a)return a;if("function"==typeof a)try{return await Promise.resolve(a())}catch(b){let a=new bV("Error getting auth token.");throw b instanceof Error&&(a=new bV(`Error getting auth token: ${b.message}`)),a}}V(b1,"processQueryResult"),V(b2,"getAuthToken"),ae();var b3=$(bw());ae();var b4=$(bw()),b5=class extends b4.Client{constructor(a){super(a),this.config=a}get neonConfig(){return this.connection.stream}connect(a){let{neonConfig:b}=this;b.forceDisablePgSSL&&(this.ssl=this.connection.ssl=!1),this.ssl&&b.useSecureWebSocket&&console.warn("SSL is enabled for both Postgres (e.g. ?sslmode=require in the connection string + forceDisablePgSSL = false) and the WebSocket tunnel (useSecureWebSocket = true). Double encryption will increase latency and CPU usage. It may be appropriate to disable SSL in the Postgres connection parameters or set forceDisablePgSSL = true.");let c="string"!=typeof this.config&&this.config?.host!==void 0||"string"!=typeof this.config&&this.config?.connectionString!==void 0||void 0!==N.env.PGHOST,d=N.env.USER??N.env.USERNAME;if(!c&&"localhost"===this.host&&this.user===d&&this.database===d&&null===this.password)throw Error(`No database host or connection string wa\
s set, and key parameters have default values (host: localhost, user: ${d}, db: ${d}, password: null\
). Is an environment variable missing? Alternatively, if you intended to connect with these paramete\
rs, please set the host to 'localhost' explicitly.`);let e=super.connect(a),f=b.pipelineTLS&&this.ssl,g="password"===b.pipelineConnect;if(!f&&!b.pipelineConnect)return e;let h=this.connection;if(f&&h.on("connect",()=>h.stream.emit("data","S")),g){h.removeAllListeners("authenticationCleartextPassword"),h.removeAllListeners("readyForQuery"),h.once("readyForQuery",()=>h.on("readyForQuery",this._handleReadyForQuery.bind(this)));let a=this.ssl?"sslconnect":"connect";h.on(a,()=>{this.neonConfig.disableWarningInBrowsers||bS(),this._handleAuthCleartextPassword(),this._handleReadyForQuery()})}return e}async _handleAuthSASLContinue(a){if(typeof crypto>"u"||void 0===crypto.subtle||void 0===crypto.subtle.importKey)throw Error("Cannot use SASL auth when `crypto.subtle` is not defined");let b=crypto.subtle,c=this.saslSession,d=this.password,e=a.data;if("SASLInitialResponse"!==c.message||"string"!=typeof d||"string"!=typeof e)throw Error("SASL: protocol error");let f=Object.fromEntries(e.split(",").map(a=>{if(!/^.=/.test(a))throw Error("SASL: Invalid attribute pair entry");return[a[0],a.substring(2)]})),g=f.r,h=f.s,i=f.i;if(!g||!/^[!-+--~]+$/.test(g))throw Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: nonce missing/unprintable");if(!h||!/^(?:[a-zA-Z0-9+/]{4})*(?:[a-zA-Z0-9+/]{2}==|[a-zA-Z0-9+/]{3}=)?$/.test(h))throw Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: salt missing/not base64");if(!i||!/^[1-9][0-9]*$/.test(i))throw Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: missing/invalid iteration count");if(!g.startsWith(c.clientNonce))throw Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: server nonce does not start with client nonce");if(g.length===c.clientNonce.length)throw Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: server nonce is too short");let j=parseInt(i,10),k=M.from(h,"base64"),l=new TextEncoder,m=l.encode(d),n=await b.importKey("raw",m,{name:"HMAC",hash:{name:"SHA-256"}},!1,["sign"]),o=new Uint8Array(await b.sign("HMAC",n,M.concat([k,M.from([0,0,0,1])]))),p=o;for(var q=0;q<j-1;q++)o=new Uint8Array(await b.sign("HMAC",n,o)),p=M.from(p.map((a,b)=>p[b]^o[b]));let r=p,s=await b.importKey("raw",r,{name:"HMAC",hash:{name:"SHA-256"}},!1,["sign"]),t=new Uint8Array(await b.sign("HMAC",s,l.encode("Client Key"))),u=await b.digest("SHA-256",t),v="n=*,r="+c.clientNonce,w="r="+g+",s="+h+",i="+j,x="c=biws,r="+g,y=v+","+w+","+x,z=await b.importKey("raw",u,{name:"HMAC",hash:{name:"SHA-256"}},!1,["sign"]);var A=new Uint8Array(await b.sign("HMAC",z,l.encode(y))),B=M.from(t.map((a,b)=>t[b]^A[b])).toString("base64");let C=await b.importKey("raw",r,{name:"HMAC",hash:{name:"SHA-256"}},!1,["sign"]),D=await b.sign("HMAC",C,l.encode("Server Key")),E=await b.importKey("raw",D,{name:"HMAC",hash:{name:"SHA-256"}},!1,["sign"]);var F=M.from(await b.sign("HMAC",E,l.encode(y)));c.message="SASLResponse",c.serverSignature=F.toString("base64"),c.response=x+",p="+B,this.connection.sendSCRAMClientFinalMessage(this.saslSession.response)}};V(b5,"NeonClient"),am();var b6=$(ba());function b7(a,b){let c,d;return b?{callback:b,result:void 0}:{callback:V(function(a,b){a?c(a):d(b)},"cb"),result:new a(function(a,b){d=a,c=b})}}V(b7,"promisify"),V(class extends b3.Pool{constructor(){super(...arguments),aa(this,"Client",b5),aa(this,"hasFetchUnsupportedListeners",!1),aa(this,"addListener",this.on)}on(a,b){return"error"!==a&&(this.hasFetchUnsupportedListeners=!0),super.on(a,b)}query(a,b,c){if(!al.poolQueryViaFetch||this.hasFetchUnsupportedListeners||"function"==typeof a)return super.query(a,b,c);"function"==typeof b&&(c=b,b=void 0);let d=b7(this.Promise,c);c=d.callback;try{let d=new b6.default(this.options),e=encodeURIComponent,f=encodeURI,g=`postgresql://${e(d.user)}:${e(d.password)}@${e(d.host)}\
/${f(d.database)}`,h="string"==typeof a?a:a.text,i=b??a.values??[];b$(g,{fullResults:!0,arrayMode:"array"===a.rowMode}).query(h,i,{types:a.types??this.options?.types}).then(a=>c(void 0,a)).catch(a=>c(a))}catch(a){c(a)}return d.result}},"NeonPool"),am();var b8=$(bw());b8.DatabaseError,b8.defaults,b8.escapeIdentifier,b8.escapeLiteral;var b9=b8.types;class ca{static [o.entityKind]="ConsoleLogWriter";write(a){console.log(a)}}class cb{static [o.entityKind]="DefaultLogger";writer;constructor(a){this.writer=a?.writer??new ca}logQuery(a,b){let c=b.map(a=>{try{return JSON.stringify(a)}catch{return String(a)}}),d=c.length?` -- params: [${c.join(", ")}]`:"";this.writer.write(`Query: ${a}${d}`)}}class cc{static [o.entityKind]="NoopLogger";logQuery(){}}class cd{static [o.entityKind]="QueryPromise";[Symbol.toStringTag]="QueryPromise";catch(a){return this.then(void 0,a)}finally(a){return this.then(b=>(a?.(),b),b=>{throw a?.(),b})}then(a,b){return this.execute().then(a,b)}}var ce=a.i(55280);class cf{constructor(a){this.table=a}static [o.entityKind]="ColumnAliasProxyHandler";get(a,b){return"table"===b?this.table:a[b]}}class cg{constructor(a,b){this.alias=a,this.replaceOriginalName=b}static [o.entityKind]="TableAliasProxyHandler";get(a,b){if(b===m.Table.Symbol.IsAlias)return!0;if(b===m.Table.Symbol.Name||this.replaceOriginalName&&b===m.Table.Symbol.OriginalName)return this.alias;if(b===ce.ViewBaseConfig)return{...a[ce.ViewBaseConfig],name:this.alias,isAlias:!0};if(b===m.Table.Symbol.Columns){let b=a[m.Table.Symbol.Columns];if(!b)return b;let c={};return Object.keys(b).map(d=>{c[d]=new Proxy(b[d],new cf(new Proxy(a,this)))}),c}let c=a[b];return(0,o.is)(c,n.Column)?new Proxy(c,new cf(new Proxy(a,this))):c}}class ch{constructor(a){this.alias=a}static [o.entityKind]="RelationTableAliasProxyHandler";get(a,b){return"sourceTable"===b?ci(a.sourceTable,this.alias):a[b]}}function ci(a,b){return new Proxy(a,new cg(b,!1))}function cj(a,b){return new Proxy(a,new cf(new Proxy(a.table,new cg(b,!1))))}function ck(a,b){return new d.SQL.Aliased(cl(a.sql,b),a.fieldAlias)}function cl(a,b){return d.sql.join(a.queryChunks.map(a=>(0,o.is)(a,n.Column)?cj(a,b):(0,o.is)(a,d.SQL)?cl(a,b):(0,o.is)(a,d.SQL.Aliased)?ck(a,b):a))}var cm=a.i(4501);class cn{static [o.entityKind]="SelectionProxyHandler";config;constructor(a){this.config={...a}}get(a,b){if("_"===b)return{...a._,selectedFields:new Proxy(a._.selectedFields,this)};if(b===ce.ViewBaseConfig)return{...a[ce.ViewBaseConfig],selectedFields:new Proxy(a[ce.ViewBaseConfig].selectedFields,this)};if("symbol"==typeof b)return a[b];let c=((0,o.is)(a,cm.Subquery)?a._.selectedFields:(0,o.is)(a,d.View)?a[ce.ViewBaseConfig].selectedFields:a)[b];if((0,o.is)(c,d.SQL.Aliased)){if("sql"===this.config.sqlAliasedBehavior&&!c.isSelectionField)return c.sql;let a=c.clone();return a.isSelectionField=!0,a}if((0,o.is)(c,d.SQL)){if("sql"===this.config.sqlBehavior)return c;throw Error(`You tried to reference "${b}" field from a subquery, which is a raw SQL field, but it doesn't have an alias declared. Please add an alias to the field using ".as('alias')" method.`)}return(0,o.is)(c,n.Column)?this.config.alias?new Proxy(c,new cf(new Proxy(c.table,new cg(this.config.alias,this.config.replaceOriginalName??!1)))):c:"object"!=typeof c||null===c?c:new Proxy(c,new cn(this.config))}}var co=a.i(84113),cp=a.i(44551);class cq{constructor(a,b){this.name=a,this.value=b}static [o.entityKind]="PgCheckBuilder";brand;build(a){return new cr(a,this)}}class cr{constructor(a,b){this.table=a,this.name=b.name,this.value=b.value}static [o.entityKind]="PgCheck";name;value}a.i(7231);class cs{constructor(a,b){this.name=a,b&&(this.as=b.as,this.for=b.for,this.to=b.to,this.using=b.using,this.withCheck=b.withCheck)}static [o.entityKind]="PgPolicy";as;for;to;using;withCheck;_linkedTable;link(a){return this._linkedTable=a,this}}a.i(51146);let ct=Symbol.for("drizzle:PgViewConfig");function cu(a){return(a.replace(/['\u2019]/g,"").match(/[\da-z]+|[A-Z]+(?![a-z])|[A-Z][\da-z]+/g)??[]).map(a=>a.toLowerCase()).join("_")}function cv(a){return(a.replace(/['\u2019]/g,"").match(/[\da-z]+|[A-Z]+(?![a-z])|[A-Z][\da-z]+/g)??[]).reduce((a,b,c)=>a+(0===c?b.toLowerCase():`${b[0].toUpperCase()}${b.slice(1)}`),"")}function cw(a){return a}class cx{static [o.entityKind]="CasingCache";cache={};cachedTables={};convert;constructor(a){this.convert="snake_case"===a?cu:"camelCase"===a?cv:cw}getColumnCasing(a){if(!a.keyAsName)return a.name;let b=a.table[m.Table.Symbol.Schema]??"public",c=a.table[m.Table.Symbol.OriginalName],d=`${b}.${c}.${a.name}`;return this.cache[d]||this.cacheTable(a.table),this.cache[d]}cacheTable(a){let b=a[m.Table.Symbol.Schema]??"public",c=a[m.Table.Symbol.OriginalName],d=`${b}.${c}`;if(!this.cachedTables[d]){for(let b of Object.values(a[m.Table.Symbol.Columns])){let a=`${d}.${b.name}`;this.cache[a]=this.convert(b.name)}this.cachedTables[d]=!0}}clearCache(){this.cache={},this.cachedTables={}}}class cy extends Error{static [o.entityKind]="DrizzleError";constructor({message:a,cause:b}){super(a),this.name="DrizzleError",this.cause=b}}class cz extends Error{constructor(a,b,c){super(`Failed query: ${a}
params: ${b}`),this.query=a,this.params=b,this.cause=c,Error.captureStackTrace(this,cz),c&&(this.cause=c)}}class cA extends cy{static [o.entityKind]="TransactionRollbackError";constructor(){super({message:"Rollback"})}}var cB=a.i(5302),cC=a.i(97122),cD=a.i(56564),cE=a.i(83217),cF=a.i(952),cG=a.i(31793),cH=d;class cI extends cH.View{static [o.entityKind]="PgViewBase"}class cJ{static [o.entityKind]="PgDialect";casing;constructor(a){this.casing=new cx(a?.casing)}async migrate(a,b,c){let e="string"==typeof c?"__drizzle_migrations":c.migrationsTable??"__drizzle_migrations",f="string"==typeof c?"drizzle":c.migrationsSchema??"drizzle",g=d.sql`
			CREATE TABLE IF NOT EXISTS ${d.sql.identifier(f)}.${d.sql.identifier(e)} (
				id SERIAL PRIMARY KEY,
				hash text NOT NULL,
				created_at bigint
			)
		`;await b.execute(d.sql`CREATE SCHEMA IF NOT EXISTS ${d.sql.identifier(f)}`),await b.execute(g);let h=(await b.all(d.sql`select id, hash, created_at from ${d.sql.identifier(f)}.${d.sql.identifier(e)} order by created_at desc limit 1`))[0];await b.transaction(async b=>{for await(let c of a)if(!h||Number(h.created_at)<c.folderMillis){for(let a of c.sql)await b.execute(d.sql.raw(a));await b.execute(d.sql`insert into ${d.sql.identifier(f)}.${d.sql.identifier(e)} ("hash", "created_at") values(${c.hash}, ${c.folderMillis})`)}})}escapeName(a){return`"${a}"`}escapeParam(a){return`$${a+1}`}escapeString(a){return`'${a.replace(/'/g,"''")}'`}buildWithCTE(a){if(!a?.length)return;let b=[d.sql`with `];for(let[c,e]of a.entries())b.push(d.sql`${d.sql.identifier(e._.alias)} as (${e._.sql})`),c<a.length-1&&b.push(d.sql`, `);return b.push(d.sql` `),d.sql.join(b)}buildDeleteQuery({table:a,where:b,returning:c,withList:e}){let f=this.buildWithCTE(e),g=c?d.sql` returning ${this.buildSelection(c,{isSingleTable:!0})}`:void 0,h=b?d.sql` where ${b}`:void 0;return d.sql`${f}delete from ${a}${h}${g}`}buildUpdateSet(a,b){let c=a[m.Table.Symbol.Columns],e=Object.keys(c).filter(a=>void 0!==b[a]||c[a]?.onUpdateFn!==void 0),f=e.length;return d.sql.join(e.flatMap((a,e)=>{let g=c[a],h=b[a]??d.sql.param(g.onUpdateFn(),g),i=d.sql`${d.sql.identifier(this.casing.getColumnCasing(g))} = ${h}`;return e<f-1?[i,d.sql.raw(", ")]:[i]}))}buildUpdateQuery({table:a,set:b,where:c,returning:e,withList:f,from:g,joins:i}){let j=this.buildWithCTE(f),k=a[h.PgTable.Symbol.Name],l=a[h.PgTable.Symbol.Schema],m=a[h.PgTable.Symbol.OriginalName],n=k===m?void 0:k,o=d.sql`${l?d.sql`${d.sql.identifier(l)}.`:void 0}${d.sql.identifier(m)}${n&&d.sql` ${d.sql.identifier(n)}`}`,p=this.buildUpdateSet(a,b),q=g&&d.sql.join([d.sql.raw(" from "),this.buildFromTable(g)]),r=this.buildJoins(i),s=e?d.sql` returning ${this.buildSelection(e,{isSingleTable:!g})}`:void 0,t=c?d.sql` where ${c}`:void 0;return d.sql`${j}update ${o} set ${p}${q}${r}${t}${s}`}buildSelection(a,{isSingleTable:b=!1}={}){let c=a.length,e=a.flatMap(({field:a},e)=>{let f=[];if((0,o.is)(a,d.SQL.Aliased)&&a.isSelectionField)f.push(d.sql.identifier(a.fieldAlias));else if((0,o.is)(a,d.SQL.Aliased)||(0,o.is)(a,d.SQL)){let c=(0,o.is)(a,d.SQL.Aliased)?a.sql:a;b?f.push(new d.SQL(c.queryChunks.map(a=>(0,o.is)(a,cB.PgColumn)?d.sql.identifier(this.casing.getColumnCasing(a)):a))):f.push(c),(0,o.is)(a,d.SQL.Aliased)&&f.push(d.sql` as ${d.sql.identifier(a.fieldAlias)}`)}else(0,o.is)(a,n.Column)&&(b?f.push(d.sql.identifier(this.casing.getColumnCasing(a))):f.push(a));return e<c-1&&f.push(d.sql`, `),f});return d.sql.join(e)}buildJoins(a){if(!a||0===a.length)return;let b=[];for(let[c,e]of a.entries()){0===c&&b.push(d.sql` `);let f=e.table,g=e.lateral?d.sql` lateral`:void 0,i=e.on?d.sql` on ${e.on}`:void 0;if((0,o.is)(f,h.PgTable)){let a=f[h.PgTable.Symbol.Name],c=f[h.PgTable.Symbol.Schema],j=f[h.PgTable.Symbol.OriginalName],k=a===j?void 0:e.alias;b.push(d.sql`${d.sql.raw(e.joinType)} join${g} ${c?d.sql`${d.sql.identifier(c)}.`:void 0}${d.sql.identifier(j)}${k&&d.sql` ${d.sql.identifier(k)}`}${i}`)}else if((0,o.is)(f,d.View)){let a=f[ce.ViewBaseConfig].name,c=f[ce.ViewBaseConfig].schema,h=f[ce.ViewBaseConfig].originalName,j=a===h?void 0:e.alias;b.push(d.sql`${d.sql.raw(e.joinType)} join${g} ${c?d.sql`${d.sql.identifier(c)}.`:void 0}${d.sql.identifier(h)}${j&&d.sql` ${d.sql.identifier(j)}`}${i}`)}else b.push(d.sql`${d.sql.raw(e.joinType)} join${g} ${f}${i}`);c<a.length-1&&b.push(d.sql` `)}return d.sql.join(b)}buildFromTable(a){if((0,o.is)(a,m.Table)&&a[m.Table.Symbol.IsAlias]){let b=d.sql`${d.sql.identifier(a[m.Table.Symbol.OriginalName])}`;return a[m.Table.Symbol.Schema]&&(b=d.sql`${d.sql.identifier(a[m.Table.Symbol.Schema])}.${b}`),d.sql`${b} ${d.sql.identifier(a[m.Table.Symbol.Name])}`}return a}buildSelectQuery({withList:a,fields:b,fieldsFlat:c,where:e,having:f,table:g,joins:h,orderBy:i,groupBy:j,limit:k,offset:l,lockingClause:p,distinct:q,setOperators:r}){let s,t,u,v=c??(0,cp.orderSelectedFields)(b);for(let a of v){let b;if((0,o.is)(a.field,n.Column)&&(0,m.getTableName)(a.field.table)!==((0,o.is)(g,cm.Subquery)?g._.alias:(0,o.is)(g,cI)?g[ce.ViewBaseConfig].name:(0,o.is)(g,d.SQL)?void 0:(0,m.getTableName)(g))&&(b=a.field.table,!h?.some(({alias:a})=>a===(b[m.Table.Symbol.IsAlias]?(0,m.getTableName)(b):b[m.Table.Symbol.BaseName])))){let b=(0,m.getTableName)(a.field.table);throw Error(`Your "${a.path.join("->")}" field references a column "${b}"."${a.field.name}", but the table "${b}" is not part of the query! Did you forget to join it?`)}}let w=!h||0===h.length,x=this.buildWithCTE(a);q&&(s=!0===q?d.sql` distinct`:d.sql` distinct on (${d.sql.join(q.on,d.sql`, `)})`);let y=this.buildSelection(v,{isSingleTable:w}),z=this.buildFromTable(g),A=this.buildJoins(h),B=e?d.sql` where ${e}`:void 0,C=f?d.sql` having ${f}`:void 0;i&&i.length>0&&(t=d.sql` order by ${d.sql.join(i,d.sql`, `)}`),j&&j.length>0&&(u=d.sql` group by ${d.sql.join(j,d.sql`, `)}`);let D="object"==typeof k||"number"==typeof k&&k>=0?d.sql` limit ${k}`:void 0,E=l?d.sql` offset ${l}`:void 0,F=d.sql.empty();if(p){let a=d.sql` for ${d.sql.raw(p.strength)}`;p.config.of&&a.append(d.sql` of ${d.sql.join(Array.isArray(p.config.of)?p.config.of:[p.config.of],d.sql`, `)}`),p.config.noWait?a.append(d.sql` nowait`):p.config.skipLocked&&a.append(d.sql` skip locked`),F.append(a)}let G=d.sql`${x}select${s} ${y} from ${z}${A}${B}${u}${C}${t}${D}${E}${F}`;return r.length>0?this.buildSetOperations(G,r):G}buildSetOperations(a,b){let[c,...d]=b;if(!c)throw Error("Cannot pass undefined values to any set operator");return 0===d.length?this.buildSetOperationQuery({leftSelect:a,setOperator:c}):this.buildSetOperations(this.buildSetOperationQuery({leftSelect:a,setOperator:c}),d)}buildSetOperationQuery({leftSelect:a,setOperator:{type:b,isAll:c,rightSelect:e,limit:f,orderBy:g,offset:h}}){let i,j=d.sql`(${a.getSQL()}) `,k=d.sql`(${e.getSQL()})`;if(g&&g.length>0){let a=[];for(let b of g)if((0,o.is)(b,cB.PgColumn))a.push(d.sql.identifier(b.name));else if((0,o.is)(b,d.SQL)){for(let a=0;a<b.queryChunks.length;a++){let c=b.queryChunks[a];(0,o.is)(c,cB.PgColumn)&&(b.queryChunks[a]=d.sql.identifier(c.name))}a.push(d.sql`${b}`)}else a.push(d.sql`${b}`);i=d.sql` order by ${d.sql.join(a,d.sql`, `)} `}let l="object"==typeof f||"number"==typeof f&&f>=0?d.sql` limit ${f}`:void 0,m=d.sql.raw(`${b} ${c?"all ":""}`),n=h?d.sql` offset ${h}`:void 0;return d.sql`${j}${m}${k}${i}${l}${n}`}buildInsertQuery({table:a,values:b,onConflict:c,returning:e,withList:f,select:g,overridingSystemValue_:h}){let i=[],j=Object.entries(a[m.Table.Symbol.Columns]).filter(([a,b])=>!b.shouldDisableInsert()),k=j.map(([,a])=>d.sql.identifier(this.casing.getColumnCasing(a)));if(g)(0,o.is)(b,d.SQL)?i.push(b):i.push(b.getSQL());else for(let[a,c]of(i.push(d.sql.raw("values ")),b.entries())){let e=[];for(let[a,b]of j){let f=c[a];if(void 0===f||(0,o.is)(f,d.Param)&&void 0===f.value)if(void 0!==b.defaultFn){let a=b.defaultFn(),c=(0,o.is)(a,d.SQL)?a:d.sql.param(a,b);e.push(c)}else if(b.default||void 0===b.onUpdateFn)e.push(d.sql`default`);else{let a=b.onUpdateFn(),c=(0,o.is)(a,d.SQL)?a:d.sql.param(a,b);e.push(c)}else e.push(f)}i.push(e),a<b.length-1&&i.push(d.sql`, `)}let l=this.buildWithCTE(f),n=d.sql.join(i),p=e?d.sql` returning ${this.buildSelection(e,{isSingleTable:!0})}`:void 0,q=c?d.sql` on conflict ${c}`:void 0,r=!0===h?d.sql`overriding system value `:void 0;return d.sql`${l}insert into ${a} ${k} ${r}${n}${q}${p}`}buildRefreshMaterializedViewQuery({view:a,concurrently:b,withNoData:c}){let e=b?d.sql` concurrently`:void 0,f=c?d.sql` with no data`:void 0;return d.sql`refresh materialized view${e} ${a}${f}`}prepareTyping(a){if((0,o.is)(a,cE.PgJsonb)||(0,o.is)(a,cD.PgJson))return"json";if((0,o.is)(a,g.PgNumeric))return"decimal";if((0,o.is)(a,cF.PgTime))return"time";if((0,o.is)(a,k.PgTimestamp)||(0,o.is)(a,k.PgTimestampString))return"timestamp";if((0,o.is)(a,cC.PgDate)||(0,o.is)(a,cC.PgDateString))return"date";else if((0,o.is)(a,cG.PgUUID))return"uuid";else return"none"}sqlToQuery(a,b){return a.toQuery({casing:this.casing,escapeName:this.escapeName,escapeParam:this.escapeParam,escapeString:this.escapeString,prepareTyping:this.prepareTyping,invokeSource:b})}buildRelationalQueryWithoutPK({fullSchema:a,schema:b,tableNamesMap:c,table:e,tableConfig:f,queryConfig:g,tableAlias:i,nestedQueryRelation:j,joinOn:k}){let l,p=[],t,u,x=[],y,z=[];if(!0===g)p=Object.entries(f.columns).map(([a,b])=>({dbKey:b.name,tsKey:a,field:cj(b,i),relationTableTsKey:void 0,isJson:!1,selection:[]}));else{let e=Object.fromEntries(Object.entries(f.columns).map(([a,b])=>[a,cj(b,i)]));if(g.where){let a="function"==typeof g.where?g.where(e,{and:q.and,between:q.between,eq:q.eq,exists:q.exists,gt:q.gt,gte:q.gte,ilike:q.ilike,inArray:q.inArray,isNull:q.isNull,isNotNull:q.isNotNull,like:q.like,lt:q.lt,lte:q.lte,ne:q.ne,not:q.not,notBetween:q.notBetween,notExists:q.notExists,notLike:q.notLike,notIlike:q.notIlike,notInArray:q.notInArray,or:q.or,sql:d.sql}):g.where;y=a&&cl(a,i)}let h=[],j=[];if(g.columns){let a=!1;for(let[b,c]of Object.entries(g.columns))void 0!==c&&b in f.columns&&(a||!0!==c||(a=!0),j.push(b));j.length>0&&(j=a?j.filter(a=>g.columns?.[a]===!0):Object.keys(f.columns).filter(a=>!j.includes(a)))}else j=Object.keys(f.columns);for(let a of j){let b=f.columns[a];h.push({tsKey:a,value:b})}let k=[];if(g.with&&(k=Object.entries(g.with).filter(a=>!!a[1]).map(([a,b])=>({tsKey:a,queryConfig:b,relation:f.relations[a]}))),g.extras)for(let[a,b]of Object.entries("function"==typeof g.extras?g.extras(e,{sql:d.sql}):g.extras))h.push({tsKey:a,value:ck(b,i)});for(let{tsKey:a,value:b}of h)p.push({dbKey:(0,o.is)(b,d.SQL.Aliased)?b.fieldAlias:f.columns[a].name,tsKey:a,field:(0,o.is)(b,n.Column)?cj(b,i):b,relationTableTsKey:void 0,isJson:!1,selection:[]});let l="function"==typeof g.orderBy?g.orderBy(e,{sql:d.sql,asc:r,desc:s}):g.orderBy??[];for(let{tsKey:e,queryConfig:f,relation:h}of(Array.isArray(l)||(l=[l]),x=l.map(a=>(0,o.is)(a,n.Column)?cj(a,i):cl(a,i)),t=g.limit,u=g.offset,k)){let g=function(a,b,c){if((0,o.is)(c,v)&&c.config)return{fields:c.config.fields,references:c.config.references};let d=b[(0,m.getTableUniqueName)(c.referencedTable)];if(!d)throw Error(`Table "${c.referencedTable[m.Table.Symbol.Name]}" not found in schema`);let e=a[d];if(!e)throw Error(`Table "${d}" not found in schema`);let f=c.sourceTable,g=b[(0,m.getTableUniqueName)(f)];if(!g)throw Error(`Table "${f[m.Table.Symbol.Name]}" not found in schema`);let h=[];for(let a of Object.values(e.relations))(c.relationName&&c!==a&&a.relationName===c.relationName||!c.relationName&&a.referencedTable===c.sourceTable)&&h.push(a);if(h.length>1)throw c.relationName?Error(`There are multiple relations with name "${c.relationName}" in table "${d}"`):Error(`There are multiple relations between "${d}" and "${c.sourceTable[m.Table.Symbol.Name]}". Please specify relation name`);if(h[0]&&(0,o.is)(h[0],v)&&h[0].config)return{fields:h[0].config.references,references:h[0].config.fields};throw Error(`There is not enough information to infer relation "${g}.${c.fieldName}"`)}(b,c,h),j=c[(0,m.getTableUniqueName)(h.referencedTable)],k=`${i}_${e}`,l=(0,q.and)(...g.fields.map((a,b)=>(0,q.eq)(cj(g.references[b],k),cj(a,i)))),n=this.buildRelationalQueryWithoutPK({fullSchema:a,schema:b,tableNamesMap:c,table:a[j],tableConfig:b[j],queryConfig:(0,o.is)(h,v)?!0===f?{limit:1}:{...f,limit:1}:f,tableAlias:k,joinOn:l,nestedQueryRelation:h}),r=d.sql`${d.sql.identifier(k)}.${d.sql.identifier("data")}`.as(e);z.push({on:d.sql`true`,table:new cm.Subquery(n.sql,{},k),alias:k,joinType:"left",lateral:!0}),p.push({dbKey:e,tsKey:e,field:r,relationTableTsKey:j,isJson:!0,selection:n.selection})}}if(0===p.length)throw new cy({message:`No fields selected for table "${f.tsName}" ("${i}")`});if(y=(0,q.and)(k,y),j){let a=d.sql`json_build_array(${d.sql.join(p.map(({field:a,tsKey:b,isJson:c})=>c?d.sql`${d.sql.identifier(`${i}_${b}`)}.${d.sql.identifier("data")}`:(0,o.is)(a,d.SQL.Aliased)?a.sql:a),d.sql`, `)})`;(0,o.is)(j,w)&&(a=d.sql`coalesce(json_agg(${a}${x.length>0?d.sql` order by ${d.sql.join(x,d.sql`, `)}`:void 0}), '[]'::json)`);let b=[{dbKey:"data",tsKey:"data",field:a.as("data"),isJson:!0,relationTableTsKey:f.tsName,selection:p}];void 0!==t||void 0!==u||x.length>0?(l=this.buildSelectQuery({table:ci(e,i),fields:{},fieldsFlat:[{path:[],field:d.sql.raw("*")}],where:y,limit:t,offset:u,orderBy:x,setOperators:[]}),y=void 0,t=void 0,u=void 0,x=[]):l=ci(e,i),l=this.buildSelectQuery({table:(0,o.is)(l,h.PgTable)?l:new cm.Subquery(l,{},i),fields:{},fieldsFlat:b.map(({field:a})=>({path:[],field:(0,o.is)(a,n.Column)?cj(a,i):a})),joins:z,where:y,limit:t,offset:u,orderBy:x,setOperators:[]})}else l=this.buildSelectQuery({table:ci(e,i),fields:{},fieldsFlat:p.map(({field:a})=>({path:[],field:(0,o.is)(a,n.Column)?cj(a,i):a})),joins:z,where:y,limit:t,offset:u,orderBy:x,setOperators:[]});return{tableTsKey:f.tsName,sql:l,selection:p}}}class cK{static [o.entityKind]="TypedQueryBuilder";getSelectedFields(){return this._.selectedFields}}class cL{static [o.entityKind]="PgSelectBuilder";fields;session;dialect;withList=[];distinct;constructor(a){this.fields=a.fields,this.session=a.session,this.dialect=a.dialect,a.withList&&(this.withList=a.withList),this.distinct=a.distinct}authToken;setToken(a){return this.authToken=a,this}from(a){let b,c=!!this.fields;return b=this.fields?this.fields:(0,o.is)(a,cm.Subquery)?Object.fromEntries(Object.keys(a._.selectedFields).map(b=>[b,a[b]])):(0,o.is)(a,cI)?a[ce.ViewBaseConfig].selectedFields:(0,o.is)(a,d.SQL)?{}:(0,cp.getTableColumns)(a),new cN({table:a,fields:b,isPartialSelect:c,session:this.session,dialect:this.dialect,withList:this.withList,distinct:this.distinct}).setToken(this.authToken)}}class cM extends cK{static [o.entityKind]="PgSelectQueryBuilder";_;config;joinsNotNullableMap;tableName;isPartialSelect;session;dialect;cacheConfig=void 0;usedTables=new Set;constructor({table:a,fields:b,isPartialSelect:c,session:d,dialect:e,withList:f,distinct:g}){for(const h of(super(),this.config={withList:f,table:a,fields:{...b},distinct:g,setOperators:[]},this.isPartialSelect=c,this.session=d,this.dialect=e,this._={selectedFields:b,config:this.config},this.tableName=(0,cp.getTableLikeName)(a),this.joinsNotNullableMap="string"==typeof this.tableName?{[this.tableName]:!0}:{},c4(a)))this.usedTables.add(h)}getUsedTables(){return[...this.usedTables]}createJoin(a,b){return(c,e)=>{let f=this.tableName,g=(0,cp.getTableLikeName)(c);for(let a of c4(c))this.usedTables.add(a);if("string"==typeof g&&this.config.joins?.some(a=>a.alias===g))throw Error(`Alias "${g}" is already used in this query`);if(!this.isPartialSelect&&(1===Object.keys(this.joinsNotNullableMap).length&&"string"==typeof f&&(this.config.fields={[f]:this.config.fields}),"string"==typeof g&&!(0,o.is)(c,d.SQL))){let a=(0,o.is)(c,cm.Subquery)?c._.selectedFields:(0,o.is)(c,d.View)?c[ce.ViewBaseConfig].selectedFields:c[m.Table.Symbol.Columns];this.config.fields[g]=a}if("function"==typeof e&&(e=e(new Proxy(this.config.fields,new cn({sqlAliasedBehavior:"sql",sqlBehavior:"sql"})))),this.config.joins||(this.config.joins=[]),this.config.joins.push({on:e,table:c,joinType:a,alias:g,lateral:b}),"string"==typeof g)switch(a){case"left":this.joinsNotNullableMap[g]=!1;break;case"right":this.joinsNotNullableMap=Object.fromEntries(Object.entries(this.joinsNotNullableMap).map(([a])=>[a,!1])),this.joinsNotNullableMap[g]=!0;break;case"cross":case"inner":this.joinsNotNullableMap[g]=!0;break;case"full":this.joinsNotNullableMap=Object.fromEntries(Object.entries(this.joinsNotNullableMap).map(([a])=>[a,!1])),this.joinsNotNullableMap[g]=!1}return this}}leftJoin=this.createJoin("left",!1);leftJoinLateral=this.createJoin("left",!0);rightJoin=this.createJoin("right",!1);innerJoin=this.createJoin("inner",!1);innerJoinLateral=this.createJoin("inner",!0);fullJoin=this.createJoin("full",!1);crossJoin=this.createJoin("cross",!1);crossJoinLateral=this.createJoin("cross",!0);createSetOperator(a,b){return c=>{let d="function"==typeof c?c(cP()):c;if(!(0,cp.haveSameKeys)(this.getSelectedFields(),d.getSelectedFields()))throw Error("Set operator error (union / intersect / except): selected fields are not the same or are in a different order");return this.config.setOperators.push({type:a,isAll:b,rightSelect:d}),this}}union=this.createSetOperator("union",!1);unionAll=this.createSetOperator("union",!0);intersect=this.createSetOperator("intersect",!1);intersectAll=this.createSetOperator("intersect",!0);except=this.createSetOperator("except",!1);exceptAll=this.createSetOperator("except",!0);addSetOperators(a){return this.config.setOperators.push(...a),this}where(a){return"function"==typeof a&&(a=a(new Proxy(this.config.fields,new cn({sqlAliasedBehavior:"sql",sqlBehavior:"sql"})))),this.config.where=a,this}having(a){return"function"==typeof a&&(a=a(new Proxy(this.config.fields,new cn({sqlAliasedBehavior:"sql",sqlBehavior:"sql"})))),this.config.having=a,this}groupBy(...a){if("function"==typeof a[0]){let b=a[0](new Proxy(this.config.fields,new cn({sqlAliasedBehavior:"alias",sqlBehavior:"sql"})));this.config.groupBy=Array.isArray(b)?b:[b]}else this.config.groupBy=a;return this}orderBy(...a){if("function"==typeof a[0]){let b=a[0](new Proxy(this.config.fields,new cn({sqlAliasedBehavior:"alias",sqlBehavior:"sql"}))),c=Array.isArray(b)?b:[b];this.config.setOperators.length>0?this.config.setOperators.at(-1).orderBy=c:this.config.orderBy=c}else this.config.setOperators.length>0?this.config.setOperators.at(-1).orderBy=a:this.config.orderBy=a;return this}limit(a){return this.config.setOperators.length>0?this.config.setOperators.at(-1).limit=a:this.config.limit=a,this}offset(a){return this.config.setOperators.length>0?this.config.setOperators.at(-1).offset=a:this.config.offset=a,this}for(a,b={}){return this.config.lockingClause={strength:a,config:b},this}getSQL(){return this.dialect.buildSelectQuery(this.config)}toSQL(){let{typings:a,...b}=this.dialect.sqlToQuery(this.getSQL());return b}as(a){let b=[];if(b.push(...c4(this.config.table)),this.config.joins)for(let a of this.config.joins)b.push(...c4(a.table));return new Proxy(new cm.Subquery(this.getSQL(),this.config.fields,a,!1,[...new Set(b)]),new cn({alias:a,sqlAliasedBehavior:"alias",sqlBehavior:"error"}))}getSelectedFields(){return new Proxy(this.config.fields,new cn({alias:this.tableName,sqlAliasedBehavior:"alias",sqlBehavior:"error"}))}$dynamic(){return this}$withCache(a){return this.cacheConfig=void 0===a?{config:{},enable:!0,autoInvalidate:!0}:!1===a?{enable:!1}:{enable:!0,autoInvalidate:!0,...a},this}}class cN extends cM{static [o.entityKind]="PgSelect";_prepare(a){let{session:b,config:c,dialect:d,joinsNotNullableMap:e,authToken:f,cacheConfig:g,usedTables:h}=this;if(!b)throw Error("Cannot execute a query on a query builder. Please use a database instance instead.");let{fields:i}=c;return co.tracer.startActiveSpan("drizzle.prepareQuery",()=>{let c=(0,cp.orderSelectedFields)(i),j=b.prepareQuery(d.sqlToQuery(this.getSQL()),c,a,!0,void 0,{type:"select",tables:[...h]},g);return j.joinsNotNullableMap=e,j.setToken(f)})}prepare(a){return this._prepare(a)}authToken;setToken(a){return this.authToken=a,this}execute=a=>co.tracer.startActiveSpan("drizzle.operation",()=>this._prepare().execute(a,this.authToken))}function cO(a,b){return(c,d,...e)=>{let f=[d,...e].map(c=>({type:a,isAll:b,rightSelect:c}));for(let a of f)if(!(0,cp.haveSameKeys)(c.getSelectedFields(),a.rightSelect.getSelectedFields()))throw Error("Set operator error (union / intersect / except): selected fields are not the same or are in a different order");return c.addSetOperators(f)}}(0,cp.applyMixins)(cN,[cd]);let cP=()=>({union:cQ,unionAll:cR,intersect:cS,intersectAll:cT,except:cU,exceptAll:cV}),cQ=cO("union",!1),cR=cO("union",!0),cS=cO("intersect",!1),cT=cO("intersect",!0),cU=cO("except",!1),cV=cO("except",!0);class cW{static [o.entityKind]="PgQueryBuilder";dialect;dialectConfig;constructor(a){this.dialect=(0,o.is)(a,cJ)?a:void 0,this.dialectConfig=(0,o.is)(a,cJ)?void 0:a}$with=(a,b)=>{let c=this;return{as:d=>("function"==typeof d&&(d=d(c)),new Proxy(new cm.WithSubquery(d.getSQL(),b??("getSelectedFields"in d?d.getSelectedFields()??{}:{}),a,!0),new cn({alias:a,sqlAliasedBehavior:"alias",sqlBehavior:"error"})))}};with(...a){let b=this;return{select:function(c){return new cL({fields:c??void 0,session:void 0,dialect:b.getDialect(),withList:a})},selectDistinct:function(a){return new cL({fields:a??void 0,session:void 0,dialect:b.getDialect(),distinct:!0})},selectDistinctOn:function(a,c){return new cL({fields:c??void 0,session:void 0,dialect:b.getDialect(),distinct:{on:a}})}}}select(a){return new cL({fields:a??void 0,session:void 0,dialect:this.getDialect()})}selectDistinct(a){return new cL({fields:a??void 0,session:void 0,dialect:this.getDialect(),distinct:!0})}selectDistinctOn(a,b){return new cL({fields:b??void 0,session:void 0,dialect:this.getDialect(),distinct:{on:a}})}getDialect(){return this.dialect||(this.dialect=new cJ(this.dialectConfig)),this.dialect}}class cX{constructor(a,b){this.name=a,this.schema=b}static [o.entityKind]="PgDefaultViewBuilderCore";config={};with(a){return this.config.with=a,this}}class cY extends cX{static [o.entityKind]="PgViewBuilder";as(a){"function"==typeof a&&(a=a(new cW));let b=new cn({alias:this.name,sqlBehavior:"error",sqlAliasedBehavior:"alias",replaceOriginalName:!0}),c=new Proxy(a.getSelectedFields(),b);return new Proxy(new c1({pgConfig:this.config,config:{name:this.name,schema:this.schema,selectedFields:c,query:a.getSQL().inlineParams()}}),b)}}class cZ extends cX{static [o.entityKind]="PgManualViewBuilder";columns;constructor(a,b,c){super(a,c),this.columns=(0,cp.getTableColumns)((0,h.pgTable)(a,b))}existing(){return new Proxy(new c1({pgConfig:void 0,config:{name:this.name,schema:this.schema,selectedFields:this.columns,query:void 0}}),new cn({alias:this.name,sqlBehavior:"error",sqlAliasedBehavior:"alias",replaceOriginalName:!0}))}as(a){return new Proxy(new c1({pgConfig:this.config,config:{name:this.name,schema:this.schema,selectedFields:this.columns,query:a.inlineParams()}}),new cn({alias:this.name,sqlBehavior:"error",sqlAliasedBehavior:"alias",replaceOriginalName:!0}))}}class c${constructor(a,b){this.name=a,this.schema=b}static [o.entityKind]="PgMaterializedViewBuilderCore";config={};using(a){return this.config.using=a,this}with(a){return this.config.with=a,this}tablespace(a){return this.config.tablespace=a,this}withNoData(){return this.config.withNoData=!0,this}}class c_ extends c${static [o.entityKind]="PgMaterializedViewBuilder";as(a){"function"==typeof a&&(a=a(new cW));let b=new cn({alias:this.name,sqlBehavior:"error",sqlAliasedBehavior:"alias",replaceOriginalName:!0}),c=new Proxy(a.getSelectedFields(),b);return new Proxy(new c3({pgConfig:{with:this.config.with,using:this.config.using,tablespace:this.config.tablespace,withNoData:this.config.withNoData},config:{name:this.name,schema:this.schema,selectedFields:c,query:a.getSQL().inlineParams()}}),b)}}class c0 extends c${static [o.entityKind]="PgManualMaterializedViewBuilder";columns;constructor(a,b,c){super(a,c),this.columns=(0,cp.getTableColumns)((0,h.pgTable)(a,b))}existing(){return new Proxy(new c3({pgConfig:{tablespace:this.config.tablespace,using:this.config.using,with:this.config.with,withNoData:this.config.withNoData},config:{name:this.name,schema:this.schema,selectedFields:this.columns,query:void 0}}),new cn({alias:this.name,sqlBehavior:"error",sqlAliasedBehavior:"alias",replaceOriginalName:!0}))}as(a){return new Proxy(new c3({pgConfig:{tablespace:this.config.tablespace,using:this.config.using,with:this.config.with,withNoData:this.config.withNoData},config:{name:this.name,schema:this.schema,selectedFields:this.columns,query:a.inlineParams()}}),new cn({alias:this.name,sqlBehavior:"error",sqlAliasedBehavior:"alias",replaceOriginalName:!0}))}}class c1 extends cI{static [o.entityKind]="PgView";[ct];constructor({pgConfig:a,config:b}){super(b),a&&(this[ct]={with:a.with})}}let c2=Symbol.for("drizzle:PgMaterializedViewConfig");class c3 extends cI{static [o.entityKind]="PgMaterializedView";[c2];constructor({pgConfig:a,config:b}){super(b),this[c2]={with:a?.with,using:a?.using,tablespace:a?.tablespace,withNoData:a?.withNoData}}}function c4(a){return(0,o.is)(a,h.PgTable)?[a[m.Schema]?`${a[m.Schema]}.${a[m.Table.Symbol.BaseName]}`:a[m.Table.Symbol.BaseName]]:(0,o.is)(a,cm.Subquery)?a._.usedTables??[]:(0,o.is)(a,d.SQL)?a.usedTables??[]:[]}class c5 extends cd{constructor(a,b,c,d){super(),this.session=b,this.dialect=c,this.config={table:a,withList:d}}static [o.entityKind]="PgDelete";config;cacheConfig;where(a){return this.config.where=a,this}returning(a=this.config.table[m.Table.Symbol.Columns]){return this.config.returningFields=a,this.config.returning=(0,cp.orderSelectedFields)(a),this}getSQL(){return this.dialect.buildDeleteQuery(this.config)}toSQL(){let{typings:a,...b}=this.dialect.sqlToQuery(this.getSQL());return b}_prepare(a){return co.tracer.startActiveSpan("drizzle.prepareQuery",()=>this.session.prepareQuery(this.dialect.sqlToQuery(this.getSQL()),this.config.returning,a,!0,void 0,{type:"delete",tables:c4(this.config.table)},this.cacheConfig))}prepare(a){return this._prepare(a)}authToken;setToken(a){return this.authToken=a,this}execute=a=>co.tracer.startActiveSpan("drizzle.operation",()=>this._prepare().execute(a,this.authToken));getSelectedFields(){return this.config.returningFields?new Proxy(this.config.returningFields,new cn({alias:(0,m.getTableName)(this.config.table),sqlAliasedBehavior:"alias",sqlBehavior:"error"})):void 0}$dynamic(){return this}}class c6{constructor(a,b,c,d,e){this.table=a,this.session=b,this.dialect=c,this.withList=d,this.overridingSystemValue_=e}static [o.entityKind]="PgInsertBuilder";authToken;setToken(a){return this.authToken=a,this}overridingSystemValue(){return this.overridingSystemValue_=!0,this}values(a){if(0===(a=Array.isArray(a)?a:[a]).length)throw Error("values() must be called with at least one value");let b=a.map(a=>{let b={},c=this.table[m.Table.Symbol.Columns];for(let e of Object.keys(a)){let f=a[e];b[e]=(0,o.is)(f,d.SQL)?f:new d.Param(f,c[e])}return b});return new c7(this.table,b,this.session,this.dialect,this.withList,!1,this.overridingSystemValue_).setToken(this.authToken)}select(a){let b="function"==typeof a?a(new cW):a;if(!(0,o.is)(b,d.SQL)&&!(0,cp.haveSameKeys)(this.table[m.Columns],b._.selectedFields))throw Error("Insert select error: selected fields are not the same or are in a different order compared to the table definition");return new c7(this.table,b,this.session,this.dialect,this.withList,!0)}}class c7 extends cd{constructor(a,b,c,d,e,f,g){super(),this.session=c,this.dialect=d,this.config={table:a,values:b,withList:e,select:f,overridingSystemValue_:g}}static [o.entityKind]="PgInsert";config;cacheConfig;returning(a=this.config.table[m.Table.Symbol.Columns]){return this.config.returningFields=a,this.config.returning=(0,cp.orderSelectedFields)(a),this}onConflictDoNothing(a={}){if(void 0===a.target)this.config.onConflict=d.sql`do nothing`;else{let b="";b=Array.isArray(a.target)?a.target.map(a=>this.dialect.escapeName(this.dialect.casing.getColumnCasing(a))).join(","):this.dialect.escapeName(this.dialect.casing.getColumnCasing(a.target));let c=a.where?d.sql` where ${a.where}`:void 0;this.config.onConflict=d.sql`(${d.sql.raw(b)})${c} do nothing`}return this}onConflictDoUpdate(a){if(a.where&&(a.targetWhere||a.setWhere))throw Error('You cannot use both "where" and "targetWhere"/"setWhere" at the same time - "where" is deprecated, use "targetWhere" or "setWhere" instead.');let b=a.where?d.sql` where ${a.where}`:void 0,c=a.targetWhere?d.sql` where ${a.targetWhere}`:void 0,e=a.setWhere?d.sql` where ${a.setWhere}`:void 0,f=this.dialect.buildUpdateSet(this.config.table,(0,cp.mapUpdateSet)(this.config.table,a.set)),g="";return g=Array.isArray(a.target)?a.target.map(a=>this.dialect.escapeName(this.dialect.casing.getColumnCasing(a))).join(","):this.dialect.escapeName(this.dialect.casing.getColumnCasing(a.target)),this.config.onConflict=d.sql`(${d.sql.raw(g)})${c} do update set ${f}${b}${e}`,this}getSQL(){return this.dialect.buildInsertQuery(this.config)}toSQL(){let{typings:a,...b}=this.dialect.sqlToQuery(this.getSQL());return b}_prepare(a){return co.tracer.startActiveSpan("drizzle.prepareQuery",()=>this.session.prepareQuery(this.dialect.sqlToQuery(this.getSQL()),this.config.returning,a,!0,void 0,{type:"insert",tables:c4(this.config.table)},this.cacheConfig))}prepare(a){return this._prepare(a)}authToken;setToken(a){return this.authToken=a,this}execute=a=>co.tracer.startActiveSpan("drizzle.operation",()=>this._prepare().execute(a,this.authToken));getSelectedFields(){return this.config.returningFields?new Proxy(this.config.returningFields,new cn({alias:(0,m.getTableName)(this.config.table),sqlAliasedBehavior:"alias",sqlBehavior:"error"})):void 0}$dynamic(){return this}}class c8{constructor(a,b,c,d){this.table=a,this.session=b,this.dialect=c,this.withList=d}static [o.entityKind]="PgUpdateBuilder";authToken;setToken(a){return this.authToken=a,this}set(a){return new c9(this.table,(0,cp.mapUpdateSet)(this.table,a),this.session,this.dialect,this.withList).setToken(this.authToken)}}class c9 extends cd{constructor(a,b,c,d,e){super(),this.session=c,this.dialect=d,this.config={set:b,table:a,withList:e,joins:[]},this.tableName=(0,cp.getTableLikeName)(a),this.joinsNotNullableMap="string"==typeof this.tableName?{[this.tableName]:!0}:{}}static [o.entityKind]="PgUpdate";config;tableName;joinsNotNullableMap;cacheConfig;from(a){let b=(0,cp.getTableLikeName)(a);return"string"==typeof b&&(this.joinsNotNullableMap[b]=!0),this.config.from=a,this}getTableLikeFields(a){return(0,o.is)(a,h.PgTable)?a[m.Table.Symbol.Columns]:(0,o.is)(a,cm.Subquery)?a._.selectedFields:a[ce.ViewBaseConfig].selectedFields}createJoin(a){return(b,c)=>{let e=(0,cp.getTableLikeName)(b);if("string"==typeof e&&this.config.joins.some(a=>a.alias===e))throw Error(`Alias "${e}" is already used in this query`);if("function"==typeof c){let a=this.config.from&&!(0,o.is)(this.config.from,d.SQL)?this.getTableLikeFields(this.config.from):void 0;c=c(new Proxy(this.config.table[m.Table.Symbol.Columns],new cn({sqlAliasedBehavior:"sql",sqlBehavior:"sql"})),a&&new Proxy(a,new cn({sqlAliasedBehavior:"sql",sqlBehavior:"sql"})))}if(this.config.joins.push({on:c,table:b,joinType:a,alias:e}),"string"==typeof e)switch(a){case"left":this.joinsNotNullableMap[e]=!1;break;case"right":this.joinsNotNullableMap=Object.fromEntries(Object.entries(this.joinsNotNullableMap).map(([a])=>[a,!1])),this.joinsNotNullableMap[e]=!0;break;case"inner":this.joinsNotNullableMap[e]=!0;break;case"full":this.joinsNotNullableMap=Object.fromEntries(Object.entries(this.joinsNotNullableMap).map(([a])=>[a,!1])),this.joinsNotNullableMap[e]=!1}return this}}leftJoin=this.createJoin("left");rightJoin=this.createJoin("right");innerJoin=this.createJoin("inner");fullJoin=this.createJoin("full");where(a){return this.config.where=a,this}returning(a){if(!a&&(a=Object.assign({},this.config.table[m.Table.Symbol.Columns]),this.config.from)){let b=(0,cp.getTableLikeName)(this.config.from);if("string"==typeof b&&this.config.from&&!(0,o.is)(this.config.from,d.SQL)){let c=this.getTableLikeFields(this.config.from);a[b]=c}for(let b of this.config.joins){let c=(0,cp.getTableLikeName)(b.table);if("string"==typeof c&&!(0,o.is)(b.table,d.SQL)){let d=this.getTableLikeFields(b.table);a[c]=d}}}return this.config.returningFields=a,this.config.returning=(0,cp.orderSelectedFields)(a),this}getSQL(){return this.dialect.buildUpdateQuery(this.config)}toSQL(){let{typings:a,...b}=this.dialect.sqlToQuery(this.getSQL());return b}_prepare(a){let b=this.session.prepareQuery(this.dialect.sqlToQuery(this.getSQL()),this.config.returning,a,!0,void 0,{type:"insert",tables:c4(this.config.table)},this.cacheConfig);return b.joinsNotNullableMap=this.joinsNotNullableMap,b}prepare(a){return this._prepare(a)}authToken;setToken(a){return this.authToken=a,this}execute=a=>this._prepare().execute(a,this.authToken);getSelectedFields(){return this.config.returningFields?new Proxy(this.config.returningFields,new cn({alias:(0,m.getTableName)(this.config.table),sqlAliasedBehavior:"alias",sqlBehavior:"error"})):void 0}$dynamic(){return this}}var da=d;class db extends da.SQL{constructor(a){super(db.buildEmbeddedCount(a.source,a.filters).queryChunks),this.params=a,this.mapWith(Number),this.session=a.session,this.sql=db.buildCount(a.source,a.filters)}sql;token;static [o.entityKind]="PgCountBuilder";[Symbol.toStringTag]="PgCountBuilder";session;static buildEmbeddedCount(a,b){return da.sql`(select count(*) from ${a}${da.sql.raw(" where ").if(b)}${b})`}static buildCount(a,b){return da.sql`select count(*) as count from ${a}${da.sql.raw(" where ").if(b)}${b};`}setToken(a){return this.token=a,this}then(a,b){return Promise.resolve(this.session.count(this.sql,this.token)).then(a,b)}catch(a){return this.then(void 0,a)}finally(a){return this.then(b=>(a?.(),b),b=>{throw a?.(),b})}}class dc{constructor(a,b,c,d,e,f,g){this.fullSchema=a,this.schema=b,this.tableNamesMap=c,this.table=d,this.tableConfig=e,this.dialect=f,this.session=g}static [o.entityKind]="PgRelationalQueryBuilder";findMany(a){return new dd(this.fullSchema,this.schema,this.tableNamesMap,this.table,this.tableConfig,this.dialect,this.session,a||{},"many")}findFirst(a){return new dd(this.fullSchema,this.schema,this.tableNamesMap,this.table,this.tableConfig,this.dialect,this.session,a?{...a,limit:1}:{limit:1},"first")}}class dd extends cd{constructor(a,b,c,d,e,f,g,h,i){super(),this.fullSchema=a,this.schema=b,this.tableNamesMap=c,this.table=d,this.tableConfig=e,this.dialect=f,this.session=g,this.config=h,this.mode=i}static [o.entityKind]="PgRelationalQuery";_prepare(a){return co.tracer.startActiveSpan("drizzle.prepareQuery",()=>{let{query:b,builtQuery:c}=this._toSQL();return this.session.prepareQuery(c,void 0,a,!0,(a,c)=>{let e=a.map(a=>(function a(b,c,e,f,g=a=>a){let h={};for(let[i,j]of f.entries())if(j.isJson){let d=c.relations[j.tsKey],f=e[i],k="string"==typeof f?JSON.parse(f):f;h[j.tsKey]=(0,o.is)(d,v)?k&&a(b,b[j.relationTableTsKey],k,j.selection,g):k.map(c=>a(b,b[j.relationTableTsKey],c,j.selection,g))}else{let a,b=g(e[i]),c=j.field;a=(0,o.is)(c,n.Column)?c:(0,o.is)(c,d.SQL)?c.decoder:c.sql.decoder,h[j.tsKey]=null===b?null:a.mapFromDriverValue(b)}return h})(this.schema,this.tableConfig,a,b.selection,c));return"first"===this.mode?e[0]:e})})}prepare(a){return this._prepare(a)}_getQuery(){return this.dialect.buildRelationalQueryWithoutPK({fullSchema:this.fullSchema,schema:this.schema,tableNamesMap:this.tableNamesMap,table:this.table,tableConfig:this.tableConfig,queryConfig:this.config,tableAlias:this.tableConfig.tsName})}getSQL(){return this._getQuery().sql}_toSQL(){let a=this._getQuery(),b=this.dialect.sqlToQuery(a.sql);return{query:a,builtQuery:b}}toSQL(){return this._toSQL().builtQuery}authToken;setToken(a){return this.authToken=a,this}execute(){return co.tracer.startActiveSpan("drizzle.operation",()=>this._prepare().execute(void 0,this.authToken))}}class de extends cd{constructor(a,b,c,d){super(),this.execute=a,this.sql=b,this.query=c,this.mapBatchResult=d}static [o.entityKind]="PgRaw";getSQL(){return this.sql}getQuery(){return this.query}mapResult(a,b){return b?this.mapBatchResult(a):a}_prepare(){return this}isResponseInArrayMode(){return!1}}class df extends cd{constructor(a,b,c){super(),this.session=b,this.dialect=c,this.config={view:a}}static [o.entityKind]="PgRefreshMaterializedView";config;concurrently(){if(void 0!==this.config.withNoData)throw Error("Cannot use concurrently and withNoData together");return this.config.concurrently=!0,this}withNoData(){if(void 0!==this.config.concurrently)throw Error("Cannot use concurrently and withNoData together");return this.config.withNoData=!0,this}getSQL(){return this.dialect.buildRefreshMaterializedViewQuery(this.config)}toSQL(){let{typings:a,...b}=this.dialect.sqlToQuery(this.getSQL());return b}_prepare(a){return co.tracer.startActiveSpan("drizzle.prepareQuery",()=>this.session.prepareQuery(this.dialect.sqlToQuery(this.getSQL()),void 0,a,!0))}prepare(a){return this._prepare(a)}authToken;setToken(a){return this.authToken=a,this}execute=a=>co.tracer.startActiveSpan("drizzle.operation",()=>this._prepare().execute(a,this.authToken))}class dg{constructor(a,b,c){if(this.dialect=a,this.session=b,this._=c?{schema:c.schema,fullSchema:c.fullSchema,tableNamesMap:c.tableNamesMap,session:b}:{schema:void 0,fullSchema:{},tableNamesMap:{},session:b},this.query={},this._.schema)for(const[d,e]of Object.entries(this._.schema))this.query[d]=new dc(c.fullSchema,this._.schema,this._.tableNamesMap,c.fullSchema[d],e,a,b);this.$cache={invalidate:async a=>{}}}static [o.entityKind]="PgDatabase";query;$with=(a,b)=>{let c=this;return{as:d=>("function"==typeof d&&(d=d(new cW(c.dialect))),new Proxy(new cm.WithSubquery(d.getSQL(),b??("getSelectedFields"in d?d.getSelectedFields()??{}:{}),a,!0),new cn({alias:a,sqlAliasedBehavior:"alias",sqlBehavior:"error"})))}};$count(a,b){return new db({source:a,filters:b,session:this.session})}$cache;with(...a){let b=this;return{select:function(c){return new cL({fields:c??void 0,session:b.session,dialect:b.dialect,withList:a})},selectDistinct:function(c){return new cL({fields:c??void 0,session:b.session,dialect:b.dialect,withList:a,distinct:!0})},selectDistinctOn:function(c,d){return new cL({fields:d??void 0,session:b.session,dialect:b.dialect,withList:a,distinct:{on:c}})},update:function(c){return new c8(c,b.session,b.dialect,a)},insert:function(c){return new c6(c,b.session,b.dialect,a)},delete:function(c){return new c5(c,b.session,b.dialect,a)}}}select(a){return new cL({fields:a??void 0,session:this.session,dialect:this.dialect})}selectDistinct(a){return new cL({fields:a??void 0,session:this.session,dialect:this.dialect,distinct:!0})}selectDistinctOn(a,b){return new cL({fields:b??void 0,session:this.session,dialect:this.dialect,distinct:{on:a}})}update(a){return new c8(a,this.session,this.dialect)}insert(a){return new c6(a,this.session,this.dialect)}delete(a){return new c5(a,this.session,this.dialect)}refreshMaterializedView(a){return new df(a,this.session,this.dialect)}authToken;execute(a){let b="string"==typeof a?d.sql.raw(a):a.getSQL(),c=this.dialect.sqlToQuery(b),e=this.session.prepareQuery(c,void 0,void 0,!1);return new de(()=>e.execute(void 0,this.authToken),b,c,a=>e.mapResult(a,!0))}transaction(a,b){return this.session.transaction(a,b)}}class dh{static [o.entityKind]="Cache"}class di extends dh{strategy(){return"all"}static [o.entityKind]="NoopCache";async get(a){}async put(a,b,c,d){}async onMutate(a){}}async function dj(a,b){let c=`${a}-${JSON.stringify(b)}`,d=new TextEncoder().encode(c);return[...new Uint8Array(await crypto.subtle.digest("SHA-256",d))].map(a=>a.toString(16).padStart(2,"0")).join("")}class dk{constructor(a,b,c,d){this.query=a,this.cache=b,this.queryMetadata=c,this.cacheConfig=d,b&&"all"===b.strategy()&&void 0===d&&(this.cacheConfig={enable:!0,autoInvalidate:!0}),this.cacheConfig?.enable||(this.cacheConfig=void 0)}authToken;getQuery(){return this.query}mapResult(a,b){return a}setToken(a){return this.authToken=a,this}static [o.entityKind]="PgPreparedQuery";joinsNotNullableMap;async queryWithCache(a,b,c){if(void 0===this.cache||(0,o.is)(this.cache,di)||void 0===this.queryMetadata||this.cacheConfig&&!this.cacheConfig.enable)try{return await c()}catch(c){throw new cz(a,b,c)}if(("insert"===this.queryMetadata.type||"update"===this.queryMetadata.type||"delete"===this.queryMetadata.type)&&this.queryMetadata.tables.length>0)try{let[a]=await Promise.all([c(),this.cache.onMutate({tables:this.queryMetadata.tables})]);return a}catch(c){throw new cz(a,b,c)}if(!this.cacheConfig)try{return await c()}catch(c){throw new cz(a,b,c)}if("select"===this.queryMetadata.type){let d=await this.cache.get(this.cacheConfig.tag??await dj(a,b),this.queryMetadata.tables,void 0!==this.cacheConfig.tag,this.cacheConfig.autoInvalidate);if(void 0===d){let d;try{d=await c()}catch(c){throw new cz(a,b,c)}return await this.cache.put(this.cacheConfig.tag??await dj(a,b),d,this.cacheConfig.autoInvalidate?this.queryMetadata.tables:[],void 0!==this.cacheConfig.tag,this.cacheConfig.config),d}return d}try{return await c()}catch(c){throw new cz(a,b,c)}}}class dl{constructor(a){this.dialect=a}static [o.entityKind]="PgSession";execute(a,b){return co.tracer.startActiveSpan("drizzle.operation",()=>co.tracer.startActiveSpan("drizzle.prepareQuery",()=>this.prepareQuery(this.dialect.sqlToQuery(a),void 0,void 0,!1)).setToken(b).execute(void 0,b))}all(a){return this.prepareQuery(this.dialect.sqlToQuery(a),void 0,void 0,!1).all()}async count(a,b){return Number((await this.execute(a,b))[0].count)}}class dm extends dg{constructor(a,b,c,d=0){super(a,b,c),this.schema=c,this.nestedIndex=d}static [o.entityKind]="PgTransaction";rollback(){throw new cA}getTransactionConfigSQL(a){let b=[];return a.isolationLevel&&b.push(`isolation level ${a.isolationLevel}`),a.accessMode&&b.push(a.accessMode),"boolean"==typeof a.deferrable&&b.push(a.deferrable?"deferrable":"not deferrable"),d.sql.raw(b.join(" "))}setTransaction(a){return this.session.execute(d.sql`set transaction ${this.getTransactionConfigSQL(a)}`)}}let dn={arrayMode:!1,fullResults:!0},dp={arrayMode:!0,fullResults:!0};class dq extends dk{constructor(a,b,c,d,e,f,g,h,i){super(b,d,e,f),this.client=a,this.logger=c,this.fields=g,this._isResponseInArrayMode=h,this.customResultMapper=i,this.clientQuery=a.query??a}static [o.entityKind]="NeonHttpPreparedQuery";clientQuery;async execute(a={},b=this.authToken){let c=(0,d.fillPlaceholders)(this.query.params,a);this.logger.logQuery(this.query.sql,c);let{fields:e,clientQuery:f,query:g,customResultMapper:h}=this;if(!e&&!h)return this.queryWithCache(g.sql,c,async()=>f(g.sql,c,void 0===b?dn:{...dn,authToken:b}));let i=await this.queryWithCache(g.sql,c,async()=>await f(g.sql,c,void 0===b?dp:{...dp,authToken:b}));return this.mapResult(i)}mapResult(a){if(!this.fields&&!this.customResultMapper)return a;let b=a.rows;return this.customResultMapper?this.customResultMapper(b):b.map(a=>(0,cp.mapResultRow)(this.fields,a,this.joinsNotNullableMap))}all(a={}){let b=(0,d.fillPlaceholders)(this.query.params,a);return this.logger.logQuery(this.query.sql,b),this.clientQuery(this.query.sql,b,void 0===this.authToken?dn:{...dn,authToken:this.authToken}).then(a=>a.rows)}values(a={},b){let c=(0,d.fillPlaceholders)(this.query.params,a);return this.logger.logQuery(this.query.sql,c),this.clientQuery(this.query.sql,c,{arrayMode:!0,fullResults:!0,authToken:b}).then(a=>a.rows)}isResponseInArrayMode(){return this._isResponseInArrayMode}}class dr extends dl{constructor(a,b,c,d={}){super(b),this.client=a,this.schema=c,this.options=d,this.clientQuery=a.query??a,this.logger=d.logger??new cc,this.cache=d.cache??new di}static [o.entityKind]="NeonHttpSession";clientQuery;logger;cache;prepareQuery(a,b,c,d,e,f,g){return new dq(this.client,a,this.logger,this.cache,f,g,b,d,e)}async batch(a){let b=[],c=[];for(let d of a){let a=d._prepare(),e=a.getQuery();b.push(a),c.push(this.clientQuery(e.sql,e.params,{fullResults:!0,arrayMode:a.isResponseInArrayMode()}))}return(await this.client.transaction(c,dp)).map((a,c)=>b[c].mapResult(a,!0))}async query(a,b){return this.logger.logQuery(a,b),await this.clientQuery(a,b,{arrayMode:!0,fullResults:!0})}async queryObjects(a,b){return this.clientQuery(a,b,{arrayMode:!1,fullResults:!0})}async count(a,b){return Number((await this.execute(a,b)).rows[0].count)}async transaction(a,b={}){throw Error("No transactions support in neon-http driver")}}class ds extends dm{static [o.entityKind]="NeonHttpTransaction";async transaction(a){throw Error("No transactions support in neon-http driver")}}class dt{constructor(a,b,c={}){this.client=a,this.dialect=b,this.options=c,this.initMappers()}static [o.entityKind]="NeonHttpDriver";createSession(a){return new dr(this.client,this.dialect,a,{logger:this.options.logger,cache:this.options.cache})}initMappers(){b9.setTypeParser(b9.builtins.TIMESTAMPTZ,a=>a),b9.setTypeParser(b9.builtins.TIMESTAMP,a=>a),b9.setTypeParser(b9.builtins.DATE,a=>a),b9.setTypeParser(b9.builtins.INTERVAL,a=>a),b9.setTypeParser(1231,a=>a),b9.setTypeParser(1115,a=>a),b9.setTypeParser(1185,a=>a),b9.setTypeParser(1187,a=>a),b9.setTypeParser(1182,a=>a)}}function du(a,b,c,d){return new Proxy(a,{get(a,e){let f=a[e];return"function"!=typeof f&&("object"!=typeof f||null===f)?f:d?du(f,b,c):"query"===e?du(f,b,c,!0):new Proxy(f,{apply(a,d,f){let g=a.call(d,...f);return"object"==typeof g&&null!==g&&"setToken"in g&&"function"==typeof g.setToken&&g.setToken(b),c(a,e,g)}})}})}class dv extends dg{static [o.entityKind]="NeonHttpDatabase";$withAuth(a){return this.authToken=a,du(this,a,(b,c,d)=>"with"===c?du(d,a,(a,b,c)=>c):d)}async batch(a){return this.session.batch(a)}}function dw(a,b={}){let c,d,e=new cJ({casing:b.casing});if(!0===b.logger?c=new cb:!1!==b.logger&&(c=b.logger),b.schema){let a=function(a,b){1===Object.keys(a).length&&"default"in a&&!(0,o.is)(a.default,m.Table)&&(a=a.default);let c={},d={},e={};for(let[f,g]of Object.entries(a))if((0,o.is)(g,m.Table)){let a=(0,m.getTableUniqueName)(g),b=d[a];for(let d of(c[a]=f,e[f]={tsName:f,dbName:g[m.Table.Symbol.Name],schema:g[m.Table.Symbol.Schema],columns:g[m.Table.Symbol.Columns],relations:b?.relations??{},primaryKey:b?.primaryKey??[]},Object.values(g[m.Table.Symbol.Columns])))d.primary&&e[f].primaryKey.push(d);let h=g[m.Table.Symbol.ExtraConfigBuilder]?.(g[m.Table.Symbol.ExtraConfigColumns]);if(h)for(let a of Object.values(h))(0,o.is)(a,p.PrimaryKeyBuilder)&&e[f].primaryKey.push(...a.columns)}else if((0,o.is)(g,u)){let a,f=(0,m.getTableUniqueName)(g.table),h=c[f];for(let[c,i]of Object.entries(g.config(b(g.table))))if(h){let b=e[h];b.relations[c]=i,a&&b.primaryKey.push(...a)}else f in d||(d[f]={relations:{},primaryKey:a}),d[f].relations[c]=i}return{tables:e,tableNamesMap:c}}(b.schema,y);d={fullSchema:b.schema,schema:a.tables,tableNamesMap:a.tableNamesMap}}let f=new dt(a,e,{logger:c,cache:b.cache}).createSession(d),g=new dv(e,f,d);return g.$client=a,g.$cache=b.cache,g.$cache&&(g.$cache.invalidate=b.cache?.onMutate),g}function dx(...a){if("string"==typeof a[0])return dw(b$(a[0]),a[1]);if((0,cp.isConfig)(a[0])){let{connection:b,client:c,...d}=a[0];if(c)return dw(c,d);if("object"==typeof b){let{connectionString:a,...c}=b;return dw(b$(a,c),d)}return dw(b$(b),d)}return dw(a[0],a[1])}(dx||(dx={})).mock=function(a){return dw({},a)};let dy=dx({client:b$(process.env.DATABASE_URL),schema:O});a.s(["db",0,dy],94758)}];

//# sourceMappingURL=_3ade87ed._.js.map